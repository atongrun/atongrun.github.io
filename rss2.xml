<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>atong</title>
    <link>http://example.com/</link>
    
    <atom:link href="http://example.com/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>ä¸‡åƒä¸å¦‚æ„ï¼Œç¡å¾—ç€å°±è¿‡å¾—å»</description>
    <pubDate>Fri, 30 Dec 2022 15:10:23 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>C++11ï¼ˆå³å€¼ï¼‰</title>
      <link>http://example.com/2022/12/30/CPP/C++11(%E5%8F%B3%E5%80%BC)/</link>
      <guid>http://example.com/2022/12/30/CPP/C++11(%E5%8F%B3%E5%80%BC)/</guid>
      <pubDate>Fri, 30 Dec 2022 15:09:47 GMT</pubDate>
      
        
        
      <description>&lt;h1 id=&quot;å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰&quot;&gt;&lt;a href=&quot;#å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰&quot; class=&quot;headerlink&quot; title=&quot;å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰&quot;&gt;&lt;/a&gt;å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;ä¼ ç»Ÿçš„C++è¯­æ³•ä¸­å°±æœ‰å¼•ç”¨çš„è¯­æ³•ï¼Œè€ŒC++11ä¸­æ–°å¢äº†çš„å³</description>
        
      
      
      
      <content:encoded><![CDATA[<h1 id="å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰"><a href="#å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰" class="headerlink" title="å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰"></a>å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰</h1><blockquote><p>ä¼ ç»Ÿçš„C++è¯­æ³•ä¸­å°±æœ‰å¼•ç”¨çš„è¯­æ³•ï¼Œè€ŒC++11ä¸­æ–°å¢äº†çš„å³å€¼å¼•ç”¨è¯­æ³•ç‰¹æ€§ï¼Œæ‰€ä»¥ä»ç°åœ¨å¼€å§‹æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„å¼•ç”¨å°±å«åšå·¦å€¼å¼•ç”¨ã€‚æ— è®ºå·¦å€¼å¼•ç”¨è¿˜æ˜¯å³å€¼å¼•ç”¨ï¼Œéƒ½æ˜¯ç»™å¯¹è±¡å–åˆ«åã€‚</p></blockquote><h2 id="å³å€¼å¼•å…¥"><a href="#å³å€¼å¼•å…¥" class="headerlink" title="å³å€¼å¼•å…¥"></a>å³å€¼å¼•å…¥</h2><blockquote><p>åœ¨ä»¥å‰æˆ‘ä»¬çŸ¥é“æœ‰å¼•ç”¨çš„è¯­æ³•ï¼Œæˆ‘ä»¬é€šå¸¸å«åšå·¦å€¼å¼•ç”¨ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯å·¦å€¼å‘¢ï¼Ÿå¯ä»¥çœ‹ä¸‹è¾¹çš„å‡ ä¸ªä¾‹å­</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// å·¦å€¼ï¼šå¯ä»¥å–å®ƒçš„åœ°å€</span></span><br><span class="line"><span class="comment">/*int a = 10;</span></span><br><span class="line"><span class="comment">const int b = 20;</span></span><br><span class="line"><span class="comment">int* p = &amp;a;</span></span><br><span class="line"><span class="comment">*p = 100;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹çš„pã€bã€cã€*péƒ½æ˜¯å·¦å€¼</span></span><br><span class="line"><span class="type">int</span>* p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">0</span>);</span><br><span class="line"><span class="type">int</span> b = <span class="number">1</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹å‡ ä¸ªæ˜¯å¯¹ä¸Šé¢å·¦å€¼çš„å·¦å€¼å¼•ç”¨</span></span><br><span class="line"><span class="type">int</span>*&amp; rp = p;</span><br><span class="line"><span class="type">int</span>&amp; rb = b;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span>&amp; rc = c;</span><br><span class="line"><span class="type">int</span>&amp; pvalue = *p;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> x = <span class="number">1.1</span>, y = <span class="number">2.2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå·¦å€¼ï¼Œ<strong>å¯ä»¥è·å–å®ƒçš„åœ°å€+å¯ä»¥å¯¹å®ƒèµ‹å€¼</strong>ã€‚å½“ç„¶å®šä¹‰æ—¶ç”¨constä¿®é¥°çš„å·¦å€¼ï¼Œä¹Ÿä¸èƒ½å¯¹ä»–èµ‹å€¼ï¼Œä½†æ˜¯å¯ä»¥<strong>å–åœ°å€</strong>ã€‚å·¦å€¼å¼•ç”¨å‘¢ï¼Œå°±æ˜¯ç»™å·¦å€¼çš„å¼•ç”¨ã€‚</p><blockquote><p>çŸ¥é“å·¦å€¼åï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯å³å€¼å‘¢ï¼Ÿå³å€¼çš„å½¢å¼æ˜¯ä»€ä¹ˆï¼Ÿå³å€¼æœ‰ä»€ä¹ˆå®é™…ä»·å€¼ï¼Ÿçœ‹å‡ ä¸ªä¾‹å­</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// å³å€¼:ä¸èƒ½å–åœ°å€</span></span><br><span class="line"><span class="number">10</span>; </span><br><span class="line">x + y;</span><br><span class="line"><span class="built_in">fmin</span>(x, y);</span><br><span class="line"><span class="comment">//cout &lt;&lt; &amp;10 &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &amp;(x + y) &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹å‡ ä¸ªéƒ½æ˜¯å¯¹å³å€¼çš„å³å€¼å¼•ç”¨</span></span><br><span class="line"><span class="type">int</span>&amp;&amp; rr1 = <span class="number">10</span>;</span><br><span class="line"><span class="type">double</span>&amp;&amp; rr2 = x + y;</span><br><span class="line"><span class="type">double</span>&amp;&amp; rr3 = <span class="built_in">fmin</span>(x, y);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œç¼–è¯‘ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="number">10</span> = <span class="number">1</span>;</span><br><span class="line">x + y = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">fmin</span>(x, y) = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‡ ä¸ªä¾‹å­éƒ½æ˜¯å³å€¼ï¼Œå³å€¼ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾æ•°æ®çš„è¡¨è¾¾å¼ï¼Œå¦‚å­—é¢å¸¸é‡ã€è¡¨è¾¾å¼è¿”å›å€¼ï¼Œå‡½æ•°è¿”å›å€¼ï¼ˆè¿™ä¸ªä¸èƒ½æ˜¯å·¦å€¼å¼•ç”¨è¿”å›ï¼‰ç­‰ç­‰ï¼Œ<strong>å³å€¼å¯ä»¥å‡ºç°åœ¨èµ‹å€¼ç¬¦å·å³è¾¹ï¼Œä½†æ˜¯ä¸èƒ½å‡ºç°åœ¨èµ‹å€¼ç¬¦å·çš„å·¦è¾¹ï¼Œå³å€¼ä¸èƒ½å–åœ°å€</strong>ã€‚</p><blockquote><p>å³å€¼å¼•ç”¨å°±æ˜¯å¯¹å³å€¼çš„å¼•ç”¨ï¼Œç»™å³å€¼å–åˆ«å</p></blockquote><h2 id="å·¦å€¼å³å€¼"><a href="#å·¦å€¼å³å€¼" class="headerlink" title="å·¦å€¼å³å€¼"></a>å·¦å€¼å³å€¼</h2><blockquote><p>å·¦å€¼å¼•ç”¨å¯ä»¥å¼•ç”¨å³å€¼å—ï¼Ÿå³å€¼å¼•ç”¨å¯ä»¥å¼•ç”¨å³å€¼å—ï¼Ÿ</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ‰æ¡ä»¶çš„æ”¯æŒ</span></span><br><span class="line"><span class="comment">// å·¦å€¼å¼•ç”¨å¯ä»¥å¼•ç”¨å³å€¼å—ï¼Ÿ constçš„å·¦å€¼å¼•ç”¨å¯ä»¥</span></span><br><span class="line"><span class="comment">//double&amp; r1 = x + y;</span></span><br><span class="line"><span class="type">const</span> <span class="type">double</span>&amp; r1 = x + y;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å³å€¼å¼•ç”¨å¯ä»¥å¼•ç”¨å·¦å€¼å—ï¼Ÿå¯ä»¥å¼•ç”¨moveä»¥åçš„å·¦å€¼</span></span><br><span class="line"><span class="comment">//int&amp;&amp; rr5 = b;</span></span><br><span class="line"><span class="type">int</span>&amp;&amp; rr5 = <span class="built_in">move</span>(b);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ³¨æ„ï¼š</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212281629905.png"></p><p>11æ˜¯å­—é¢å¸¸é‡ï¼ŒFuncå‡½æ•°å‚æ•°åˆ—è¡¨æ˜¯ä¸ªå·¦å€¼å¼•ç”¨ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ï¼Œä¸¤ç§ä¿®æ”¹æ–¹æ³•ï¼š</p><ul><li>Func(const T&amp; x) </li><li>Func(T&amp;&amp; x)</li></ul><p>ç¬¬ä¸€ç§æ–¹æ³•ï¼š<strong>constçš„å·¦å€¼å¼•ç”¨å¯ä»¥æ¥æ”¶å³å€¼</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xæ—¢èƒ½æ¥æ”¶å·¦å€¼ï¼Œä¹Ÿèƒ½æ¥æ”¶å³å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Func</span><span class="params">(<span class="type">const</span> T&amp; x)</span></span></span><br><span class="line"><span class="function"></span>&#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="å·¦å³å€¼æ€»ç»“"><a href="#å·¦å³å€¼æ€»ç»“" class="headerlink" title="å·¦å³å€¼æ€»ç»“"></a>å·¦å³å€¼æ€»ç»“</h2><h3 id="å·¦å€¼å¼•ç”¨æ€»ç»“"><a href="#å·¦å€¼å¼•ç”¨æ€»ç»“" class="headerlink" title="å·¦å€¼å¼•ç”¨æ€»ç»“"></a>å·¦å€¼å¼•ç”¨æ€»ç»“</h3><ol><li>å·¦å€¼å¼•ç”¨åªèƒ½å¼•ç”¨å·¦å€¼ã€‚</li><li>ä½†æ˜¯constå·¦å€¼å¼•ç”¨æ—¢å¯å¼•ç”¨å·¦å€¼ï¼Œä¹Ÿå¯å¼•ç”¨å³å€¼ã€‚</li></ol><h3 id="å³å€¼å¼•ç”¨æ€»ç»“"><a href="#å³å€¼å¼•ç”¨æ€»ç»“" class="headerlink" title="å³å€¼å¼•ç”¨æ€»ç»“"></a>å³å€¼å¼•ç”¨æ€»ç»“</h3><ol><li>å³å€¼å¼•ç”¨åªèƒ½å¼•ç”¨å³å€¼ï¼Œä¸èƒ½å¼•ç”¨å·¦å€¼</li><li>å³å€¼å¼•ç”¨å¯ä»¥å¼•ç”¨moveä¹‹åçš„å·¦å€¼</li></ol><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212301753811.png"></p><p>rr1å’Œrr2å¯ä»¥å–åœ°å€äº†ï¼Œå®ƒä»¬æ˜¯å·¦å€¼äº†ã€‚</p><h2 id="å·¦å€¼çš„ä¸è¶³"><a href="#å·¦å€¼çš„ä¸è¶³" class="headerlink" title="å·¦å€¼çš„ä¸è¶³"></a>å·¦å€¼çš„ä¸è¶³</h2><blockquote><p>å¼•ç”¨çš„ä»·å€¼ï¼šå‡å°‘æ‹·è´</p></blockquote><p>å·¦å€¼å¼•ç”¨è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ</p><ol><li>åšå‚æ•°ã€‚aã€å‡å°‘æ‹·è´ï¼Œæé«˜æ•ˆç‡  bã€åšè¾“å‡ºå‹å‚æ•°</li><li>åšè¿”å›å€¼ã€‚ aã€å‡å°‘æ‹·è´ï¼Œæé«˜æ•ˆç‡  bã€å¼•ç”¨è¿”å›ï¼Œå¯ä»¥ä¿®æ”¹è¿”å›å¯¹è±¡ï¼ˆæ¯”å¦‚ï¼šoperator[]ï¼‰</li></ol><p>ä½†æ˜¯ï¼ŒC++98çš„å·¦å€¼å¼•ç”¨é¢å‘ä¸‹è¾¹çš„åœºæ™¯å¾ˆéš¾è¿›è¡Œå¤„ç†ï¼š</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212301937870.png"></p><p>å³è¾¹çš„å†™æ³•è™½ç„¶è§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯å¤ªç¬¦åˆä½¿ç”¨ä¹ æƒ¯</p><h3 id="å…·ä½“ä¾‹å­"><a href="#å…·ä½“ä¾‹å­" class="headerlink" title="å…·ä½“ä¾‹å­"></a>å…·ä½“ä¾‹å­</h3><p>ä¸åŠ ç§»åŠ¨æ„é€ çš„string</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212302010806.png"></p><p>åŠ ç§»åŠ¨æ„é€ çš„stringç±»</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212302045284.png"></p><p>ä¸åŠ ç§»åŠ¨æ„é€ ç§»åŠ¨èµ‹å€¼çš„string</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212302216855.png"></p><p>åŠ ç§»åŠ¨æ„é€ ç§»åŠ¨èµ‹å€¼çš„stringç±»</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212302216109.png"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼è§£å†³äº†ä¼ å€¼è¿”å›è¿™äº›ç±»å‹å¯¹è±¡çš„é—®é¢˜ï¼ŒSTLçš„å„ä¸ªå®¹å™¨åœ¨C++11å¢åŠ ç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼ã€‚ç§»åŠ¨æ„é€ æœ¬è´¨æ˜¯å°†å‚æ•°å³å€¼çš„èµ„æºçªƒå–è¿‡æ¥ï¼Œå ä½å·²æœ‰ï¼Œé‚£ä¹ˆå°±ä¸ç”¨åšæ·±æ‹·è´äº†ï¼Œæ‰€ä»¥å®ƒå«åšç§»åŠ¨æ„é€ ï¼Œå°±æ˜¯çªƒå–åˆ«äººçš„èµ„æºæ¥æ„é€ è‡ªå·±ã€‚</p><h1 id="å®Œç¾è½¬å‘"><a href="#å®Œç¾è½¬å‘" class="headerlink" title="å®Œç¾è½¬å‘"></a>å®Œç¾è½¬å‘</h1><h2 id="æ¨¡æ¿ä¸­-amp-amp-ä¸‡èƒ½å¼•ç”¨"><a href="#æ¨¡æ¿ä¸­-amp-amp-ä¸‡èƒ½å¼•ç”¨" class="headerlink" title="æ¨¡æ¿ä¸­&amp;&amp;ä¸‡èƒ½å¼•ç”¨"></a>æ¨¡æ¿ä¸­&amp;&amp;ä¸‡èƒ½å¼•ç”¨</h2><blockquote><p>åœ¨æ¨¡æ¿ä¸­ï¼Œ&amp;&amp;ä¸ä»£è¡¨å³å€¼å¼•ç”¨ï¼Œè€Œæ˜¯ä¸‡èƒ½å¼•ç”¨ï¼Œå…¶æ—¢èƒ½æ¥æ”¶å·¦å€¼åˆèƒ½æ¥æ”¶å³å€¼ï¼Œä½†æ˜¯å¼•ç”¨ç±»å‹çš„å”¯ä¸€ä½œç”¨å°±æ˜¯é™åˆ¶äº†æ¥æ”¶çš„ç±»å‹ï¼Œåç»­ä½¿ç”¨ä¸­éƒ½é€€åŒ–æˆäº†å·¦å€¼ã€‚</p></blockquote><p>å…ˆçœ‹ä¸ªä¾‹å­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Fun</span><span class="params">(<span class="type">int</span>&amp; x)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;å·¦å€¼å¼•ç”¨&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Fun</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; x)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;const å·¦å€¼å¼•ç”¨&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Fun</span><span class="params">(<span class="type">int</span>&amp;&amp; x)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;å³å€¼å¼•ç”¨&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Fun</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp;&amp; x)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;const å³å€¼å¼•ç”¨&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PerfectForward</span><span class="params">(T&amp;&amp; t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">Fun</span>(t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">PerfectForward</span>(<span class="number">10</span>);           <span class="comment">// å³å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a;</span><br><span class="line"><span class="built_in">PerfectForward</span>(a);            <span class="comment">// å·¦å€¼</span></span><br><span class="line"><span class="built_in">PerfectForward</span>(std::<span class="built_in">move</span>(a)); <span class="comment">// å³å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> b = <span class="number">8</span>;</span><br><span class="line"><span class="built_in">PerfectForward</span>(b);      <span class="comment">// const å·¦å€¼</span></span><br><span class="line"><span class="built_in">PerfectForward</span>(std::<span class="built_in">move</span>(b)); <span class="comment">// const å³å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æˆ‘ä»¬çš„é¢„æœŸä¸­ï¼ŒFuncå‡½æ•°åº”è¯¥æ˜¯ï¼Œå·¦å€¼æ‰“å°å·¦å€¼ï¼Œå³å€¼æ‰“å°å³å€¼ï¼Œä½†æ˜¯è¿è¡Œç»“æœç¡®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212302231604.png"></p><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰çš„éƒ½æˆäº†å·¦å€¼å¼•ç”¨ï¼Œæ ¹æœ¬æ²¡æœ‰è°ƒç”¨å³å€¼å¼•ç”¨çš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªå°±æ˜¯<strong>å¼•ç”¨æŠ˜å </strong>çš„é—®é¢˜ã€‚</p><h2 id="std-forward"><a href="#std-forward" class="headerlink" title="std::forward"></a>std::forward</h2><blockquote><p>æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåœ¨ä¼ é€’è¿‡ç¨‹ä¸­ä¿æŒå®ƒçš„å·¦å€¼æˆ–è€…å³å€¼çš„å±æ€§, å°±éœ€è¦ç”¨å®Œç¾è½¬å‘ã€‚</p></blockquote><p>é’ˆå¯¹ä¸Šè¾¹çš„ä»£ç åªéœ€è¦å°†ï¼ŒTç±»å‹çš„å‚æ•°tå®Œç¾è½¬å‘ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œ<strong>std::forward å®Œç¾è½¬å‘åœ¨ä¼ å‚çš„è¿‡ç¨‹ä¸­ä¿ç•™å¯¹è±¡åŸç”Ÿç±»å‹å±æ€§</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PerfectForward</span><span class="params">(T&amp;&amp; t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">Fun</span>(std::forward&lt;T&gt;(t));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212302243796.png"></p><p>å¯ä»¥çœ‹åˆ°å®Œç¾è½¬å‘çš„æ•ˆæœï¼Œå·¦å€¼è°ƒç”¨å·¦å€¼ï¼Œå³å€¼è°ƒç”¨å³å€¼ã€‚</p><h2 id="å®é™…åº”ç”¨ä¾‹å­"><a href="#å®é™…åº”ç”¨ä¾‹å­" class="headerlink" title="å®é™…åº”ç”¨ä¾‹å­"></a>å®é™…åº”ç”¨ä¾‹å­</h2><p>åœ¨æˆ‘ä»¬æ¨¡æ‹Ÿå®ç°çš„listä¸­æµ‹è¯•ï¼Œç§»åŠ¨æ„é€ </p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212302252471.png"></p><p>listæ’å…¥â€worldâ€ï¼ˆå³å€¼ï¼‰ï¼Œä»£ç è°ƒç”¨å±‚çº§å¦‚ä¸‹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">push_back</span><span class="params">(T&amp;&amp; x)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">insert</span>(<span class="built_in">end</span>(), std::forward&lt;T&gt;(x)); <span class="comment">//å®Œç¾è½¬å‘ä¿ç•™å³å€¼å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨insertï¼Œè¿™é‡Œä¹Ÿæ˜¯ä¸‡èƒ½å¼•ç”¨æ¥æ”¶</span></span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">insert</span><span class="params">(iterator pos, T&amp;&amp; x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Node* cur = pos._node;</span><br><span class="line">Node* prev = cur-&gt;_prev;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™é‡Œè°ƒç”¨èŠ‚ç‚¹çš„æ„é€ å‡½æ•°ï¼Œä¹ŸåŒæ ·è¦å®Œç¾è½¬å‘ï¼Œä¿ç•™å³å€¼å±æ€§</span></span><br><span class="line">Node* newnode = <span class="keyword">new</span> <span class="built_in">Node</span>(std::forward&lt;T&gt;(x)); </span><br><span class="line"></span><br><span class="line"><span class="comment">// prev newnode cur</span></span><br><span class="line">prev-&gt;_next = newnode;</span><br><span class="line">newnode-&gt;_prev = prev;</span><br><span class="line">newnode-&gt;_next = cur;</span><br><span class="line">cur-&gt;_prev = newnode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">iterator</span>(newnode);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// insertè°ƒç”¨äº†é“¾è¡¨èŠ‚ç‚¹çš„æ„é€ ï¼ŒåŒæ ·ç”¨ä¸‡èƒ½å¼•ç”¨æ¥æ”¶</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">list_node</span>(T&amp;&amp; x)</span><br><span class="line">:_data(std::forward&lt;T&gt;(x))  <span class="comment">//å®Œç¾è½¬å‘</span></span><br><span class="line">, _next(<span class="literal">nullptr</span>)</span><br><span class="line">, _prev(<span class="literal">nullptr</span>)</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure><p>æœ€åçš„èŠ‚ç‚¹çš„æ„é€ ï¼Œä¼šè°ƒç”¨stringç±»çš„æ„é€ ï¼Œæ‰€ä»¥é‚£é‡ŒåŒæ ·éœ€è¦å®Œç¾è½¬å‘ï¼Œè°ƒç”¨äº†stringç±»çš„å³å€¼æ„é€ </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>(string&amp;&amp; s)</span><br><span class="line">:_str(<span class="literal">nullptr</span>)</span><br><span class="line">, _size(<span class="number">0</span>)</span><br><span class="line">, _capacity(<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;string(string&amp;&amp; s) -- èµ„æºè½¬ç§»&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">swap</span>(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/CPP/">CPP</category>
      
      
      <category domain="http://example.com/tags/C-11/">C++11</category>
      
      
      <comments>http://example.com/2022/12/30/CPP/C++11(%E5%8F%B3%E5%80%BC)/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>C++11åŸºç¡€</title>
      <link>http://example.com/2022/12/29/CPP/C++11%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89/</link>
      <guid>http://example.com/2022/12/29/CPP/C++11%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89/</guid>
      <pubDate>Thu, 29 Dec 2022 15:50:18 GMT</pubDate>
      
        
        
      <description>&lt;h1 id=&quot;åˆ—è¡¨åˆå§‹åŒ–&quot;&gt;&lt;a href=&quot;#åˆ—è¡¨åˆå§‹åŒ–&quot; class=&quot;headerlink&quot; title=&quot;åˆ—è¡¨åˆå§‹åŒ–&quot;&gt;&lt;/a&gt;åˆ—è¡¨åˆå§‹åŒ–&lt;/h1&gt;&lt;h2 id=&quot;åˆå§‹åŒ–&quot;&gt;&lt;a href=&quot;#åˆå§‹åŒ–&quot; class=&quot;headerlink&quot; title=&quot;{} åˆå§‹åŒ–&quot;</description>
        
      
      
      
      <content:encoded><![CDATA[<h1 id="åˆ—è¡¨åˆå§‹åŒ–"><a href="#åˆ—è¡¨åˆå§‹åŒ–" class="headerlink" title="åˆ—è¡¨åˆå§‹åŒ–"></a>åˆ—è¡¨åˆå§‹åŒ–</h1><h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="{} åˆå§‹åŒ–"></a>{} åˆå§‹åŒ–</h2><blockquote><p>åœ¨C++98ä¸­ï¼Œæ ‡å‡†å…è®¸ä½¿ç”¨èŠ±æ‹¬å·{}å¯¹æ•°ç»„æˆ–è€…ç»“æ„ä½“å…ƒç´ è¿›è¡Œç»Ÿä¸€çš„åˆ—è¡¨åˆå§‹å€¼è®¾å®šã€‚</p></blockquote><p>æ¯”å¦‚ä¸‹æ–¹ç¤ºä¾‹ï¼š</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212272140842.png"></p><blockquote><p>C++11æ‰©å¤§äº†ç”¨å¤§æ‹¬å·æ‹¬èµ·çš„åˆ—è¡¨(åˆå§‹åŒ–åˆ—è¡¨)çš„ä½¿ç”¨èŒƒå›´ï¼Œä½¿å…¶å¯ç”¨äºæ‰€æœ‰çš„å†…ç½®ç±»å‹å’Œç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹ï¼Œä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨æ—¶ï¼Œå¯æ·»åŠ ç­‰å·(&#x3D;)ï¼Œä¹Ÿå¯ä¸æ·»åŠ </p></blockquote><h3 id="å†…ç½®ç±»å‹"><a href="#å†…ç½®ç±»å‹" class="headerlink" title="å†…ç½®ç±»å‹"></a>å†…ç½®ç±»å‹</h3><p>ä»¥ä¸‹ä¸‰ç§å†™æ³•ä¸€æ ·</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212272145021.png"></p><h3 id="è‡ªå®šä¹‰ç±»å‹"><a href="#è‡ªå®šä¹‰ç±»å‹" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹"></a>è‡ªå®šä¹‰ç±»å‹</h3><p>å¯¹äºè‡ªå®šä¹‰ç±»å‹åŒæ ·é€‚ç”¨</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Date</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Date</span>(<span class="type">int</span> year, <span class="type">int</span> month, <span class="type">int</span> day)</span><br><span class="line">:_year(year)</span><br><span class="line">, _month(month)</span><br><span class="line">, _day(day)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Date(int year, int month, int day)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> _year;</span><br><span class="line"><span class="type">int</span> _month;</span><br><span class="line"><span class="type">int</span> _day;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// éƒ½æ˜¯åœ¨è°ƒç”¨æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function">Date <span class="title">d1</span><span class="params">(<span class="number">2022</span>, <span class="number">11</span>, <span class="number">22</span>)</span></span>;</span><br><span class="line"><span class="comment">// C++11 è¦èƒ½çœ‹æ‡‚ï¼Œä½†æ˜¯ä¸å»ºè®®ä½¿ç”¨</span></span><br><span class="line">Date d2 = &#123;<span class="number">2022</span>, <span class="number">11</span>, <span class="number">11</span>&#125;; <span class="comment">// -&gt;è°ƒç”¨æ„é€ å‡½æ•°</span></span><br><span class="line">Date d3&#123; <span class="number">2022</span>, <span class="number">11</span>, <span class="number">11</span> &#125;;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="STLå®¹å™¨"><a href="#STLå®¹å™¨" class="headerlink" title="STLå®¹å™¨"></a>STLå®¹å™¨</h3><p>stlå®¹å™¨åŒæ ·æ”¯æŒå¦‚ä¸Šæ“ä½œï¼Œå¹¶ä¸”æ›´åŠ æ–¹ä¾¿</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// è°ƒç”¨æ”¯æŒlist (initializer_list&lt;value_type&gt; ilï¼‰ç±»ä¼¼è¿™æ ·çš„æ„é€ å‡½æ•°</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1 = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> &#125;;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2 &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> &#125;;</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt; lt1 = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> &#125;;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; lt2&#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> &#125;;</span><br><span class="line"></span><br><span class="line">vector&lt;Date&gt; v3 = &#123;d1, d2, d3&#125;;</span><br><span class="line">vector&lt;Date&gt; v4 = &#123; &#123; <span class="number">2022</span>, <span class="number">1</span>, <span class="number">1</span> &#125;, &#123;<span class="number">2022</span>, <span class="number">11</span>, <span class="number">11</span>&#125; &#125;;</span><br><span class="line"></span><br><span class="line">string s1 = <span class="string">&quot;11111&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ </span></span><br><span class="line">map&lt;string, string&gt; dict = &#123; &#123; <span class="string">&quot;sort&quot;</span>, <span class="string">&quot;æ’åº&quot;</span> &#125;, &#123; <span class="string">&quot;insert&quot;</span>, <span class="string">&quot;æ’å…¥&quot;</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èµ‹å€¼é‡è½½ --- kvilè¦å…ˆæ˜ç¡®ï¼Œæ³¨æ„é‚£ä¸ªconst</span></span><br><span class="line">initializer_list&lt;pair&lt;<span class="type">const</span> string, string&gt;&gt; kvil = &#123; &#123; <span class="string">&quot;left&quot;</span>, <span class="string">&quot;å·¦è¾¹&quot;</span> &#125;, &#123; <span class="string">&quot;left&quot;</span>, <span class="string">&quot;å·¦è¾¹&quot;</span> &#125; &#125;;</span><br><span class="line">dict = kvil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="std-initializer-list"><a href="#std-initializer-list" class="headerlink" title="std::initializer_list"></a>std::initializer_list</h2><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212272134335.png"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">auto</span> li = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span> &#125;;</span><br><span class="line">cout &lt;&lt; <span class="built_in">typeid</span>(li).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212272138565.png"></p><p>å®¹å™¨åº•å±‚å®ç°ï¼Œå¦‚vectorå¢åŠ initializer_listå‚æ•°çš„æ„é€ ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">vector</span>(initializer_list&lt;T&gt; li)</span><br><span class="line">: _start(<span class="literal">nullptr</span>), _finish(<span class="literal">nullptr</span>), _end_of_storage(<span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">reserve</span>(li.<span class="built_in">size</span>())</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp; e : li)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">push_back</span>(e);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>C++11ä»¥åï¼Œä¸€åˆ‡å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–ï¼Œä½†æ˜¯å»ºè®®æ™®é€šå¯¹è±¡è¿˜æ˜¯ç”¨ä»¥å‰çš„æ–¹å¼åˆå§‹åŒ–ï¼Œå®¹å™¨å¦‚æœæœ‰éœ€æ±‚å¯ä»¥ç”¨åˆ—è¡¨åˆå§‹åŒ–</p><h1 id="å˜é‡ç±»å‹æ¨å¯¼"><a href="#å˜é‡ç±»å‹æ¨å¯¼" class="headerlink" title="å˜é‡ç±»å‹æ¨å¯¼"></a>å˜é‡ç±»å‹æ¨å¯¼</h1><h2 id="decltype"><a href="#decltype" class="headerlink" title="decltype"></a>decltype</h2><blockquote><p>å…³é”®å­—decltypeå°†å˜é‡çš„ç±»å‹å£°æ˜ä¸ºè¡¨è¾¾å¼æŒ‡å®šçš„ç±»å‹</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212272258871.png"></p><h1 id="æ–°å¢åŠ å®¹å™¨"><a href="#æ–°å¢åŠ å®¹å™¨" class="headerlink" title="æ–°å¢åŠ å®¹å™¨"></a>æ–°å¢åŠ å®¹å™¨</h1><h2 id="array"><a href="#array" class="headerlink" title="array"></a>array</h2><ul><li>cè¯­è¨€æ•°ç»„è¶Šç•Œè¯»åŸºæœ¬æ£€æŸ¥ä¸å‡ºæ¥ï¼Œè¶Šç•Œå†™æ˜¯æŠ½æŸ¥</li><li>arrayå¯ä»¥æ£€æŸ¥å‡ºæ¥è¶Šç•Œ</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">const</span> <span class="type">size_t</span> N = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> a1[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Cè¯­è¨€æ•°ç»„è¶Šç•Œæ£€æŸ¥ï¼Œè¶Šç•Œè¯»åŸºæœ¬æ£€æŸ¥ä¸å‡ºæ¥ï¼Œè¶Šç•Œå†™æ˜¯æŠ½æŸ¥</span></span><br><span class="line">a1[N];</span><br><span class="line"><span class="comment">//a1[N] = 1;</span></span><br><span class="line">a1[N + <span class="number">5</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¶Šç•Œè¯»å†™éƒ½å¯ä»¥è¢«æ£€æŸ¥å‡ºæ¥</span></span><br><span class="line"><span class="comment">// å®é™…æƒ…å†µï¼šarrayç”¨å¾—å¾ˆå°‘ï¼Œä¸€æ–¹é¢å¤§å®¶ç”¨cæ•°ç»„ç”¨æƒ¯äº†</span></span><br><span class="line"><span class="comment">// ç”¨arrayä¸å¦‚ç”¨vector + resizeå»æ›¿ä»£cæ•°ç»„</span></span><br><span class="line"></span><br><span class="line">array&lt;<span class="type">int</span>, N&gt; a2;</span><br><span class="line">a2[N];</span><br><span class="line">a2[N] = <span class="number">1</span>;</span><br><span class="line">a2[N + <span class="number">5</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="forward-list"><a href="#forward-list" class="headerlink" title="forward_list"></a>forward_list</h2><p>å•é“¾è¡¨</p>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/CPP/">CPP</category>
      
      
      <category domain="http://example.com/tags/C-11/">C++11</category>
      
      
      <comments>http://example.com/2022/12/29/CPP/C++11%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>å¢ç¨‹å¼ç”µåŠ¨æ±½è½¦CD/CSæ§åˆ¶ç­–ç•¥</title>
      <link>http://example.com/2022/12/29/%E6%96%B0%E8%83%BD%E6%BA%90/CD_CS/</link>
      <guid>http://example.com/2022/12/29/%E6%96%B0%E8%83%BD%E6%BA%90/CD_CS/</guid>
      <pubDate>Thu, 29 Dec 2022 15:23:10 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;a name=&quot;vrhgN&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;ä¸€ã€ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ä¸€ã€ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ç®€ä»‹&quot;&gt;&lt;/a&gt;ä¸€ã€ç®€ä»‹&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;CD&amp;#x2F;CSç­–ç•¥æ˜¯æœ€ç®€å•çš„EMSæ§</description>
        
      
      
      
      <content:encoded><![CDATA[<p><a name="vrhgN"></a></p><h2 id="ä¸€ã€ç®€ä»‹"><a href="#ä¸€ã€ç®€ä»‹" class="headerlink" title="ä¸€ã€ç®€ä»‹"></a>ä¸€ã€ç®€ä»‹</h2><blockquote><p>CD&#x2F;CSç­–ç•¥æ˜¯æœ€ç®€å•çš„EMSæ§åˆ¶ç­–ç•¥ï¼Œè¿™æ˜¯åŸºäºè§„åˆ™çš„ï¼Œæœ€ç®€å•çš„æ§åˆ¶ç­–ç•¥ï¼Œå®¹æ˜“åœ¨å®è½¦ä¸Šå®ç°ï¼Œé€šå¸¸åœ¨ç§‘ç ”ä¸­ç”¨äºä¸å…¶ä»–ç­–ç•¥è¿›è¡Œæ¯”è¾ƒæ¥ä½“ç°å…¶æ§åˆ¶ç­–ç•¥çš„ä¼˜åŠ¿ã€‚</p></blockquote><p><a name="ZfCCK"></a></p><h2 id="äºŒã€ä¼˜ç¼ºç‚¹"><a href="#äºŒã€ä¼˜ç¼ºç‚¹" class="headerlink" title="äºŒã€ä¼˜ç¼ºç‚¹"></a>äºŒã€ä¼˜ç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li><strong>å®ç°ç®€å•</strong></li><li><strong>å®æ—¶</strong></li><li><strong>å‘åŠ¨æœºå¯å·¥ä½œåœ¨é«˜æ•ˆåŒº</strong></li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li><strong>é€‚åº”åŠ›å·®</strong></li><li><strong>ç”µæ± é¢‘ç¹å†²æ”¾ç”µ</strong><br><a name="YXWMg"></a></li></ul><h2 id="ä¸‰ã€æµç¨‹å›¾"><a href="#ä¸‰ã€æµç¨‹å›¾" class="headerlink" title="ä¸‰ã€æµç¨‹å›¾"></a>ä¸‰ã€æµç¨‹å›¾</h2><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212291635560.jpg"></p><p><a name="dQBv3"></a></p><h2 id="å››ã€åŸç†"><a href="#å››ã€åŸç†" class="headerlink" title="å››ã€åŸç†"></a>å››ã€åŸç†</h2><p><a name="rhqIk"></a></p><h3 id="1ã€CDæ¨¡å¼"><a href="#1ã€CDæ¨¡å¼" class="headerlink" title="1ã€CDæ¨¡å¼"></a>1ã€CDæ¨¡å¼</h3><p>éœ€æ±‚åŠŸç‡åªç”±ç”µæ± æä¾›ï¼Œå…ˆæ¨å¯¼çŠ¶æ€å˜é‡SOCï¼Œ</p><p>$S\dot OC&#x3D;\frac{dSOC}{dt}&#x3D;\frac{-I_{ess}}{C_{ess}}&#x3D;\frac{\sqrt{U^2_{OCV}-4P_{ess}R_{ess}}-U_{OCV}}{2R_{ess}C_{ess}}$  </p><p>$SOC_{min} \leq SOC\leq_{max}$</p><blockquote><p>æ¨å¯¼SOCçš„å¯¼æ•°ï¼ˆå®‰æ—¶è®¡é‡æ³•ï¼‰</p><p>$SOC_{k+1}&#x3D;SOC_k-\int_{t_k}^{t_{k+1}}{\frac{\eta I{\rm d}t}{C_e}}$</p><p>åè¾¹  $U_{OCV}I_{ess}-I_{ess}^2R_{ess}&#x3D;P_{ess}$<br>æ±‚æ ¹å…¬å¼</p></blockquote><p>P_essä¸ºåŠ¨åŠ›ç”µæ± åŠŸç‡ï¼ŒI_essä¸ºåŠ¨åŠ›ç”µæ± ç”µæµï¼ŒC_essä¸ºåŠ¨åŠ›ç”µæ± é¢å¤–å®¹é‡ï¼ŒR_essä¸ºåŠ¨åŠ›ç”µæ± å†…é˜»ï¼ŒU_ocvä¸ºåŠ¨åŠ›ç”µæ± å¼€è·¯ç”µå‹<br><a name="yZYju"></a></p><h3 id="2ã€CSæ¨¡å¼"><a href="#2ã€CSæ¨¡å¼" class="headerlink" title="2ã€CSæ¨¡å¼"></a>2ã€CSæ¨¡å¼</h3><p>CSæ¨¡å¼æ˜¯ç”µé‡ä¿æŒï¼Œæ¨¡å¼ï¼Œå¢ç¨‹å™¨æ§åˆ¶é‡‡ç”¨å®šç‚¹æ§åˆ¶ç­–ç•¥ï¼Œå‘åŠ¨æœºåœ¨å›ºå®šå·¥ä½œç‚¹å·¥ä½œã€‚</p><ul><li>éœ€æ±‚åŠŸç‡ç”±å¢ç¨‹å™¨æä¾›ï¼Œå¤šä½™åŠŸç‡ç»™ç”µæ± å……ç”µ<br><a name="x2Wvn"></a></li></ul><h3 id="3ã€åˆ¶åŠ¨èƒ½é‡å›æ”¶"><a href="#3ã€åˆ¶åŠ¨èƒ½é‡å›æ”¶" class="headerlink" title="3ã€åˆ¶åŠ¨èƒ½é‡å›æ”¶"></a>3ã€åˆ¶åŠ¨èƒ½é‡å›æ”¶</h3><ul><li>20%å›æ”¶<br><a name="C3CLe"></a></li></ul><h2 id="äº”ã€ä»£ç å®ç°"><a href="#äº”ã€ä»£ç å®ç°" class="headerlink" title="äº”ã€ä»£ç å®ç°"></a>äº”ã€ä»£ç å®ç°</h2><p><a name="E67Lu"></a></p><h3 id="1ã€æµç¨‹é€»è¾‘"><a href="#1ã€æµç¨‹é€»è¾‘" class="headerlink" title="1ã€æµç¨‹é€»è¾‘"></a>1ã€æµç¨‹é€»è¾‘</h3><ul><li>å¯¼å…¥å·¥å†µæ•°æ®</li><li>è½¦è¾†å‚æ•°åˆå§‹åŒ–</li><li>è®¡ç®—å·¥å†µåŠŸç‡éœ€æ±‚</li><li>å·¥å†µå¾ªç¯<br><a name="lqg0c"></a></li></ul><h3 id="2ã€æç¤º"><a href="#2ã€æç¤º" class="headerlink" title="2ã€æç¤º"></a>2ã€æç¤º</h3><ul><li>æœªè€ƒè™‘æ•ˆç‡é—®é¢˜</li><li>åˆ¶åŠ¨èƒ½é‡å›æ”¶20%</li><li>CDæ¨¡å¼ç²¾åº¦å¯ä»¥ï¼Œå¯ä¸powertrainçš„EVä¸€ä¸ªNEDCæ¯”è¾ƒã€‚<br><a name="tsf3A"></a></li></ul><h3 id="3ã€å®ç°ç¯å¢ƒ"><a href="#3ã€å®ç°ç¯å¢ƒ" class="headerlink" title="3ã€å®ç°ç¯å¢ƒ"></a>3ã€å®ç°ç¯å¢ƒ</h3><p>1ï¸âƒ£** matlab **</p><ul><li>æ— è„‘å»ºè®®2021b+ï¼Œå› ä¸ºæœ‰ä»£ç æç¤ºå’Œè¡¥å…¨ğŸ˜</li></ul><p>2ï¸âƒ£** python**</p><ul><li><strong>3.7</strong></li><li><strong>numpy</strong></li><li><strong>math</strong></li><li><strong>scipy</strong></li><li><strong>matplotlib</strong></li></ul><br /><a name="JLaWD"></a>## äº”ã€ä»¿çœŸç»“æœ<a name="Ze8Ya"></a>### 1ã€matlab<p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212291636129.png"></p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212291636841.png"></p><h3 id="2ã€python"><a href="#2ã€python" class="headerlink" title="2ã€python"></a>2ã€python</h3><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212291636438.png"></p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212291636851.png"></p><p><a name="pYpqN"></a></p><h2 id="å…­ã€githubé“¾æ¥"><a href="#å…­ã€githubé“¾æ¥" class="headerlink" title="å…­ã€githubé“¾æ¥"></a>å…­ã€githubé“¾æ¥</h2><p><a href="https://github.com/suntong-1221/EMS_OS.git">https://github.com/suntong-1221/EMS_OS.git</a></p>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E6%96%B0%E8%83%BD%E6%BA%90%E6%B1%BD%E8%BD%A6/">æ–°èƒ½æºæ±½è½¦</category>
      
      
      <category domain="http://example.com/tags/EMS/">EMS</category>
      
      
      <comments>http://example.com/2022/12/29/%E6%96%B0%E8%83%BD%E6%BA%90/CD_CS/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>å“ˆå¸Œåº”ç”¨</title>
      <link>http://example.com/2022/12/27/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%93%88%E5%B8%8C%E5%BA%94%E7%94%A8/</link>
      <guid>http://example.com/2022/12/27/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%93%88%E5%B8%8C%E5%BA%94%E7%94%A8/</guid>
      <pubDate>Tue, 27 Dec 2022 08:07:13 GMT</pubDate>
      
        
        
      <description>&lt;h1 id=&quot;ä½å›¾&quot;&gt;&lt;a href=&quot;#ä½å›¾&quot; class=&quot;headerlink&quot; title=&quot;ä½å›¾&quot;&gt;&lt;/a&gt;ä½å›¾&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;ç»™40äº¿ä¸ªä¸é‡å¤çš„æ— ç¬¦å·æ•´æ•°ï¼Œæ²¡æ’è¿‡åºã€‚ç»™ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼Œå¦‚ä½•å¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦åœ¨è¿™40äº¿ä¸ªæ•°ä¸­ï¼Ÿ&lt;/p&gt;
&lt;/b</description>
        
      
      
      
      <content:encoded><![CDATA[<h1 id="ä½å›¾"><a href="#ä½å›¾" class="headerlink" title="ä½å›¾"></a>ä½å›¾</h1><blockquote><p>ç»™40äº¿ä¸ªä¸é‡å¤çš„æ— ç¬¦å·æ•´æ•°ï¼Œæ²¡æ’è¿‡åºã€‚ç»™ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼Œå¦‚ä½•å¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦åœ¨è¿™40äº¿ä¸ªæ•°ä¸­ï¼Ÿ</p></blockquote><ol><li>éå†ï¼Œæ—¶é—´å¤æ‚åº¦O(N)  </li><li>æ’åº(O(NlogN))ï¼Œåˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾: logN  </li><li>ä½å›¾è§£å†³</li></ol><h2 id="ä½å›¾æ¦‚å¿µ"><a href="#ä½å›¾æ¦‚å¿µ" class="headerlink" title="ä½å›¾æ¦‚å¿µ"></a>ä½å›¾æ¦‚å¿µ</h2><p>æ‰€è°“ä½å›¾ï¼Œå°±æ˜¯ç”¨æ¯ä¸€ä¸ªæ¯”ç‰¹ä½æ¥å­˜æ”¾æŸç§çŠ¶æ€ï¼Œé€‚ç”¨äºæµ·é‡æ•°æ®ï¼Œæ•°æ®æ— é‡å¤çš„åœºæ™¯ã€‚é€šå¸¸æ˜¯ç”¨æ¥åˆ¤æ–­æŸä¸ªæ•°æ®å­˜ä¸å­˜åœ¨çš„</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212262144541.png"></p><h2 id="ä½å›¾å®ç°"><a href="#ä½å›¾å®ç°" class="headerlink" title="ä½å›¾å®ç°"></a>ä½å›¾å®ç°</h2><p>è¿™é‡Œåº•å±‚ç”¨äº†vectorï¼Œå­˜charç±»å‹ï¼Œä¸€ä¸ªcharå 8ä¸ªæ¯”ç‰¹ä½ã€‚ç„¶åæä¾›setæ¥å£ï¼Œè¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li>å…ˆæ‰¾è¦æ˜ å°„çš„æ•°æ®åœ¨ç¬¬å‡ ä¸ªcharï¼š<strong>x&#x2F;8</strong></li><li>å†çœ‹æ˜¯åœ¨charçš„ç¬¬å‡ ä¸ªä½ï¼š<strong>x%8</strong></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="type">size_t</span> N&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">bitset</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">bitset</span>()</span><br><span class="line">&#123;</span><br><span class="line">_bits.<span class="built_in">resize</span>(N / <span class="number">8</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">set</span><span class="params">(<span class="type">size_t</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">size_t</span> i = x / <span class="number">8</span>; <span class="comment">//æ‰¾ç¬¬å‡ ä¸ªchar</span></span><br><span class="line"><span class="type">size_t</span> j = x % <span class="number">8</span>; <span class="comment">//ç¬¬å‡ ä¸ªcharçš„ç¬¬å‡ ä¸ªä½</span></span><br><span class="line">_bits[i] |= (<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reset</span><span class="params">(<span class="type">size_t</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">size_t</span> i = x / <span class="number">8</span>;</span><br><span class="line"><span class="type">size_t</span> j = x % <span class="number">8</span>;</span><br><span class="line">_bits[i] &amp;= ~(<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">test</span><span class="params">(<span class="type">size_t</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">size_t</span> i = x / <span class="number">8</span>;</span><br><span class="line"><span class="type">size_t</span> j = x % <span class="number">8</span>;</span><br><span class="line"><span class="keyword">return</span> _bits[i] &amp; (<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">vector&lt;<span class="type">char</span>&gt; _bits;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ä½å›¾åº”ç”¨"><a href="#ä½å›¾åº”ç”¨" class="headerlink" title="ä½å›¾åº”ç”¨"></a>ä½å›¾åº”ç”¨</h2><ol><li>å¿«é€ŸæŸ¥æ‰¾æŸä¸ªæ•°æ®æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­  </li><li>æ’åº + å»é‡  </li><li>æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤é›†ã€å¹¶é›†ç­‰  </li><li>æ“ä½œç³»ç»Ÿä¸­ç£ç›˜å—æ ‡è®°</li></ol><h3 id="å‡ ä¸ªä¾‹å­ï¼š"><a href="#å‡ ä¸ªä¾‹å­ï¼š" class="headerlink" title="å‡ ä¸ªä¾‹å­ï¼š"></a>å‡ ä¸ªä¾‹å­ï¼š</h3><blockquote><p>ç»™å®š100äº¿ä¸ªæ•´æ•°ï¼Œè®¾è®¡ç®—æ³•æ‰¾åˆ°åªå‡ºç°ä¸€æ¬¡çš„æ•´æ•°ï¼Ÿ</p></blockquote><p>å¯ä»¥ç”¨ä¸¤ä¸ªä½å›¾ï¼Œå»ºç«‹kvæ¨¡å‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><p>kvçš„ç»Ÿè®¡æ¬¡æ•°æœç´¢æ¨¡å‹</p><ul><li>0æ¬¡ï¼š00</li><li>1æ¬¡ï¼š01</li><li>2æ¬¡åŠä»¥ä¸Šï¼š10</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="type">size_t</span> N&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">twobitset</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">set</span><span class="params">(<span class="type">size_t</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">bool</span> inset1 = _bs1.<span class="built_in">test</span>(x);</span><br><span class="line"><span class="type">bool</span> inset2 = _bs2.<span class="built_in">test</span>(x);</span><br><span class="line"></span><br><span class="line"><span class="comment">//00</span></span><br><span class="line"><span class="keyword">if</span> (inset1 == <span class="literal">false</span> &amp;&amp; inset2 == <span class="literal">false</span>)</span><br><span class="line">&#123;</span><br><span class="line">_bs2.<span class="built_in">set</span>(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (inset1 == <span class="literal">false</span> &amp;&amp; inset2 == <span class="literal">true</span>) <span class="comment">//01</span></span><br><span class="line">&#123;</span><br><span class="line">_bs1.<span class="built_in">set</span>(x);</span><br><span class="line">_bs2.<span class="built_in">reset</span>(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (inset1 == <span class="literal">true</span> &amp;&amp; inset2 == <span class="literal">false</span>) <span class="comment">//10</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//11</span></span><br><span class="line">_bs1.<span class="built_in">set</span>(x);</span><br><span class="line">_bs2.<span class="built_in">set</span>(x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_once_num</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; N; ++i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//01</span></span><br><span class="line"><span class="keyword">if</span> (_bs1.<span class="built_in">test</span>(i) == <span class="literal">false</span> &amp;&amp; _bs2.<span class="built_in">test</span>(i) == <span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">bitset&lt;N&gt;_bs1;</span><br><span class="line">bitset&lt;N&gt;_bs2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>ç»™ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æœ‰100äº¿ä¸ªæ•´æ•°ï¼Œæˆ‘ä»¬åªæœ‰1Gå†…å­˜ï¼Œå¦‚ä½•æ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„äº¤é›†ï¼Ÿ<br>ä¸¤ä¸ªä½å›¾</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1G=1024Mb</span><br><span class="line">1024MB=1024*1024KB</span><br><span class="line">1024*1024KB=1024*1024*1024Byte</span><br><span class="line">2^30ï¼Œ çº¦ç­‰äº10äº¿Byte</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆ100äº¿æ•´æ•°ï¼Œå°±æ˜¯400äº¿å­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯40Gçš„ç©ºé—´ï¼Œä½†æ˜¯æ•´æ•°çš„èŒƒå›´å°±42äº¿å¤šï¼Œé‚£ä¹ˆå‡è®¾43äº¿ä¸ªæ•´æ•°ï¼Œä¹Ÿå°±éœ€è¦43äº¿ä¸ªæ¯”ç‰¹ä½ï¼Œä¹Ÿå°±æ˜¯43äº¿&#x2F;8ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯5äº¿å¤šå­—èŠ‚ï¼Œå¤§æ¦‚åœ¨0.5Gå¤šï¼Œå¯ä»¥å…ˆä¾æ¬¡è¯»å–ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­çš„æ‰€æœ‰æ•´æ•°ï¼Œå°†å…¶æ˜ å°„åˆ°ä¸€ä¸ªä½å›¾ã€‚å†è¯»å–å¦ä¸€ä¸ªæ–‡ä»¶ä¸­çš„æ‰€æœ‰æ•´æ•°ï¼Œåˆ¤æ–­åœ¨ä¸åœ¨ä½å›¾ä¸­ï¼Œåœ¨å°±æ˜¯äº¤é›†ï¼Œä¸åœ¨å°±ä¸æ˜¯äº¤é›†ã€‚</p><blockquote><p>ä½å›¾åº”ç”¨å˜å½¢ï¼šä¸€ä¸ªæ–‡ä»¶æœ‰100äº¿ä¸ªintï¼Œ1Gå†…å­˜ï¼Œè®¾è®¡ç®—æ³•æ‰¾åˆ°æ¬¡æ•°ä¸è¶…è¿‡ä¸¤æ¬¡çš„æ‰€ä»¥æ•´æ•°</p></blockquote><ul><li>0æ¬¡ï¼š00</li><li>1æ¬¡ï¼š01</li><li>2æ¬¡ï¼š10</li><li>3æ¬¡åŠä»¥ä¸Šï¼š11</li></ul><h2 id="ä½å›¾ç‰¹ç‚¹ï¼š"><a href="#ä½å›¾ç‰¹ç‚¹ï¼š" class="headerlink" title="ä½å›¾ç‰¹ç‚¹ï¼š"></a>ä½å›¾ç‰¹ç‚¹ï¼š</h2><ul><li>å¿«ã€èŠ‚çœç©ºé—´ï¼Œç›´æ¥å®šå€æ³•ï¼Œä¸å­˜åœ¨å†²çª</li><li>ç›¸å¯¹å±€é™ï¼Œåªèƒ½æ˜ å°„æ•´å½¢</li></ul><h1 id="å¸ƒéš†è¿‡æ»¤å™¨"><a href="#å¸ƒéš†è¿‡æ»¤å™¨" class="headerlink" title="å¸ƒéš†è¿‡æ»¤å™¨"></a>å¸ƒéš†è¿‡æ»¤å™¨</h1><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><blockquote><p>å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ç”±å¸ƒéš†ï¼ˆBurton Howard Bloomï¼‰åœ¨1970å¹´æå‡ºçš„ ä¸€ç§ç´§å‡‘å‹çš„ã€æ¯”è¾ƒå·§å¦™çš„æ¦‚ç‡å‹æ•°æ®ç»“æ„ï¼Œç‰¹ç‚¹æ˜¯é«˜æ•ˆåœ°æ’å…¥å’ŒæŸ¥è¯¢ï¼Œå¯ä»¥ç”¨æ¥å‘Šè¯‰ä½  â€œæŸæ ·ä¸œè¥¿ä¸€å®šä¸å­˜åœ¨æˆ–è€…å¯èƒ½å­˜ åœ¨â€ï¼Œå®ƒæ˜¯ç”¨å¤šä¸ªå“ˆå¸Œå‡½æ•°ï¼Œå°†ä¸€ä¸ªæ•°æ®æ˜ å°„åˆ°ä½å›¾ç»“æ„ä¸­ã€‚æ­¤ç§æ–¹å¼ä¸ä»…å¯ä»¥æå‡æŸ¥è¯¢æ•ˆç‡ï¼Œä¹Ÿå¯ä»¥èŠ‚çœå¤§é‡çš„å†…å­˜ç©ºé—´</p></blockquote><h2 id="ç”¨å¤„"><a href="#ç”¨å¤„" class="headerlink" title="ç”¨å¤„"></a>ç”¨å¤„</h2><p>1ã€å¯ä»¥åšé»‘åå•æŸ¥è¯¢ï¼Œä¸åœ¨é»‘åå•çš„äººä¸€å®šå å¤§å¤šæ•°ï¼Œå¦‚æœä¸åœ¨ç›´æ¥è¿”å›ï¼Œå¦‚æœåœ¨ï¼Œè¿™ä¸ªç»“æœå¯èƒ½å°±ä¸å‡†ï¼Œç»§ç»­åœ¨ä»æ•°æ®åº“ä¸­æŸ¥è¯¢ã€‚</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212271506798.png"></p><p>2ã€æ³¨å†Œæ˜µç§°çš„åœºæ™¯ï¼Œå¦‚æœè¦æ³¨å†Œçš„æ˜µç§°ä¸å­˜åœ¨ï¼Œç›´æ¥æ³¨å†Œï¼Œå¦‚æœå­˜åœ¨ï¼Œç›´æ¥æç¤ºï¼ˆå¯èƒ½æœ‰è¯¯åˆ¤ï¼‰</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212271508884.png"></p><h2 id="å¸ƒéš†è¿‡æ»¤å™¨å®ç°"><a href="#å¸ƒéš†è¿‡æ»¤å™¨å®ç°" class="headerlink" title="å¸ƒéš†è¿‡æ»¤å™¨å®ç°"></a>å¸ƒéš†è¿‡æ»¤å™¨å®ç°</h2><p>å­—ç¬¦ä¸²å“ˆå¸Œç®—æ³•è½¬æˆæ•´å½¢å»æ˜ å°„ä¸€ä¸ªæˆ–è€…å¤šä¸ªä½ç½®è¿›è¡Œæ ‡è®°</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212262302892.png"></p><p>ä¸‹è¾¹ä¸ºå¸ƒéš†è¿‡æ»¤å™¨ä»£ç ï¼Œé¦–å…ˆç¡®å®šmçš„ä¸ªæ•°ï¼Œä¸‹è¾¹m&#x3D;5å€çš„n</p><blockquote><p>kä¸ºå“ˆå¸Œå‡½æ•°çš„ä¸ªæ•°ï¼Œmä¸ºå¸ƒéš†è¿‡æ»¤å™¨é•¿åº¦ï¼Œnä¸ºæ’å…¥å…ƒç´ çš„ä¸ªæ•°ï¼Œpä¸ºè¯¯æŠ¥ç‡</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212271500685.png"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">HashBKDR</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// BKDR</span></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> string&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">size_t</span> val = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> ch : key)</span><br><span class="line">&#123;</span><br><span class="line">val *= <span class="number">131</span>;</span><br><span class="line">val += ch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">HashAP</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// BKDR</span></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> string&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">size_t</span> hash = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; key.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> ((i &amp; <span class="number">1</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">hash ^= ((hash &lt;&lt; <span class="number">7</span>) ^ key[i] ^ (hash &gt;&gt; <span class="number">3</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">hash ^= (~((hash &lt;&lt; <span class="number">11</span>) ^ key[i] ^ (hash &gt;&gt; <span class="number">5</span>)));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> hash;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">HashDJB</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// BKDR</span></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> string&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">size_t</span> hash = <span class="number">5381</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> ch : key)</span><br><span class="line">&#123;</span><br><span class="line">hash += (hash &lt;&lt; <span class="number">5</span>) + ch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> hash;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Nè¡¨ç¤ºå‡†å¤‡è¦æ˜ å°„Nä¸ªå€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="type">size_t</span> N, <span class="keyword">class</span> <span class="title class_">K</span> = string, <span class="keyword">class</span> Hash1 = HashBKDR, <span class="keyword">class</span> Hash2=HashAP, <span class="keyword">class</span> Hash3=HashDJB&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> BloomFilter</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">void</span> <span class="built_in">Set</span>(<span class="type">const</span> K&amp; key)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">size_t</span> hash1 = <span class="built_in">Hash1</span>()(key) % (_ratio * N);</span><br><span class="line">_bits-&gt;<span class="built_in">set</span>(hash1);</span><br><span class="line"></span><br><span class="line"><span class="type">size_t</span> hash2 = <span class="built_in">Hash2</span>()(key) % (_ratio * N);</span><br><span class="line">_bits-&gt;<span class="built_in">set</span>(hash2);</span><br><span class="line"></span><br><span class="line"><span class="type">size_t</span> hash3 = <span class="built_in">Hash3</span>()(key) % (_ratio * N);</span><br><span class="line">_bits-&gt;<span class="built_in">set</span>(hash3);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Test</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">size_t</span> hash1 = <span class="built_in">Hash1</span>()(key) % (_ratio * N);</span><br><span class="line"><span class="keyword">if</span> (_bits-&gt;<span class="built_in">test</span>(hash1) == <span class="literal">false</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">size_t</span> hash2 = <span class="built_in">Hash2</span>()(key) % (_ratio * N);</span><br><span class="line"><span class="keyword">if</span> (_bits-&gt;<span class="built_in">test</span>(hash2) == <span class="literal">false</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">size_t</span> hash3 = <span class="built_in">Hash3</span>()(key) % (_ratio * N);</span><br><span class="line"><span class="keyword">if</span> (_bits-&gt;<span class="built_in">test</span>(hash3) == <span class="literal">false</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">const</span> <span class="type">static</span> <span class="type">size_t</span> _ratio = <span class="number">5</span>;</span><br><span class="line">std::bitset&lt;_ratio* N&gt;* _bits = <span class="keyword">new</span> std::bitset&lt;_ratio* N&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å‡ ä¸ªä¾‹å­"><a href="#å‡ ä¸ªä¾‹å­" class="headerlink" title="å‡ ä¸ªä¾‹å­"></a>å‡ ä¸ªä¾‹å­</h2><blockquote><p>1ã€ç»™ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æœ‰100äº¿ä¸ªqueryï¼Œæˆ‘ä»¬åªæœ‰1Gå†…å­˜ï¼Œå¦‚ä½•æ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„äº¤é›†ï¼Ÿï¼ˆè¿‘ä¼¼ç®—æ³•ï¼‰</p></blockquote><ul><li>å…ˆè¯»å–å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶å½“ä¸­çš„queryï¼Œå°†å…¶å…¨éƒ¨æ˜ å°„åˆ°ä¸€ä¸ªå¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­ã€‚</li><li>ç„¶åè¯»å–å¦ä¸€ä¸ªæ–‡ä»¶å½“ä¸­çš„queryï¼Œä¾æ¬¡åˆ¤æ–­æ¯ä¸ªqueryæ˜¯å¦åœ¨å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­ï¼Œå¦‚æœåœ¨åˆ™æ˜¯äº¤é›†ï¼Œä¸åœ¨åˆ™ä¸æ˜¯äº¤é›†ã€‚ï¼ˆè¿™é‡Œçš„åœ¨å¯èƒ½ä¼šè¯¯åˆ¤ï¼‰</li></ul><blockquote><p>2ã€å¦‚ä½•æ‰©å±•BloomFilterä½¿å¾—å®ƒæ”¯æŒåˆ é™¤æ“ä½œ</p></blockquote><p>ä¸€èˆ¬å¸ƒéš†è¿‡æ»¤å™¨åˆ é™¤å¯èƒ½ä¼šå½±å“å…¶ä»–çš„å…ƒç´ ï¼Œå› ä¸ºå“ˆå¸Œå‡½æ•°å¯èƒ½ä¼šæ˜ å°„åˆ°ç›¸åŒçš„ä½ï¼Œå¦‚æœè¦æ”¯æŒåˆ é™¤æ“ä½œï¼Œåœ¨åº•å±‚ç»§ç»­å¢åŠ ä½å›¾ï¼Œåšå¼•ç”¨è®¡æ•°çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¼šæµªè´¹å¾ˆå¤šç©ºé—´ï¼Œæ‰€ä»¥å¸ƒéš†è¿‡æ»¤å™¨ä¸€èˆ¬ä¸æ”¯æŒåˆ é™¤æ“ä½œã€‚</p><h2 id="å“ˆå¸Œåˆ‡å‰²"><a href="#å“ˆå¸Œåˆ‡å‰²" class="headerlink" title="å“ˆå¸Œåˆ‡å‰²"></a>å“ˆå¸Œåˆ‡å‰²</h2><blockquote><p>1ã€ç»™ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æœ‰100äº¿ä¸ªqueryï¼Œæˆ‘ä»¬åªæœ‰1Gå†…å­˜ï¼Œå¦‚ä½•æ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„äº¤é›†ï¼Ÿï¼ˆç²¾ç¡®ç®—æ³•ï¼‰</p></blockquote><ul><li>é¦–å…ˆéœ€è¦ä¼°ç®—ä¸€ä¸‹è¿™é‡Œä¸€ä¸ªæ–‡ä»¶çš„å¤§å°ï¼Œä¾¿äºç¡®å®šå°†ä¸€ä¸ªæ–‡ä»¶åˆ‡åˆ†ä¸ºå¤šå°‘ä¸ªå°æ–‡ä»¶ã€‚</li><li>å‡è®¾å¹³å‡æ¯ä¸ªqueryä¸º20å­—èŠ‚ï¼Œé‚£ä¹ˆ100äº¿ä¸ªqueryå°±æ˜¯200Gï¼Œç”±äºæˆ‘ä»¬åªæœ‰1Gå†…å­˜ï¼Œè¿™é‡Œå¯ä»¥è€ƒè™‘å°†ä¸€ä¸ªæ–‡ä»¶åˆ‡åˆ†æˆ400ä¸ªå°æ–‡ä»¶ã€‚</li><li>è¿™é‡Œæˆ‘ä»¬å°†è¿™ä¸¤ä¸ªæ–‡ä»¶åˆ†åˆ«å«åšAæ–‡ä»¶å’ŒBæ–‡ä»¶ï¼Œæ­¤æ—¶æˆ‘ä»¬å°†Aæ–‡ä»¶åˆ‡åˆ†æˆäº†A0<del>A399å…±400ä¸ªå°æ–‡ä»¶ï¼Œå°†Bæ–‡ä»¶åˆ‡åˆ†æˆäº†B0</del>B399å…±400ä¸ªå°æ–‡ä»¶ã€‚</li></ul><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212271516166.png"></p><p>ä¾æ¬¡è¯»å–æ–‡ä»¶Aä¸­queryï¼Œi&#x3D;Hash(query)%400ï¼Œè¿™ä¸ªqueryè¿›å…¥Aiå·å°æ–‡ä»¶ï¼Œç›¸åŒçš„queryä¸€å®šè¿›å…¥ç¼–å·ç›¸åŒçš„å°æ–‡ä»¶</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212271600564.png"></p><ul><li>ç»è¿‡åˆ‡åˆ†åç†è®ºä¸Šæ¯ä¸ªå°æ–‡ä»¶çš„å¹³å‡å¤§å°æ˜¯512Mï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†å…¶ä¸­ä¸€ä¸ªå°æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶æ”¾åˆ°ä¸€ä¸ªsetå®¹å™¨ä¸­ï¼Œå†éå†å¦ä¸€ä¸ªå°æ–‡ä»¶å½“ä¸­çš„queryï¼Œä¾æ¬¡åˆ¤æ–­æ¯ä¸ªqueryæ˜¯å¦åœ¨setå®¹å™¨ä¸­ï¼Œå¦‚æœåœ¨åˆ™æ˜¯äº¤é›†ï¼Œä¸åœ¨åˆ™ä¸æ˜¯äº¤é›†ã€‚</li><li>å½“å“ˆå¸Œåˆ‡åˆ†å¹¶ä¸æ˜¯å¹³å‡åˆ‡åˆ†ï¼Œæœ‰å¯èƒ½åˆ‡å‡ºæ¥çš„å°æ–‡ä»¶ä¸­æœ‰ä¸€äº›å°æ–‡ä»¶çš„å¤§å°ä»ç„¶å¤§äº1Gï¼Œæ­¤æ—¶å¦‚æœä¸ä¹‹å¯¹åº”çš„å¦ä¸€ä¸ªå°æ–‡ä»¶å¯ä»¥åŠ è½½åˆ°å†…å­˜ï¼Œåˆ™å¯ä»¥é€‰æ‹©å°†å¦ä¸€ä¸ªå°æ–‡ä»¶ä¸­çš„queryåŠ è½½åˆ°å†…å­˜ï¼Œå› ä¸ºæˆ‘ä»¬åªéœ€è¦å°†ä¸¤ä¸ªå°æ–‡ä»¶ä¸­çš„ä¸€ä¸ªåŠ è½½åˆ°å†…å­˜ä¸­å°±è¡Œäº†ã€‚</li><li>ä½†å¦‚æœä¸¤ä¸ªå°æ–‡ä»¶çš„å¤§å°éƒ½å¤§äº1Gï¼Œé‚£æˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†è¿™ä¸¤ä¸ªå°æ–‡ä»¶å†è¿›è¡Œä¸€æ¬¡åˆ‡åˆ†ï¼Œå°†å…¶åˆ‡æˆæ›´å°çš„æ–‡ä»¶ï¼Œæ–¹æ³•ä¸ä¹‹å‰åˆ‡åˆ†Aæ–‡ä»¶å’ŒBæ–‡ä»¶çš„æ–¹æ³•ç±»ä¼¼ã€‚</li></ul><blockquote><p>2ã€ç»™ä¸€ä¸ªè¶…è¿‡100Gå¤§å°çš„log fileï¼Œlogä¸­å­˜ç€IPåœ°å€ï¼Œè®¾è®¡ç®—æ³•æ‰¾åˆ°å‡ºç°æ¬¡æ•°æœ€å¤šçš„IPåœ°å€ï¼Ÿä¸ä¸Šé¢˜æ¡ä»¶ç›¸åŒï¼Œå¦‚ä½•æ‰¾åˆ°top Kçš„IP</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212271603992.png"></p><p>ç›¸åŒçš„IPä¸€å®šè¿›å…¥åŒä¸€ä¸ªå°æ–‡ä»¶ï¼Œç„¶åä¾æ¬¡ä½¿ç”¨map&lt;string,int&gt;å¯¹æ¯ä¸ªå°æ–‡ä»¶ç»Ÿè®¡æ¬¡æ•°</p><p>TopKï¼Œå»ºç«‹ä¸€ä¸ªKå€¼ä¸º&lt;ip, count&gt;çš„å°å †ã€‚ä¾æ¬¡åŠ è½½æ¯ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæŸä¸ªIPåœ°å€å‡ºç°çš„æ¬¡æ•°å¤§äºå †é¡¶IPåœ°å€å‡ºç°çš„æ¬¡æ•°ï¼Œåˆ™å°†è¯¥IPåœ°å€ä¸å †é¡¶çš„IPåœ°å€è¿›è¡Œäº¤æ¢ï¼Œç„¶åå†è¿›è¡Œä¸€æ¬¡å‘ä¸‹è°ƒæ•´ï¼Œä½¿å…¶ä»ä¸ºå°å †ï¼Œæœ€ç»ˆæ¯”å¯¹å®Œæ‰€æœ‰å°æ–‡ä»¶ä¸­çš„IPåœ°å€åï¼Œè¿™ä¸ªå°å †å½“ä¸­çš„Kä¸ªIPåœ°å€å°±æ˜¯å‡ºç°æ¬¡æ•°top Kçš„IPåœ°å€ã€‚</p><h2 id="å¸ƒéš†è¿‡æ»¤å™¨ç‰¹ç‚¹"><a href="#å¸ƒéš†è¿‡æ»¤å™¨ç‰¹ç‚¹" class="headerlink" title="å¸ƒéš†è¿‡æ»¤å™¨ç‰¹ç‚¹"></a>å¸ƒéš†è¿‡æ»¤å™¨ç‰¹ç‚¹</h2><p>å­˜åœ¨è¯¯åˆ¤ï¼š<br>åœ¨ï¼šä¸å‡†ç¡®çš„ï¼Œå­˜åœ¨è¯¯åˆ¤<br>ä¸åœ¨ï¼šå‡†ç¡®çš„ï¼Œä¸å­˜åœ¨è¯¯åˆ¤</p><p>ç†è®ºè€Œè¨€ï¼šä¸€ä¸ªå€¼æ˜ å°„çš„ä½è¶Šå¤šï¼Œè¯¯åˆ¤æ¦‚ç‡è¶Šä½ï¼Œä½†æ˜¯ä¹Ÿä¸æ•¢æ˜ å°„å¤ªå¤šï¼Œé‚£ä¹ˆç©ºé—´æ¶ˆè€—å°±è¶Šå¤š</p>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">é«˜é˜¶æ•°æ®ç»“æ„</category>
      
      
      <category domain="http://example.com/tags/%E5%93%88%E5%B8%8C/">å“ˆå¸Œ</category>
      
      
      <comments>http://example.com/2022/12/27/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%93%88%E5%B8%8C%E5%BA%94%E7%94%A8/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>å“ˆå¸Œ</title>
      <link>http://example.com/2022/12/24/CPP/%E5%93%88%E5%B8%8C/</link>
      <guid>http://example.com/2022/12/24/CPP/%E5%93%88%E5%B8%8C/</guid>
      <pubDate>Sat, 24 Dec 2022 07:08:17 GMT</pubDate>
      
        
        
      <description>&lt;h1 id=&quot;unorderedç³»åˆ—å…³è”å¼å®¹å™¨&quot;&gt;&lt;a href=&quot;#unorderedç³»åˆ—å…³è”å¼å®¹å™¨&quot; class=&quot;headerlink&quot; title=&quot;unorderedç³»åˆ—å…³è”å¼å®¹å™¨&quot;&gt;&lt;/a&gt;unorderedç³»åˆ—å…³è”å¼å®¹å™¨&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;å†…</description>
        
      
      
      
      <content:encoded><![CDATA[<h1 id="unorderedç³»åˆ—å…³è”å¼å®¹å™¨"><a href="#unorderedç³»åˆ—å…³è”å¼å®¹å™¨" class="headerlink" title="unorderedç³»åˆ—å…³è”å¼å®¹å™¨"></a>unorderedç³»åˆ—å…³è”å¼å®¹å™¨</h1><blockquote><p>å†…éƒ¨æ˜¯æ— åºçš„ï¼ŒæŸ¥è¯¢å¾ˆå¿«</p></blockquote><p>å‡ ä¸ªå‡½æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‡½æ•°å£°æ˜</th><th>åŠŸèƒ½ä»‹ç»</th></tr></thead><tbody><tr><td>operator[]</td><td>è¿”å›ä¸keyå¯¹åº”çš„valueå€¼</td></tr><tr><td>bucket_count()</td><td>è¿”å›æ¡¶çš„ä¸ªæ•°</td></tr><tr><td>size_t bucket_size(size_t n)const</td><td>è¿”å›nå·æ¡¶æœ‰æ•ˆå…ƒç´ çš„ä¸ªæ•°</td></tr><tr><td>size_t bucket(const K&amp; key)</td><td>è¿”å›å…ƒç´ keyå¯¹åº”çš„æ¡¶å·</td></tr></tbody></table><h1 id="åº•å±‚ç»“æ„"><a href="#åº•å±‚ç»“æ„" class="headerlink" title="åº•å±‚ç»“æ„"></a>åº•å±‚ç»“æ„</h1><blockquote><p>unorderedç³»åˆ—çš„å…³è”å¼å®¹å™¨ä¹‹æ‰€ä»¥æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œæ˜¯å› ä¸ºå…¶åº•å±‚ä½¿ç”¨äº†å“ˆå¸Œç»“æ„ã€‚</p></blockquote><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>é€šè¿‡æŸç§å‡½æ•°(hashFunc)ä½¿å…ƒç´ çš„å­˜å‚¨ä½ç½®ä¸å®ƒçš„å…³é”®ç ä¹‹é—´èƒ½å¤Ÿå»ºç«‹  ä¸€ä¸€æ˜ å°„çš„å…³ç³»ï¼Œé‚£ä¹ˆåœ¨æŸ¥æ‰¾æ—¶é€šè¿‡è¯¥å‡½æ•°å¯ä»¥å¾ˆå¿«æ‰¾åˆ°è¯¥å…ƒç´ ã€‚</p><p>ä¾‹å¦‚ï¼šæ•°æ®é›†åˆ{1ï¼Œ7ï¼Œ6ï¼Œ4ï¼Œ5ï¼Œ9}<br>å“ˆå¸Œå‡½æ•°è®¾ç½®ä¸ºï¼š<strong>hash(key) &#x3D; key % capacity</strong>; <strong>capacity</strong>ä¸ºå­˜å‚¨å…ƒç´ åº•å±‚ç©ºé—´æ€»çš„å¤§å°</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212231541251.png"></p><h2 id="å“ˆå¸Œå†²çª"><a href="#å“ˆå¸Œå†²çª" class="headerlink" title="å“ˆå¸Œå†²çª"></a>å“ˆå¸Œå†²çª</h2><blockquote><p>ä¸åŒå…³é”®å­—é€šè¿‡ç›¸åŒå“ˆå¸Œå“ˆæ•°è®¡ç®—å‡ºç›¸åŒçš„å“ˆå¸Œåœ°å€ï¼Œè¯¥ç§ç°è±¡ç§°ä¸ºå“ˆå¸Œå†²çªæˆ–å“ˆå¸Œç¢°æ’ã€‚</p></blockquote><h2 id="å“ˆå¸Œå‡½æ•°"><a href="#å“ˆå¸Œå‡½æ•°" class="headerlink" title="å“ˆå¸Œå‡½æ•°"></a>å“ˆå¸Œå‡½æ•°</h2><p>å¼•èµ·å“ˆå¸Œå†²çªçš„ä¸€ä¸ªåŸå› å¯èƒ½æ˜¯ï¼šå“ˆå¸Œå‡½æ•°è®¾è®¡ä¸å¤Ÿåˆç†ã€‚  </p><p><strong>å“ˆå¸Œå‡½æ•°è®¾è®¡åŸåˆ™ï¼š</strong>  </p><ul><li>å“ˆå¸Œå‡½æ•°çš„å®šä¹‰åŸŸå¿…é¡»åŒ…æ‹¬éœ€è¦å­˜å‚¨çš„å…¨éƒ¨å…³é”®ç ï¼Œè€Œå¦‚æœæ•£åˆ—è¡¨å…è®¸æœ‰mä¸ªåœ°å€æ—¶ï¼Œå…¶å€¼<br>åŸŸå¿…é¡»åœ¨0åˆ°m-1ä¹‹é—´  </li><li>å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºæ¥çš„åœ°å€èƒ½å‡åŒ€åˆ†å¸ƒåœ¨æ•´ä¸ªç©ºé—´ä¸­  </li><li>å“ˆå¸Œå‡½æ•°åº”è¯¥æ¯”è¾ƒç®€å•</li></ul><h3 id="é™¤ç•™ä½™æ•°æ³•"><a href="#é™¤ç•™ä½™æ•°æ³•" class="headerlink" title="é™¤ç•™ä½™æ•°æ³•"></a>é™¤ç•™ä½™æ•°æ³•</h3><p>è®¾æ•£åˆ—è¡¨ä¸­å…è®¸çš„åœ°å€æ•°ä¸ºmï¼Œå–ä¸€ä¸ªä¸å¤§äºmï¼Œä½†æœ€æ¥è¿‘æˆ–è€…ç­‰äºmçš„è´¨æ•°pä½œä¸ºé™¤æ•°ï¼Œ<br>æŒ‰ç…§å“ˆå¸Œå‡½æ•°ï¼š<strong>Hash(key) &#x3D; key% p(p&lt;&#x3D;m)</strong>,å°†å…³é”®ç è½¬æ¢æˆå“ˆå¸Œåœ°å€</p><h3 id="å­—ç¬¦ä¸²å“ˆå¸Œç®—æ³•"><a href="#å­—ç¬¦ä¸²å“ˆå¸Œç®—æ³•" class="headerlink" title="å­—ç¬¦ä¸²å“ˆå¸Œç®—æ³•"></a>å­—ç¬¦ä¸²å“ˆå¸Œç®—æ³•</h3><p><a href="https://www.cnblogs.com/-clq/archive/2012/05/31/2528153.html">å­—ç¬¦ä¸²å“ˆå¸Œç®—æ³•</a></p><h2 id="è§£å†³å“ˆå¸Œå†²çª"><a href="#è§£å†³å“ˆå¸Œå†²çª" class="headerlink" title="è§£å†³å“ˆå¸Œå†²çª"></a>è§£å†³å“ˆå¸Œå†²çª</h2><h3 id="é—­æ•£åˆ—"><a href="#é—­æ•£åˆ—" class="headerlink" title="é—­æ•£åˆ—"></a>é—­æ•£åˆ—</h3><p>é—­æ•£åˆ—ï¼šä¹Ÿå«å¼€æ”¾å®šå€æ³•ï¼Œå½“å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œå¦‚æœå“ˆå¸Œè¡¨æœªè¢«è£…æ»¡ï¼Œè¯´æ˜åœ¨å“ˆå¸Œè¡¨ä¸­å¿…ç„¶è¿˜æœ‰ç©ºä½ç½®ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠkeyå­˜æ”¾åˆ°å†²çªä½ç½®ä¸­çš„â€œä¸‹ä¸€ä¸ªâ€ ç©ºä½ç½®ä¸­å»ã€‚é‚£å¦‚ä½•å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºä½ç½®</p><h4 id="çº¿æ€§æ¢æµ‹"><a href="#çº¿æ€§æ¢æµ‹" class="headerlink" title="çº¿æ€§æ¢æµ‹"></a>çº¿æ€§æ¢æµ‹</h4><blockquote><p>ä»å‘ç”Ÿå†²çªçš„ä½ç½®å¼€å§‹ï¼Œä¾æ¬¡å‘åæ¢æµ‹ï¼Œç›´åˆ°å¯»æ‰¾åˆ°ä¸‹ä¸€ä¸ªç©ºä½ç½®ä¸ºæ­¢</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212231551253.png"></p><p>çº¿æ€§æ¢æµ‹ç¼ºç‚¹ï¼šä¸€æ—¦å‘ç”Ÿå“ˆå¸Œå†²çªï¼Œæ‰€æœ‰çš„å†²çªè¿åœ¨ä¸€èµ·ï¼Œå®¹æ˜“äº§ç”Ÿæ•°æ®â€œå †ç§¯â€ï¼Œå³ï¼šä¸åŒ<br>å…³é”®ç å æ®äº†å¯åˆ©ç”¨çš„ç©ºä½ç½®ï¼Œä½¿å¾—å¯»æ‰¾æŸå…³é”®ç çš„ä½ç½®éœ€è¦è®¸å¤šæ¬¡æ¯”è¾ƒï¼Œå¯¼è‡´æœç´¢æ•ˆç‡é™<br>ä½</p><h4 id="äºŒæ¬¡æ¢æµ‹"><a href="#äºŒæ¬¡æ¢æµ‹" class="headerlink" title="äºŒæ¬¡æ¢æµ‹"></a>äºŒæ¬¡æ¢æµ‹</h4><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212231600891.png"></p><p>æ¯æ¬¡å¹³æ–¹çš„æ¢æµ‹ï¼š<strong>hash+i^2 (i&gt;&#x3D;0)</strong></p><h4 id="è´Ÿè½½å› å­"><a href="#è´Ÿè½½å› å­" class="headerlink" title="è´Ÿè½½å› å­"></a>è´Ÿè½½å› å­</h4><p>è´Ÿè½½å› å­ï¼šå¡«å…¥è¡¨ä¸­å…ƒç´ ä¸ªæ•° &#x2F; æ•£åˆ—è¡¨çš„é•¿åº¦</p><p>è´Ÿè½½å› å­è¶Šå°è¶Šä¸å®¹æ˜“å†²çªï¼Œä½†æ˜¯ç©ºé—´åˆ©ç”¨ç‡æ¯”è¾ƒä½ï¼Œä¸€èˆ¬è®¾ç½®0.7å·¦å³</p><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> CloseHash</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">enum</span> <span class="title class_">State</span></span><br><span class="line">    &#123;</span><br><span class="line">        EXIST,</span><br><span class="line">        DELETE,</span><br><span class="line">        EMPTY</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">HashData</span></span><br><span class="line">    &#123;</span><br><span class="line">        std::pair&lt;K, V&gt; _kv;</span><br><span class="line">        State _state = EMPTY;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>&gt;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">HashFunc</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> K &amp;key)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="type">size_t</span>)key;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;&gt;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">HashFunc</span>&lt;string&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> string &amp;key)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="type">size_t</span> val = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> ch : key)</span><br><span class="line">            &#123;</span><br><span class="line">                val *= <span class="number">131</span>;</span><br><span class="line">                val += ch;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> val;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>, <span class="keyword">class</span> <span class="title class_">Hash</span> = HashFunc&lt;K&gt;&gt;</span><br><span class="line">    <span class="keyword">class</span> HashTable</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="type">bool</span> <span class="built_in">insert</span>(<span class="type">const</span> pair&lt;K, V&gt; &amp;data)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">find</span>(data.first))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (_tables.<span class="built_in">size</span>() == <span class="number">0</span> || _size * <span class="number">10</span> / _tables.<span class="built_in">size</span>() &gt;= <span class="number">7</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">size_t</span> newSize = _tables.<span class="built_in">size</span>() == <span class="number">0</span> ? <span class="number">10</span> : _tables.<span class="built_in">size</span>() * <span class="number">2</span>;</span><br><span class="line">                HashTable&lt;K, V, Hash&gt; newHT;</span><br><span class="line">                newHT._tables.<span class="built_in">resize</span>(newSize);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">auto</span> e : _tables)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (e._state == EXIST)</span><br><span class="line">                    &#123;</span><br><span class="line">                        newHT.<span class="built_in">insert</span>(e._kv);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                _tables.<span class="built_in">swap</span>(newHT._tables);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Hash hash;</span><br><span class="line">            <span class="type">size_t</span> hashi = <span class="built_in">hash</span>(data.first) % _tables.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (_tables[hashi]._state == EXIST)</span><br><span class="line">            &#123;</span><br><span class="line">                hashi++;</span><br><span class="line">                hashi %= _tables.<span class="built_in">size</span>();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            _tables[hashi]._kv = data;</span><br><span class="line">            _tables[hashi]._state = EXIST;</span><br><span class="line">            _size++;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">HashData&lt;K, V&gt; *<span class="title">find</span><span class="params">(<span class="type">const</span> K &amp;key)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (_tables.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            Hash hash;</span><br><span class="line">            <span class="type">size_t</span> start = <span class="built_in">hash</span>(key) % _tables.<span class="built_in">size</span>();</span><br><span class="line">            <span class="type">size_t</span> hashi = start;</span><br><span class="line">            <span class="keyword">while</span> (_tables[hashi]._state != EMPTY)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (_tables[hashi]._state != DELETE &amp;&amp; _tables[hashi]._kv.first == key)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> &amp;_tables[hashi];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                hashi++;</span><br><span class="line">                hashi %= _tables.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (hashi == start)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">erase</span><span class="params">(<span class="type">const</span> K &amp;key)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            HashData&lt;K, V&gt; *ret = <span class="built_in">find</span>(key);</span><br><span class="line">            <span class="keyword">if</span> (ret)</span><br><span class="line">            &#123;</span><br><span class="line">                ret-&gt;_state = DELETE;</span><br><span class="line">                --_size;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; _tables.<span class="built_in">size</span>(); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (_tables[i]._state == EXIST)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;[%llu:%d] &quot;</span>, i, _tables[i]._kv.first);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;[%llu:*] &quot;</span>, i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            cout &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        vector&lt;HashData&lt;K, V&gt;&gt; _tables;</span><br><span class="line">        <span class="type">size_t</span> _size = <span class="number">0</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">test1</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> a[] = &#123;<span class="number">1</span>, <span class="number">11</span>, <span class="number">4</span>, <span class="number">15</span>, <span class="number">26</span>, <span class="number">7</span>, <span class="number">44</span>&#125;;</span><br><span class="line">        HashTable&lt;<span class="type">int</span>, <span class="type">int</span>&gt; ht;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> e : a)</span><br><span class="line">        &#123;</span><br><span class="line">            ht.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(e, e));</span><br><span class="line">        &#125;</span><br><span class="line">        ht.<span class="built_in">print</span>();</span><br><span class="line"></span><br><span class="line">        ht.<span class="built_in">erase</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; ht.<span class="built_in">find</span>(<span class="number">44</span>)-&gt;_kv.first &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; ht.<span class="built_in">find</span>(<span class="number">4</span>) &lt;&lt; endl;</span><br><span class="line">        ht.<span class="built_in">print</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¼€æ•£åˆ—"><a href="#å¼€æ•£åˆ—" class="headerlink" title="å¼€æ•£åˆ—"></a>å¼€æ•£åˆ—</h3><p>å¼€æ•£åˆ—æ³•åˆå«é“¾åœ°å€æ³•(å¼€é“¾æ³•)ï¼Œé¦–å…ˆå¯¹å…³é”®ç é›†åˆç”¨æ•£åˆ—å‡½æ•°è®¡ç®—æ•£åˆ—åœ°å€ï¼Œå…·æœ‰ç›¸åŒåœ°<br>å€çš„å…³é”®ç å½’äºåŒä¸€å­é›†åˆï¼Œæ¯ä¸€ä¸ªå­é›†åˆç§°ä¸ºä¸€ä¸ªæ¡¶ï¼Œå„ä¸ªæ¡¶ä¸­çš„å…ƒç´ é€šè¿‡ä¸€ä¸ªå•é“¾è¡¨é“¾<br>æ¥èµ·æ¥ï¼Œå„é“¾è¡¨çš„å¤´ç»“ç‚¹å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­ã€‚</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212231612112.png"></p><h3 id="å¼€æ•£åˆ—é—­æ•£åˆ—æ¯”è¾ƒ"><a href="#å¼€æ•£åˆ—é—­æ•£åˆ—æ¯”è¾ƒ" class="headerlink" title="å¼€æ•£åˆ—é—­æ•£åˆ—æ¯”è¾ƒ"></a>å¼€æ•£åˆ—é—­æ•£åˆ—æ¯”è¾ƒ</h3><p>åº”ç”¨é“¾åœ°å€æ³•ï¼ˆå¼€æ•£åˆ—ï¼‰å¤„ç†æº¢å‡ºï¼Œéœ€è¦å¢è®¾é“¾æ¥æŒ‡é’ˆï¼Œä¼¼ä¹å¢åŠ äº†å­˜å‚¨å¼€é”€ã€‚äº‹å®ä¸Šï¼šç”±äºå¼€åœ°å€æ³•å¿…é¡»ä¿æŒå¤§é‡çš„ç©ºé—²ç©ºé—´ä»¥ç¡®ä¿æœç´¢æ•ˆç‡ï¼Œå¦‚äºŒæ¬¡æ¢æŸ¥æ³•è¦æ±‚è£…è½½å› å­a &lt;&#x3D;  0.7ï¼Œè€Œè¡¨é¡¹æ‰€å ç©ºé—´åˆæ¯”æŒ‡é’ˆå¤§çš„å¤šï¼Œæ‰€ä»¥ä½¿ç”¨é“¾åœ°å€æ³•åè€Œæ¯”å¼€åœ°å€æ³•èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</p><h1 id="unordered-mapå’Œunordered-setå°è£…"><a href="#unordered-mapå’Œunordered-setå°è£…" class="headerlink" title="unordered_mapå’Œunordered_setå°è£…"></a>unordered_mapå’Œunordered_setå°è£…</h1><h2 id="hashè¡¨ï¼ˆå¼€æ•£åˆ—ï¼‰"><a href="#hashè¡¨ï¼ˆå¼€æ•£åˆ—ï¼‰" class="headerlink" title="hashè¡¨ï¼ˆå¼€æ•£åˆ—ï¼‰"></a>hashè¡¨ï¼ˆå¼€æ•£åˆ—ï¼‰</h2><p>å‡ ä¸ªç‚¹ï¼š</p><ul><li>æ¨¡æ¿ç±»ï¼Œç¬¬ä¸€ä¸ªæ¨¡æ¿å‚æ•°æ˜¯Kï¼Œç¬¬äºŒä¸ªå‚æ•°Tï¼Œä¸Šå±‚å†³å®šè¿™ä¸ªTæ˜¯ä»€ä¹ˆ</li><li>ä¼ å…¥ä»¿å‡½æ•°KeyOfTï¼Œè¿™ä¸ªå¯ä»¥ä»Tç±»å‹ä¸­å–K</li><li>insertæ’å…¥ï¼Œè¿”å›å€¼è®¾ä¸ºè¿­ä»£å™¨å’Œboolçš„é”®å€¼å¯¹</li><li>è¿­ä»£å™¨ï¼ˆä¸€ä¸ªæ˜¯èŠ‚ç‚¹æŒ‡é’ˆï¼Œä¸€ä¸ªæ˜¯å“ˆå¸Œè¡¨æŒ‡é’ˆï¼‰</li><li>è¿­ä»£å™¨ç”¨äº†å“ˆå¸Œè¡¨ï¼Œéœ€è¦åœ¨è¿­ä»£å™¨å‰é¢è¿›è¡Œå“ˆå¸Œè¡¨çš„å£°æ˜</li><li>è¿­ä»£å™¨æœ‰å“ˆå¸Œè¡¨çš„æŒ‡é’ˆï¼Œæ‰€ä»¥è¦å°†è¿­ä»£å™¨ç±»ï¼Œå£°æ˜ä¸ºå“ˆå¸Œè¡¨ç±»çš„å‹å…ƒ</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">HashFunc</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> K &amp;key)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">size_t</span>)key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">HashFunc</span>&lt;string&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> string &amp;key)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">size_t</span> val = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> ch : key)</span><br><span class="line">        &#123;</span><br><span class="line">            val *= <span class="number">131</span>;</span><br><span class="line">            val += ch;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> OpenHash</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">HashData</span></span><br><span class="line">    &#123;</span><br><span class="line">        T _data;</span><br><span class="line">        HashData&lt;T&gt; *_next;</span><br><span class="line">        <span class="built_in">HashData</span>(<span class="type">const</span> T &amp;data)</span><br><span class="line">            : _data(data), _next(<span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">Hash</span>, <span class="keyword">class</span> <span class="title class_">KeyOfT</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">HashTable</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">Hash</span>, <span class="keyword">class</span> <span class="title class_">KeyOfT</span>&gt;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">__HashIterator</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">typedef</span> HashData&lt;T&gt; Node;</span><br><span class="line">        <span class="keyword">typedef</span> HashTable&lt;K, T, Hash, KeyOfT&gt; HT;</span><br><span class="line">        <span class="keyword">typedef</span> __HashIterator&lt;K, T, Hash, KeyOfT&gt; self;</span><br><span class="line"></span><br><span class="line">        Node *_node;</span><br><span class="line">        HT *_pht;</span><br><span class="line"></span><br><span class="line">        __HashIterator(Node *node, HT *pht)</span><br><span class="line">            : _node(node), _pht(pht)</span><br><span class="line">        &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        T &amp;<span class="keyword">operator</span>*()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> _node-&gt;_data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        T *<span class="keyword">operator</span>-&gt;()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> &amp;_node-&gt;_data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        self &amp;<span class="keyword">operator</span>++()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (_node-&gt;_next)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœå½“å‰æ¡¶çš„ä¸‹ä¸€ä¸ªä¸ä¸ºç©ºï¼Œç›´æ¥èµ°åˆ°ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line">                _node = _node-&gt;_next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// è¯´æ˜å½“å‰ä½ç½®ä¸ºç©ºï¼Œè¦æ‰¾ä¸‹ä¸€ä¸ªä¸ä¸ºç©ºçš„æ¡¶</span></span><br><span class="line">                Hash hash;</span><br><span class="line">                KeyOfT kot;</span><br><span class="line">                <span class="type">size_t</span> i = <span class="built_in">hash</span>(<span class="built_in">kot</span>(_node-&gt;_data)) % _pht-&gt;<span class="built_in">size</span>();</span><br><span class="line">                ++i;</span><br><span class="line">                <span class="keyword">for</span> (; i &lt; _pht-&gt;<span class="built_in">size</span>(); ++i)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (_pht-&gt;_tables[i])</span><br><span class="line">                    &#123;</span><br><span class="line">                        _node = _pht-&gt;_tables[i];</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (i == _pht-&gt;<span class="built_in">size</span>())</span><br><span class="line">                &#123;</span><br><span class="line">                    _node = <span class="literal">nullptr</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">bool</span> <span class="keyword">operator</span>!=(<span class="type">const</span> self &amp;s) <span class="type">const</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> _node != s._node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> self &amp;s) <span class="type">const</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> _node == s._node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">Hash</span>, <span class="keyword">class</span> <span class="title class_">KeyOfT</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">HashTable</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">__HashIterator</span>&lt;K,T,Hash,KeyOfT&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">typedef</span> HashData&lt;T&gt;</span><br><span class="line">            Node;</span><br><span class="line">        <span class="keyword">typedef</span> __HashIterator&lt;K, T, Hash, KeyOfT&gt; iterator;</span><br><span class="line"></span><br><span class="line">        <span class="function">iterator <span class="title">begin</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; <span class="built_in">size</span>(); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (_tables[i])</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="built_in">iterator</span>(_tables[i], <span class="keyword">this</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">end</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">iterator <span class="title">end</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">iterator</span>(<span class="literal">nullptr</span>, <span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">inline</span> <span class="type">size_t</span> __stl_next_prime(<span class="type">size_t</span> n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">static</span> <span class="type">const</span> <span class="type">size_t</span> __stl_num_primes = <span class="number">28</span>;</span><br><span class="line">            <span class="comment">// æŒ‰ç´ æ•°ï¼Œæ‰©å®¹ï¼Œstlæºç ä¸­</span></span><br><span class="line">            <span class="type">static</span> <span class="type">const</span> <span class="type">size_t</span> __stl_prime_list[__stl_num_primes] =</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="number">53</span>, <span class="number">97</span>, <span class="number">193</span>, <span class="number">389</span>, <span class="number">769</span>,</span><br><span class="line">                    <span class="number">1543</span>, <span class="number">3079</span>, <span class="number">6151</span>, <span class="number">12289</span>, <span class="number">24593</span>,</span><br><span class="line">                    <span class="number">49157</span>, <span class="number">98317</span>, <span class="number">196613</span>, <span class="number">393241</span>, <span class="number">786433</span>,</span><br><span class="line">                    <span class="number">1572869</span>, <span class="number">3145739</span>, <span class="number">6291469</span>, <span class="number">12582917</span>, <span class="number">25165843</span>,</span><br><span class="line">                    <span class="number">50331653</span>, <span class="number">100663319</span>, <span class="number">201326611</span>, <span class="number">402653189</span>, <span class="number">805306457</span>,</span><br><span class="line">                    <span class="number">1610612741</span>, <span class="number">3221225473</span>, <span class="number">4294967291</span>&#125;;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; __stl_num_primes; ++i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (__stl_prime_list[i] &gt; n)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> __stl_prime_list[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ~<span class="built_in">HashTable</span>()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; _tables.<span class="built_in">size</span>(); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Node *cur = _tables[i];</span><br><span class="line">                <span class="keyword">while</span> (cur)</span><br><span class="line">                &#123;</span><br><span class="line">                    Node *next = cur-&gt;_next;</span><br><span class="line">                    <span class="keyword">delete</span> cur;</span><br><span class="line">                    cur = next;</span><br><span class="line">                &#125;</span><br><span class="line">                _tables[i] = <span class="literal">nullptr</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function">pair&lt;iterator, <span class="type">bool</span>&gt; <span class="title">insert</span><span class="params">(<span class="type">const</span> T &amp;data)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            KeyOfT kot;</span><br><span class="line">            Hash hash;</span><br><span class="line"></span><br><span class="line">            iterator ret = <span class="built_in">find</span>(<span class="built_in">kot</span>(data));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (ret != <span class="built_in">end</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">make_pair</span>(ret, <span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (_tables.<span class="built_in">size</span>() == _size)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// size_t newSize = _tables.size() == 0 ? 10 : 2 * _tables.size();</span></span><br><span class="line">                vector&lt;Node *&gt; newTables;</span><br><span class="line">                newTables.<span class="built_in">resize</span>(__stl_next_prime(_tables.<span class="built_in">size</span>()), <span class="literal">nullptr</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; _tables.<span class="built_in">size</span>(); i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    Node *cur = _tables[i];</span><br><span class="line">                    <span class="keyword">while</span> (cur)</span><br><span class="line">                    &#123;</span><br><span class="line">                        Node *next = cur-&gt;_next;</span><br><span class="line">                        <span class="type">size_t</span> hashi = <span class="built_in">hash</span>(<span class="built_in">kot</span>(cur-&gt;_data)) % newTables.<span class="built_in">size</span>();</span><br><span class="line">                        cur-&gt;_next = newTables[hashi];</span><br><span class="line">                        newTables[hashi] = cur;</span><br><span class="line">                        cur = next;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    _tables[i] = <span class="literal">nullptr</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                _tables.<span class="built_in">swap</span>(newTables);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">size_t</span> hashi = <span class="built_in">hash</span>(<span class="built_in">kot</span>(data)) % _tables.<span class="built_in">size</span>();</span><br><span class="line">            Node *newNode = <span class="keyword">new</span> <span class="built_in">Node</span>(data);</span><br><span class="line">            newNode-&gt;_next = _tables[hashi];</span><br><span class="line">            _tables[hashi] = newNode;</span><br><span class="line">            ++_size;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">make_pair</span>(<span class="built_in">iterator</span>(newNode, <span class="keyword">this</span>), <span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">iterator <span class="title">find</span><span class="params">(<span class="type">const</span> K &amp;key)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            Hash hash;</span><br><span class="line">            KeyOfT kot;</span><br><span class="line">            <span class="keyword">if</span> (_tables.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">end</span>();</span><br><span class="line">            <span class="type">size_t</span> hashi = <span class="built_in">hash</span>(key) % _tables.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">            Node *cur = _tables[hashi];</span><br><span class="line">            <span class="keyword">while</span> (cur)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">kot</span>(cur-&gt;_data) == key)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="built_in">iterator</span>(cur, <span class="keyword">this</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                cur = cur-&gt;_next;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">end</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">erase</span><span class="params">(<span class="type">const</span> K &amp;key)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (_tables.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            Hash hash;</span><br><span class="line">            <span class="type">size_t</span> hashi = <span class="built_in">hash</span>(key) % _tables.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">            Node *cur = _tables[hashi];</span><br><span class="line">            Node *parent = <span class="literal">nullptr</span>;</span><br><span class="line">            <span class="keyword">while</span> (cur)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (cur-&gt;_kv.first == key)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// 1ã€å¤´åˆ </span></span><br><span class="line">                    <span class="comment">// 2ã€ä¸­é—´åˆ </span></span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (parent == <span class="literal">nullptr</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        _tables[hashi] = cur-&gt;_next;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        parent-&gt;_next = cur-&gt;_next;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">delete</span> cur;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                parent = cur;</span><br><span class="line">                cur = cur-&gt;_next;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">size_t</span> <span class="title">size</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _tables.<span class="built_in">size</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ¡¶çš„ä¸ªæ•°</span></span><br><span class="line">        <span class="function"><span class="type">size_t</span> <span class="title">bucket_num</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="type">size_t</span> num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; _tables.<span class="built_in">size</span>(); ++i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (_tables[i])</span><br><span class="line">                &#123;</span><br><span class="line">                    ++num;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> num;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">size_t</span> <span class="title">maxbucket_lenth</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="type">size_t</span> maxlen = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; <span class="built_in">size</span>(); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">size_t</span> len = <span class="number">0</span>;</span><br><span class="line">                Node *cur = _tables[i];</span><br><span class="line">                <span class="keyword">while</span> (cur)</span><br><span class="line">                &#123;</span><br><span class="line">                    len++;</span><br><span class="line">                    cur = cur-&gt;_next;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (len &gt; maxlen)</span><br><span class="line">                &#123;</span><br><span class="line">                    maxlen = len;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> maxlen;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        vector&lt;Node *&gt; _tables;</span><br><span class="line">        <span class="type">size_t</span> _size = <span class="number">0</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="unordered-map"><a href="#unordered-map" class="headerlink" title="unordered_map"></a>unordered_map</h2><p>unordered_mapçš„åº•å±‚æ˜¯å“ˆå¸Œè¡¨ï¼Œç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°ä¼ ä¸ªpair&lt;K,V&gt;ï¼ŒåŒæ—¶è¦é…å¯¹åº”çš„ä»¿å‡½æ•°ï¼Œè¿”å›first</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;hash.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> st</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>, <span class="keyword">class</span> <span class="title class_">Hash</span> = HashFunc&lt;K&gt;&gt;</span><br><span class="line">    <span class="keyword">class</span> unordered_map</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">struct</span> KeyOfT</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">const</span> K &amp;<span class="built_in">operator</span>()(<span class="type">const</span> pair&lt;K, V&gt; &amp;kv)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> kv.first;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">typedef</span> <span class="keyword">typename</span> OpenHash::HashTable&lt;K, pair&lt;K, V&gt;, Hash, KeyOfT&gt;::iterator iterator;</span><br><span class="line"></span><br><span class="line">        <span class="function">iterator <span class="title">begin</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _ht.<span class="built_in">begin</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">iterator <span class="title">end</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _ht.<span class="built_in">end</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">pair&lt;iterator, <span class="type">bool</span>&gt; <span class="title">insert</span><span class="params">(<span class="type">const</span> pair&lt;K, V&gt; &amp;kv)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _ht.<span class="built_in">insert</span>(kv);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        V &amp;<span class="keyword">operator</span>[](<span class="type">const</span> K &amp;key)</span><br><span class="line">        &#123;</span><br><span class="line">            pair&lt;iterator, <span class="type">bool</span>&gt; ret = _ht.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(key, <span class="built_in">V</span>()));</span><br><span class="line">            <span class="keyword">return</span> ret.first-&gt;second;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        OpenHash::HashTable&lt;K, pair&lt;K, V&gt;, Hash, KeyOfT&gt; _ht;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        unordered_map&lt;string, <span class="type">int</span>&gt; countMap;</span><br><span class="line">        string arr[] = &#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;d&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> e : arr)</span><br><span class="line">        &#123;</span><br><span class="line">            countMap[e]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;kv : countMap)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; kv.first &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; kv.second &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="unordered-set"><a href="#unordered-set" class="headerlink" title="unordered_set"></a>unordered_set</h2><p>unordered_setçš„åº•å±‚ä¹Ÿæ˜¯å“ˆå¸Œè¡¨ï¼Œç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°ä¼ ä¸ªKï¼ŒåŒæ—¶è¦é…å¯¹åº”çš„ä»¿å‡½æ•°ï¼Œè¿”å›Kå°±å¥½äº†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;hash.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> st</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">Hash</span> = HashFunc&lt;K&gt;&gt;</span><br><span class="line">    <span class="keyword">class</span> unordered_set</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">struct</span> KeyOfT</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">const</span> K &amp;<span class="built_in">operator</span>()(<span class="type">const</span> K&amp; key)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> key;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">typedef</span> <span class="keyword">typename</span> OpenHash::HashTable&lt;K, K, Hash, KeyOfT&gt;::iterator iterator;</span><br><span class="line"></span><br><span class="line">        <span class="function">iterator <span class="title">begin</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _ht.<span class="built_in">begin</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">iterator <span class="title">end</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _ht.<span class="built_in">end</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">pair&lt;iterator, <span class="type">bool</span>&gt; <span class="title">insert</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _ht.<span class="built_in">insert</span>(key);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        OpenHash::HashTable&lt;K, K, Hash, KeyOfT&gt; _ht;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">test_set</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        unordered_set&lt;string&gt; s;</span><br><span class="line">        string arr[] = &#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;d&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> e: arr)</span><br><span class="line">        &#123;</span><br><span class="line">            s.<span class="built_in">insert</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> e: s)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; e &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/CPP/">CPP</category>
      
      
      <category domain="http://example.com/tags/STL/">STL</category>
      
      
      <comments>http://example.com/2022/12/24/CPP/%E5%93%88%E5%B8%8C/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>mapå’Œset</title>
      <link>http://example.com/2022/12/20/CPP/map%E5%92%8Cset/</link>
      <guid>http://example.com/2022/12/20/CPP/map%E5%92%8Cset/</guid>
      <pubDate>Tue, 20 Dec 2022 10:40:10 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;å…³è”å¼å®¹å™¨ä¹Ÿæ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®çš„ï¼Œä¸åºåˆ—å¼å®¹å™¨ä¸åŒçš„æ˜¯ï¼Œå…¶é‡Œé¢å­˜å‚¨çš„æ˜¯&amp;lt;key, value&amp;gt;ç»“æ„çš„é”®å€¼å¯¹ï¼Œåœ¨æ•°æ®æ£€ç´¢æ—¶æ¯”åºåˆ—å¼å®¹å™¨æ•ˆç‡æ›´é«˜&lt;/p&gt;
&lt;h1 id=&quot;set&quot;&gt;&lt;a href=&quot;#set&quot; class=&quot;headerlink&quot; title=&quot;set&quot;</description>
        
      
      
      
      <content:encoded><![CDATA[<p>å…³è”å¼å®¹å™¨ä¹Ÿæ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®çš„ï¼Œä¸åºåˆ—å¼å®¹å™¨ä¸åŒçš„æ˜¯ï¼Œå…¶é‡Œé¢å­˜å‚¨çš„æ˜¯&lt;key, value&gt;ç»“æ„çš„é”®å€¼å¯¹ï¼Œåœ¨æ•°æ®æ£€ç´¢æ—¶æ¯”åºåˆ—å¼å®¹å™¨æ•ˆç‡æ›´é«˜</p><h1 id="set"><a href="#set" class="headerlink" title="set"></a>set</h1><p>æ’åº+å»é‡</p><p>findæ‰¾ä¸åˆ°ä¼šè¿”å›end</p><p>lower_bound(val)  è¿”å›å¤§äºæˆ–è€…ç­‰äºvalçš„ä½ç½®<br>upper_bound(val) è¿”å›å¤§äºvalçš„ä½ç½®</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a[] = &#123; <span class="number">3</span>,<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">8</span>,<span class="number">3</span>, <span class="number">5</span>,<span class="number">3</span>&#125;;</span><br><span class="line"><span class="function">multiset&lt;<span class="type">int</span>&gt; <span class="title">s</span><span class="params">(a, a + <span class="keyword">sizeof</span>(a) / <span class="keyword">sizeof</span>(<span class="type">int</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’åº</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> e : s)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; e &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; s.<span class="built_in">count</span>(<span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// findæ—¶ï¼Œå¦‚æœæœ‰å¤šä¸ªå€¼ï¼Œè¿”å›ä¸­åºçš„ç¬¬ä¸€ä¸ª</span></span><br><span class="line"><span class="keyword">auto</span> pos = s.<span class="built_in">find</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">while</span> (pos != s.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *pos &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">++pos;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤æ‰€æœ‰çš„3</span></span><br><span class="line">s.<span class="built_in">erase</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> e : s)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; e &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">pos = s.<span class="built_in">find</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span> (pos != s.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">s.<span class="built_in">erase</span>(pos);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> e : s)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; e &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h1 id="map"><a href="#map" class="headerlink" title="map"></a>map</h1><p>é‡è½½çš„æ–¹æ‹¬å·</p><ul><li>mapä¸­æœ‰è¿™ä¸ªkeyï¼Œè¿”å›valueçš„å¼•ç”¨ã€‚ï¼ˆæŸ¥æ‰¾ã€ä¿®æ”¹valueï¼‰</li><li>mapä¸­æ²¡æœ‰è¿™ä¸ªkeyï¼Œä¼šæ’å…¥ä¸€ä¸ªpair(key,V())ï¼Œè¿”å›valueçš„å¼•ç”¨ã€‚ï¼ˆæ’å…¥+ä¿®æ”¹ï¼‰</li></ul><p>å…·ä½“ç‚¹ï¼š</p><ul><li>keyåœ¨mapä¸­ï¼Œè¿”å›pair(key_iterator, false)       è¿™ä¸ª<strong>pair</strong>æ˜¯insertè¿”å›çš„</li><li>keyä¸åœ¨mapä¸­ï¼Œè¿”å›pair(new_key_iterator, true)</li></ul><p>å®ç°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">V&amp; <span class="keyword">operator</span>[](<span class="type">const</span> K&amp; key)</span><br><span class="line">&#123;</span><br><span class="line">pair&lt;iterator,<span class="type">bool</span>&gt;ret=<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(key, <span class="built_in">V</span>()));</span><br><span class="line"><span class="keyword">return</span> (ret.first)-&gt;second;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="mapå’Œsetå°è£…"><a href="#mapå’Œsetå°è£…" class="headerlink" title="mapå’Œsetå°è£…"></a>mapå’Œsetå°è£…</h1><h2 id="è¿­ä»£å™¨ï¼ˆçº¢é»‘æ ‘ï¼‰"><a href="#è¿­ä»£å™¨ï¼ˆçº¢é»‘æ ‘ï¼‰" class="headerlink" title="è¿­ä»£å™¨ï¼ˆçº¢é»‘æ ‘ï¼‰"></a>è¿­ä»£å™¨ï¼ˆçº¢é»‘æ ‘ï¼‰</h2><blockquote><p>è¿­ä»£å™¨çš„beginæ˜¯ä¸­åºçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æœ€å·¦èŠ‚ç‚¹ï¼Œè¿™é‡Œå°†endè®¾ç½®ä¸ºç©ºï¼Œå°è£…é‡ç‚¹æ˜¯++å’Œâ€“çš„é€»è¾‘</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212201523942.png"></p><h3 id="é‡è½½"><a href="#é‡è½½" class="headerlink" title="é‡è½½++"></a>é‡è½½++</h3><ul><li>å³å­æ ‘ä¸ä¸ºç©ºï¼Œ++å°±æ˜¯æ‰¾å³å­æ ‘ä¸­åºç¬¬ä¸€ä¸ªï¼ˆæœ€å·¦èŠ‚ç‚¹ï¼‰</li><li>å³å­æ ‘ä¸ºç©ºï¼Œ++æ‰¾å­©å­ä¸æ˜¯çˆ¶äº²å³çš„é‚£ä¸ªç¥–å…ˆ</li></ul><h3 id="é‡è½½â€“"><a href="#é‡è½½â€“" class="headerlink" title="é‡è½½â€“"></a>é‡è½½â€“</h3><ul><li>å·¦å­æ ‘ä¸ä¸ºç©ºï¼Œâ€“å°±æ˜¯æ‰¾å·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹</li><li>å·¦å­æ ‘ä¸ºç©ºï¼Œâ€“æ‰¾å­©å­ä¸æ˜¯çˆ¶äº²å·¦çš„é‚£ä¸ªç¥–å…ˆ</li></ul><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">Ref</span>, <span class="keyword">class</span> <span class="title class_">Ptr</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">__RBTreeIterator</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">typedef</span> RBTreeNode&lt;T&gt; Node;</span><br><span class="line">    Node *_node;</span><br><span class="line">    <span class="keyword">typedef</span> __RBTreeIterator&lt;T, Ref, Ptr&gt; self;</span><br><span class="line"></span><br><span class="line">    __RBTreeIterator(Node *node) : _node(node)</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    T &amp;<span class="keyword">operator</span>*()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> _node-&gt;_data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Ptr <span class="keyword">operator</span>-&gt;()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> &amp;_node-&gt;_data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    self &amp;<span class="keyword">operator</span>++()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (_node-&gt;_right) <span class="comment">// å³å­æ ‘ä¸ä¸ºç©ºï¼Œå³å­æ ‘çš„æœ€å·¦å°±æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            Node *left = _node-&gt;_right;</span><br><span class="line">            <span class="keyword">while</span> (left-&gt;_left) <span class="comment">// æœ‰ä¸ªé—®é¢˜ï¼Œå½“å‰èŠ‚ç‚¹å¦‚æœæ˜¯25ï¼Œä¸‹ä¸ªèŠ‚ç‚¹æ˜¯27ï¼ŒleftæŒ‡å‘27ï¼Œè¿™æ ·å†™ï¼Œleftå˜æˆç©º</span></span><br><span class="line">            &#123;</span><br><span class="line">                left = left-&gt;_left;</span><br><span class="line">            &#125;</span><br><span class="line">            _node = left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">// å³å­æ ‘ä¸ºç©ºï¼Œæ‰¾å­©å­ä¸æ˜¯çˆ¶äº²å³çš„é‚£ä¸ªç¥–å…ˆ</span></span><br><span class="line">        &#123;</span><br><span class="line">            Node *parent = _node-&gt;_parent;</span><br><span class="line">            Node *cur = _node;</span><br><span class="line">            <span class="keyword">while</span> (parent &amp;&amp; cur == parent-&gt;_right)</span><br><span class="line">            &#123;</span><br><span class="line">                cur = parent;</span><br><span class="line">                parent = parent-&gt;_parent;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            _node = parent;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    self &amp;<span class="keyword">operator</span>--()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (_node-&gt;_left) <span class="comment">// å·¦å­æ ‘ä¸ä¸ºç©ºï¼Œå·¦å­æ ‘çš„æœ€å³å°±æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            Node *right = _node-&gt;_left;</span><br><span class="line">            <span class="keyword">while</span> (right-&gt;_right)</span><br><span class="line">            &#123;</span><br><span class="line">                right = right-&gt;_right;</span><br><span class="line">            &#125;</span><br><span class="line">            _node = right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">// å·¦å­æ ‘ä¸ºç©ºï¼Œæ‰¾å­©å­ä¸æ˜¯çˆ¶äº²å·¦çš„é‚£ä¸ªç¥–å…ˆ</span></span><br><span class="line">        &#123;</span><br><span class="line">            Node *parent = _node-&gt;_parent;</span><br><span class="line">            Node *cur = _node;</span><br><span class="line">            <span class="keyword">while</span> (parent &amp;&amp; cur == parent-&gt;_left)</span><br><span class="line">            &#123;</span><br><span class="line">                cur = parent;</span><br><span class="line">                parent = parent-&gt;_parent;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            _node = parent;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>!=(<span class="type">const</span> self &amp;s) <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> _node != s._node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> self &amp;s) <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> _node == s._node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="mapå°è£…"><a href="#mapå°è£…" class="headerlink" title="mapå°è£…"></a>mapå°è£…</h2><p>mapçš„çº¢é»‘æ ‘ **RBTree&lt;K, pair&lt;K, V&gt;, MapKeyOfT&gt;**ï¼Œç¬¬ä¸€ä¸ªæ¨¡æ¿å‚æ•°æ˜¯keyï¼Œç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°æ˜¯pair</p><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">map</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MapKeyOfT</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="type">const</span> K &amp;<span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> pair&lt;K, V&gt; &amp;kv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> kv.first;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">typename</span> RBTree&lt;K, pair&lt;K, V&gt;, MapKeyOfT&gt;::iterator iterator;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">begin</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="type">_t</span>.<span class="built_in">begin</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">end</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="type">_t</span>.<span class="built_in">end</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pair&lt;iterator, <span class="type">bool</span>&gt; <span class="title">insert</span><span class="params">(<span class="type">const</span> pair&lt;K, V&gt; &amp;kv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="type">_t</span>.<span class="built_in">insert</span>(kv);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">V &amp;<span class="keyword">operator</span>[](<span class="type">const</span> K &amp;key)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="type">_t</span>.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(key, <span class="built_in">V</span>())).first-&gt;second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">RBTree&lt;K, pair&lt;K, V&gt;, MapKeyOfT&gt; <span class="type">_t</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="setå°è£…"><a href="#setå°è£…" class="headerlink" title="setå°è£…"></a>setå°è£…</h2><p>setçš„çº¢é»‘æ ‘ **RBTree&lt;K, K, SetKeyOfT&gt;**ï¼Œç¬¬ä¸€ä¸ªæ¨¡æ¿å‚æ•°æ˜¯keyï¼Œç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°æ˜¯pair</p><h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">set</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SetKeyOfT</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="type">const</span> K &amp;<span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> K &amp;key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> key;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">typename</span> RBTree&lt;K, K, SetKeyOfT&gt;::iterator iterator;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">begin</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="type">_t</span>.<span class="built_in">begin</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">end</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="type">_t</span>.<span class="built_in">end</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pair&lt;iterator, <span class="type">bool</span>&gt; <span class="title">insert</span><span class="params">(<span class="type">const</span> K &amp;k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="type">_t</span>.<span class="built_in">insert</span>(k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">RBTree&lt;K, K, SetKeyOfT&gt; <span class="type">_t</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/CPP/">CPP</category>
      
      
      <category domain="http://example.com/tags/STL/">STL</category>
      
      
      <comments>http://example.com/2022/12/20/CPP/map%E5%92%8Cset/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>çº¢é»‘æ ‘</title>
      <link>http://example.com/2022/12/18/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%A2%E9%BB%91%E6%A0%91/</link>
      <guid>http://example.com/2022/12/18/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%A2%E9%BB%91%E6%A0%91/</guid>
      <pubDate>Sun, 18 Dec 2022 09:19:06 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;çº¢é»‘æ ‘æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#çº¢é»‘æ ‘æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;çº¢é»‘æ ‘æ¦‚å¿µ&quot;&gt;&lt;/a&gt;çº¢é»‘æ ‘æ¦‚å¿µ&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;çº¢é»‘æ ‘ï¼Œæ˜¯ä¸€ç§äºŒå‰æœç´¢æ ‘ï¼Œä½†åœ¨æ¯ä¸ªç»“ç‚¹ä¸Šå¢åŠ ä¸€ä¸ªå­˜å‚¨ä½è¡¨ç¤ºç»“ç‚¹çš„é¢œè‰²ï¼Œå¯ä»¥æ˜¯Redæˆ– Bl</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="çº¢é»‘æ ‘æ¦‚å¿µ"><a href="#çº¢é»‘æ ‘æ¦‚å¿µ" class="headerlink" title="çº¢é»‘æ ‘æ¦‚å¿µ"></a>çº¢é»‘æ ‘æ¦‚å¿µ</h2><blockquote><p>çº¢é»‘æ ‘ï¼Œæ˜¯ä¸€ç§äºŒå‰æœç´¢æ ‘ï¼Œä½†åœ¨æ¯ä¸ªç»“ç‚¹ä¸Šå¢åŠ ä¸€ä¸ªå­˜å‚¨ä½è¡¨ç¤ºç»“ç‚¹çš„é¢œè‰²ï¼Œå¯ä»¥æ˜¯Redæˆ– Blackã€‚ é€šè¿‡å¯¹ä»»ä½•ä¸€æ¡ä»æ ¹åˆ°å¶å­çš„è·¯å¾„ä¸Šå„ä¸ªç»“ç‚¹ç€è‰²æ–¹å¼çš„é™åˆ¶ï¼Œçº¢é»‘æ ‘ç¡®ä¿æ²¡æœ‰ä¸€æ¡è·¯å¾„ä¼šæ¯”å…¶ä»–è·¯å¾„é•¿å‡ºä¿©å€ï¼Œå› è€Œæ˜¯æ¥è¿‘å¹³è¡¡çš„ã€‚</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212141540682.png"></p><h2 id="çº¢é»‘æ ‘çš„æ€§è´¨"><a href="#çº¢é»‘æ ‘çš„æ€§è´¨" class="headerlink" title="çº¢é»‘æ ‘çš„æ€§è´¨"></a>çº¢é»‘æ ‘çš„æ€§è´¨</h2><ol><li>æ¯ä¸ªç»“ç‚¹ä¸æ˜¯çº¢è‰²å°±æ˜¯é»‘è‰²  </li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²çš„  </li><li>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„ä¸¤ä¸ªå­©å­ç»“ç‚¹æ˜¯é»‘è‰²çš„ï¼Œ<strong>æ ‘ä¸­æ²¡æœ‰è¿ç»­çš„çº¢èŠ‚ç‚¹</strong></li><li>å¯¹äºæ¯ä¸ªç»“ç‚¹ï¼Œä»è¯¥ç»“ç‚¹åˆ°å…¶æ‰€æœ‰åä»£å¶ç»“ç‚¹çš„ç®€å•è·¯å¾„ä¸Šï¼Œå‡åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²ç»“ç‚¹  </li><li>æ¯ä¸ªå¶å­ç»“ç‚¹éƒ½æ˜¯é»‘è‰²çš„(æ­¤å¤„çš„å¶å­ç»“ç‚¹æŒ‡çš„æ˜¯ç©ºç»“ç‚¹)</li></ol><p>ä¸ºä»€ä¹ˆæ»¡è¶³ä¸Šé¢çš„æ€§è´¨ï¼Œçº¢é»‘æ ‘å°±èƒ½ä¿è¯ï¼šå…¶æœ€é•¿è·¯å¾„ä¸­èŠ‚ç‚¹ä¸ªæ•°ä¸ä¼šè¶…è¿‡æœ€çŸ­è·¯å¾„ä¸­èŠ‚ç‚¹ä¸ªæ•°çš„ä¸¤å€ï¼Ÿ</p><p>æé™æœ€çŸ­ï¼šå…¨é»‘<br>æé™æœ€é•¿ï¼šä¸€é»‘ä¸€çº¢</p><h2 id="çº¢é»‘æ ‘ç»“æ„"><a href="#çº¢é»‘æ ‘ç»“æ„" class="headerlink" title="çº¢é»‘æ ‘ç»“æ„"></a>çº¢é»‘æ ‘ç»“æ„</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span></span><br><span class="line">&#123;</span><br><span class="line">    RED,</span><br><span class="line">    BLACK</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">RBTreeNode</span></span><br><span class="line">&#123;</span><br><span class="line">    RBTreeNode&lt;K, V&gt; *_parent;</span><br><span class="line">    RBTreeNode&lt;K, V&gt; *_left;</span><br><span class="line">    RBTreeNode&lt;K, V&gt; *_right;</span><br><span class="line">    pair&lt;K, V&gt; _kv;</span><br><span class="line">    Color _col;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">RBTreeNode</span>(<span class="type">const</span> pair&lt;K, V&gt; &amp;kv)</span><br><span class="line">        : _parent(<span class="literal">nullptr</span>), _left(<span class="literal">nullptr</span>), _right(<span class="literal">nullptr</span>), _kv(kv), _col(RED)</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RBTree</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">typedef</span> RBTreeNode&lt;K, V&gt; Node;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> pair&lt;K, V&gt; &amp;kv)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Node *_root = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="çº¢é»‘æ ‘æ“ä½œ"><a href="#çº¢é»‘æ ‘æ“ä½œ" class="headerlink" title="çº¢é»‘æ ‘æ“ä½œ"></a>çº¢é»‘æ ‘æ“ä½œ</h2><h3 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h3><blockquote><p>çº¢é»‘æ ‘çš„å”å”æ˜¯å…³é”®<br>uå­˜åœ¨ä¸”ä¸ºçº¢ï¼Œå˜è‰²ç»§ç»­å‘ä¸Šå¤„ç†<br>uä¸å­˜åœ¨æˆ–å­˜åœ¨ä¸”ä¸ºé»‘ï¼Œæ—‹è½¬ï¼ˆå•æ—‹+åŒæ—‹ï¼‰+å˜è‰²</p></blockquote><p>æƒ…å†µä¸€ï¼š<strong>curä¸ºçº¢ï¼Œparentä¸ºçº¢ï¼Œgrandfatherä¸ºé»‘</strong>ï¼ˆå›ºå®šï¼‰ï¼Œuncleå­˜åœ¨ä¸”ä¸ºçº¢</p><p>å¤„ç†ï¼špã€uå˜é»‘ï¼Œgå˜çº¢ï¼Œç»§ç»­æŠŠgå½“æˆcur</p><ul><li>gä¸æ˜¯æ ¹ï¼Œå¾€ä¸Šç»§ç»­å¤„ç†</li><li>gæ˜¯æ ¹ï¼Œå†æŠŠgå˜æˆé»‘è‰²</li></ul><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212181030394.png"></p><p>æƒ…å†µäºŒï¼š<strong>curä¸ºçº¢ï¼Œparentä¸ºçº¢ï¼Œgrandfatherä¸ºé»‘</strong>ï¼ˆå›ºå®šï¼‰ï¼Œuä¸å­˜åœ¨&#x2F;uå­˜åœ¨ä¸”ä¸ºé»‘ï¼ˆ<strong>å•æ—‹+å˜è‰²</strong>ï¼‰</p><p>å¤„ç†ï¼š</p><ul><li>gå³å•æ—‹</li><li>på˜é»‘ï¼Œgå˜çº¢</li></ul><p>è¯´æ˜ï¼šuncleçš„æƒ…å†µæœ‰ä¸¤ç§</p><ul><li>å¦‚æœuèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆcurä¸€å®šæ˜¯æ–°æ’å…¥èŠ‚ç‚¹ï¼Œå› ä¸ºå¦‚æœcurä¸æ˜¯æ–°æ’å…¥èŠ‚ç‚¹ï¼Œåˆ™curå’Œpä¸€å®šæœ‰ä¸ªèŠ‚ç‚¹é¢œè‰²æ˜¯é»‘è‰²ï¼Œå°±ä¸æ»¡è¶³æ€§è´¨4ï¼šæ¯æ¡è·¯å¾„é»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°ç›¸åŒã€‚</li><li>å¦‚æœuèŠ‚ç‚¹å­˜åœ¨ï¼Œé‚£ä¹ˆcurèŠ‚ç‚¹åŸæ¥çš„é¢œè‰²ä¸€å®šæ˜¯é»‘è‰²çš„ï¼ˆä¿è¯æ€§è´¨4ï¼‰ï¼Œç°åœ¨çœ‹åˆ°å…¶æ˜¯çº¢è‰²çš„åŸå› æ˜¯å› ä¸ºcurçš„å­æ ‘åœ¨è°ƒæ•´çš„è¿‡ç¨‹ä¸­å°†curèŠ‚ç‚¹çš„é¢œè‰²ç”±é»‘è‰²æ”¹ä¸ºçº¢è‰²ã€‚</li></ul><p>uä¸å­˜åœ¨</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212181055273.png"></p><p>uå­˜åœ¨ä¸”ä¸ºé»‘</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212181342714.png"></p><p>æƒ…å†µä¸‰ï¼š<strong>curä¸ºçº¢ï¼Œparentä¸ºçº¢ï¼Œgrandfatherä¸ºé»‘</strong>ï¼ˆå›ºå®šï¼‰ï¼Œuä¸å­˜åœ¨&#x2F;uå­˜åœ¨ä¸”ä¸ºé»‘ï¼ˆ<strong>åŒæ—‹+å˜è‰²</strong>ï¼‰</p><p>uä¸å­˜åœ¨</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212181111798.png"></p><p>uå­˜åœ¨ä¸”ä¸ºé»‘</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212181446123.png"></p><p>æ’å…¥ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> pair&lt;K, V&gt; &amp;kv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (_root == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line">_root = <span class="keyword">new</span> <span class="built_in">Node</span>(kv);</span><br><span class="line">_root-&gt;_col = BLACK;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node *parent = <span class="literal">nullptr</span>;</span><br><span class="line">Node *cur = _root;</span><br><span class="line"><span class="keyword">while</span> (cur)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (cur-&gt;_kv.first &lt; kv.first)</span><br><span class="line">&#123;</span><br><span class="line">parent = cur;</span><br><span class="line">cur = cur-&gt;_right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (cur-&gt;_kv.first &gt; kv.first)</span><br><span class="line">&#123;</span><br><span class="line">parent = cur;</span><br><span class="line">cur = cur-&gt;_left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cur = <span class="keyword">new</span> <span class="built_in">Node</span>(kv);</span><br><span class="line"><span class="comment">// è¿˜å¾—é“¾æ¥ä¸Š</span></span><br><span class="line"><span class="keyword">if</span> (parent-&gt;_kv.first &lt; kv.first)</span><br><span class="line">&#123;</span><br><span class="line">parent-&gt;_right = cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">parent-&gt;_left = cur;</span><br><span class="line">&#125;</span><br><span class="line">cur-&gt;_parent = parent;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾åˆ°äº†åº”è¯¥æ’å…¥çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">while</span> (parent &amp;&amp; parent-&gt;_col == RED) <span class="comment">// parentä¸ä¸ºç©ºå¹¶ä¸”é¢œè‰²ä¸ºçº¢ç»§ç»­å¤„ç†</span></span><br><span class="line">&#123;</span><br><span class="line">Node *grandfather = parent-&gt;_parent;</span><br><span class="line"><span class="comment">// å¦‚æœçˆ¶äº²å­˜åœ¨ä¸”é¢œè‰²ä¸ºçº¢ï¼Œé‚£ä¹ˆç¥–çˆ¶ä¸€å®šå­˜åœ¨é¢œè‰²ä¸ºé»‘</span></span><br><span class="line"><span class="built_in">assert</span>(grandfather);</span><br><span class="line"><span class="built_in">assert</span>(grandfather-&gt;_col = BLACK);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…ˆçœ‹parentæ˜¯grandfatherçš„å·¦è¿˜æ˜¯å³</span></span><br><span class="line"><span class="keyword">if</span> (parent == grandfather-&gt;_left)</span><br><span class="line">&#123;</span><br><span class="line">Node *uncle = grandfather-&gt;_right;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æƒ…å†µ1ã€å”å”å­˜åœ¨ä¸”ä¸ºçº¢ï¼Œå˜è‰²ç»§ç»­å‘ä¸Šå¤„ç†</span></span><br><span class="line"><span class="keyword">if</span> (uncle &amp;&amp; uncle-&gt;_col == RED)</span><br><span class="line">&#123;</span><br><span class="line">parent-&gt;_col = uncle-&gt;_col = BLACK;</span><br><span class="line">grandfather-&gt;_col = RED;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§ç»­å‘ä¸Šå¤„ç†</span></span><br><span class="line">cur = grandfather;</span><br><span class="line">parent = cur-&gt;_parent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="comment">// æƒ…å†µ2ã€3ï¼šuncleä¸å­˜åœ¨  å­˜åœ¨ä¸”ä¸ºé»‘</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// åˆ†ä¸¤ç§</span></span><br><span class="line"><span class="comment">// 1ã€å³å•æ—‹+å˜è‰²</span></span><br><span class="line"><span class="comment">//     g</span></span><br><span class="line"><span class="comment">//   p   u</span></span><br><span class="line"><span class="comment">// c</span></span><br><span class="line"><span class="keyword">if</span> (cur == parent-&gt;_left)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">RotateR</span>(grandfather);</span><br><span class="line">parent-&gt;_col = BLACK;</span><br><span class="line">grandfather-&gt;_col = RED;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å…ˆå¯¹p å·¦å•æ—‹ï¼Œå†å¯¹g å³å•æ—‹ï¼Œæœ€åå˜è‰²</span></span><br><span class="line"><span class="comment">//     g</span></span><br><span class="line"><span class="comment">//   p   u</span></span><br><span class="line"><span class="comment">//     c</span></span><br><span class="line"><span class="built_in">RotateL</span>(parent);</span><br><span class="line"><span class="built_in">RotateR</span>(grandfather);</span><br><span class="line">cur-&gt;_col = BLACK;</span><br><span class="line">grandfather-&gt;_col = RED;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="comment">// parent=grand-&gt;right</span></span><br><span class="line">&#123;</span><br><span class="line">Node *grandfather = parent-&gt;_parent;</span><br><span class="line"><span class="comment">// å¦‚æœçˆ¶äº²å­˜åœ¨ä¸”é¢œè‰²ä¸ºçº¢ï¼Œé‚£ä¹ˆç¥–çˆ¶ä¸€å®šå­˜åœ¨é¢œè‰²ä¸ºé»‘</span></span><br><span class="line"><span class="built_in">assert</span>(grandfather);</span><br><span class="line"><span class="built_in">assert</span>(grandfather-&gt;_col = BLACK);</span><br><span class="line"></span><br><span class="line">Node *uncle = grandfather-&gt;_left;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æƒ…å†µ1ã€å”å”å­˜åœ¨ä¸”ä¸ºçº¢ï¼Œå˜è‰²ç»§ç»­å‘ä¸Šå¤„ç†</span></span><br><span class="line"><span class="keyword">if</span> (uncle &amp;&amp; uncle-&gt;_col == RED)</span><br><span class="line">&#123;</span><br><span class="line">parent-&gt;_col = uncle-&gt;_col = BLACK;</span><br><span class="line">grandfather-&gt;_col = RED;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§ç»­å‘ä¸Šå¤„ç†</span></span><br><span class="line">cur = grandfather;</span><br><span class="line">parent = cur-&gt;_parent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="comment">// æƒ…å†µ2ã€3ï¼šuncleä¸å­˜åœ¨  å­˜åœ¨ä¸”ä¸ºé»‘</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// åˆ†ä¸¤ç§</span></span><br><span class="line"><span class="comment">//     g</span></span><br><span class="line"><span class="comment">//   u   p</span></span><br><span class="line"><span class="comment">//         c</span></span><br><span class="line"><span class="keyword">if</span> (cur == parent-&gt;_right)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">RotateL</span>(grandfather);</span><br><span class="line">parent-&gt;_col = BLACK;</span><br><span class="line">grandfather-&gt;_col = RED;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//     g</span></span><br><span class="line"><span class="comment">//   u   p</span></span><br><span class="line"><span class="comment">//     c</span></span><br><span class="line"><span class="built_in">RotateR</span>(parent);</span><br><span class="line"><span class="built_in">RotateL</span>(grandfather);</span><br><span class="line">cur-&gt;_col = BLACK;</span><br><span class="line">grandfather-&gt;_col = RED;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">_root-&gt;_col = BLACK;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ£€æŸ¥"><a href="#æ£€æŸ¥" class="headerlink" title="æ£€æŸ¥"></a>æ£€æŸ¥</h3><ul><li>æ ¹æ˜¯é»‘è‰²</li><li>æ²¡æœ‰è¿ç»­çš„çº¢èŠ‚ç‚¹</li><li>æ¯æ¡è·¯å¾„çš„é»‘è‰²èŠ‚ç‚¹æ•°é‡ç›¸åŒ</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_balance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (_root == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (_root-&gt;_col == RED)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ ¹èŠ‚ç‚¹ä¸æ˜¯é»‘è‰²&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> bench_mark = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">prev_check</span>(_root, <span class="number">0</span>, bench_mark);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">prev_check</span><span class="params">(Node *root, <span class="type">int</span> bnum, <span class="type">int</span> &amp;bench_mark)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (root == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (bench_mark == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">bench_mark = bnum;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (bench_mark != bnum)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æŸæ¡é»‘è‰²èŠ‚ç‚¹çš„æ•°é‡ä¸ç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (root-&gt;_col == BLACK)</span><br><span class="line">&#123;</span><br><span class="line">++bnum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (root-&gt;_col == RED &amp;&amp; root-&gt;_parent-&gt;_col == RED)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å­˜åœ¨è¿ç»­çš„çº¢è‰²èŠ‚ç‚¹&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">prev_check</span>(root-&gt;_left, bnum, bench_mark) &amp;&amp; <span class="built_in">prev_check</span>(root-&gt;_right, bnum, bench_mark);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">é«˜é˜¶æ•°æ®ç»“æ„</category>
      
      
      <category domain="http://example.com/tags/%E6%90%9C%E7%B4%A2%E6%A0%91/">æœç´¢æ ‘</category>
      
      
      <comments>http://example.com/2022/12/18/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%A2%E9%BB%91%E6%A0%91/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>AVLæ ‘</title>
      <link>http://example.com/2022/12/14/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/AVL%E6%A0%91/</link>
      <guid>http://example.com/2022/12/14/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/AVL%E6%A0%91/</guid>
      <pubDate>Wed, 14 Dec 2022 07:13:27 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;AVLæ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#AVLæ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;AVLæ¦‚å¿µ&quot;&gt;&lt;/a&gt;AVLæ¦‚å¿µ&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å½“å‘äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°ç»“ç‚¹åï¼Œå¦‚æœèƒ½ä¿è¯æ¯ä¸ªç»“ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(éœ€è¦å¯¹</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="AVLæ¦‚å¿µ"><a href="#AVLæ¦‚å¿µ" class="headerlink" title="AVLæ¦‚å¿µ"></a>AVLæ¦‚å¿µ</h2><blockquote><p>å½“å‘äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°ç»“ç‚¹åï¼Œå¦‚æœèƒ½ä¿è¯æ¯ä¸ªç»“ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(éœ€è¦å¯¹æ ‘ä¸­çš„ç»“ç‚¹è¿›è¡Œè°ƒæ•´)ï¼Œå³å¯é™ä½æ ‘çš„é«˜åº¦ï¼Œä»è€Œå‡å°‘å¹³å‡æœç´¢é•¿åº¦ã€‚  </p></blockquote><p>ä¸€æ£µAVLæ ‘æˆ–è€…æ˜¯ç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„äºŒå‰æœç´¢æ ‘ï¼š  </p><ul><li>å®ƒçš„å·¦å³å­æ ‘éƒ½æ˜¯AVLæ ‘  </li><li>å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®(ç®€ç§°å¹³è¡¡å› å­)çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(-1&#x2F;0&#x2F;1)</li></ul><p>å¦‚æœä¸€æ£µäºŒå‰æœç´¢æ ‘æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œå®ƒå°±æ˜¯AVLæ ‘ã€‚å¦‚æœå®ƒæœ‰nä¸ªç»“ç‚¹ï¼Œå…¶é«˜åº¦å¯ä¿æŒåœ¨<br>$O(log_2 n)$ï¼Œæœç´¢æ—¶é—´å¤æ‚åº¦O($log_2 n$)</p><h2 id="AVLæ“ä½œ"><a href="#AVLæ“ä½œ" class="headerlink" title="AVLæ“ä½œ"></a>AVLæ“ä½œ</h2><h3 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> pair&lt;K, V&gt; &amp;kv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (_root == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line">_root = <span class="keyword">new</span> <span class="built_in">Node</span>(kv);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node *parent = <span class="literal">nullptr</span>;</span><br><span class="line">Node *cur = _root;</span><br><span class="line"><span class="keyword">while</span> (cur)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// æ’å…¥å…ˆæ‰¾ä½ç½®</span></span><br><span class="line"><span class="keyword">if</span> (cur-&gt;_kv.first &gt; kv.first)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å…ˆè®°å½•parent</span></span><br><span class="line">parent = cur;</span><br><span class="line"><span class="comment">// æ’å…¥çš„æ¯”å½“å‰å€¼å°ï¼Œå¾€å·¦è¾¹èµ°</span></span><br><span class="line">cur = cur-&gt;_left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (cur-&gt;_kv.first &lt; kv.first)</span><br><span class="line">&#123;</span><br><span class="line">parent = cur;</span><br><span class="line"><span class="comment">// æ’å…¥å€¼æ¯”å·¦è¾¹å¤§ï¼Œå¾€å³è¾¹èµ°</span></span><br><span class="line">cur = cur-&gt;_right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// ç›¸ç­‰çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èµ°åˆ°è¿™é‡Œcurä¸ºç©ºï¼Œè¯´æ˜ï¼Œæ‰¾åˆ°äº†è¯¥æ’å…¥çš„ä½ç½®</span></span><br><span class="line">cur = <span class="keyword">new</span> <span class="built_in">Node</span>(kv);</span><br><span class="line"><span class="comment">// é“¾æ¥</span></span><br><span class="line"><span class="keyword">if</span> (parent-&gt;_kv.first &gt; kv.first)</span><br><span class="line">&#123;</span><br><span class="line">parent-&gt;_left = cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">parent-&gt;_right = cur;</span><br><span class="line">&#125;</span><br><span class="line">cur-&gt;_parent = parent;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥æˆåŠŸã€‚ç°åœ¨éœ€è¦æ§åˆ¶å¹³è¡¡ï¼Œæ›´æ–°å¹³è¡¡å› å­</span></span><br><span class="line"><span class="comment">// å‘ä¸Šæ›´æ–°ç›´åˆ°parentä¸ºç©º</span></span><br><span class="line"><span class="keyword">while</span> (parent)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (parent-&gt;_left == cur)</span><br><span class="line">&#123;</span><br><span class="line">parent-&gt;_bf--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">parent-&gt;_bf++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (parent-&gt;_bf == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// else if(parent-&gt;_bf==1 || parent-&gt;_bf==-1)</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">abs</span>(parent-&gt;_bf) == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// cur = parent;</span></span><br><span class="line"><span class="comment">// parent = parent-&gt;_parent;</span></span><br><span class="line">parent = parent-&gt;_parent;</span><br><span class="line">cur = cur-&gt;_parent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">abs</span>(parent-&gt;_bf) == <span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (parent-&gt;_bf == <span class="number">2</span> &amp;&amp; cur-&gt;_bf == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å·¦å•æ—‹</span></span><br><span class="line"><span class="built_in">RotateL</span>(parent);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (parent-&gt;_bf == <span class="number">-2</span> &amp;&amp; cur-&gt;_bf == <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å³å•æ—‹</span></span><br><span class="line"><span class="built_in">RotateR</span>(parent);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (parent-&gt;_bf == <span class="number">2</span> &amp;&amp; cur-&gt;_bf == <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å³å·¦æ—‹</span></span><br><span class="line"><span class="built_in">RotateRL</span>(parent);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (parent-&gt;_bf == <span class="number">-2</span> &amp;&amp; cur-&gt;_bf == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å·¦å³æ—‹</span></span><br><span class="line"><span class="built_in">RotateLR</span>(parent);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">assert</span>(<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒæ•´å®Œæˆä¹‹åbreak;</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">assert</span>(<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ¤æ–­å¹³è¡¡"><a href="#åˆ¤æ–­å¹³è¡¡" class="headerlink" title="åˆ¤æ–­å¹³è¡¡"></a>åˆ¤æ–­å¹³è¡¡</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_balance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _is_balance(_root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_height</span><span class="params">(Node *root)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (root == <span class="literal">nullptr</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> left = <span class="built_in">get_height</span>(root-&gt;_left);</span><br><span class="line"><span class="type">int</span> right = <span class="built_in">get_height</span>(root-&gt;_right);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">max</span>(left, right) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> _is_balance(Node *root)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (root == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> left = <span class="built_in">get_height</span>(root-&gt;_left);</span><br><span class="line"><span class="type">int</span> right = <span class="built_in">get_height</span>(root-&gt;_right);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> diff = right-left;</span><br><span class="line"><span class="keyword">if</span> (diff != root-&gt;_bf)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; root-&gt;_kv.first &lt;&lt; <span class="string">&quot; å¹³è¡¡å› å­å¼‚å¸¸&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">abs</span>(diff) &lt; <span class="number">2</span> &amp;&amp; _is_balance(root-&gt;_left) &amp;&amp; _is_balance(root-&gt;_right);</span><br><span class="line"><span class="comment">// if(abs(left-right)&gt;=2)</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     return false;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¹³è¡¡å› å­æ›´æ–°"><a href="#å¹³è¡¡å› å­æ›´æ–°" class="headerlink" title="å¹³è¡¡å› å­æ›´æ–°"></a>å¹³è¡¡å› å­æ›´æ–°</h2><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212131300912.png"></p><p>æ›´æ–°å¹³è¡¡å› å­çš„è§„åˆ™</p><ul><li>æ–°å¢åœ¨å³ï¼Œparent-&gt;bf++ï¼Œæ–°å¢åœ¨å·¦ï¼Œparent-&gt;bfâ€“</li><li>æ›´æ–°åï¼Œparent-&gt;bf  &#x3D;&#x3D; 1 or -1, è¯´æ˜parentæ’å…¥å‰çš„å¹³è¡¡å› å­æ˜¯0ï¼Œè¯´æ˜å·¦å³å­æ ‘é«˜åº¦ç›¸ç­‰ï¼Œæ’å…¥åæœ‰ä¸€è¾¹é«˜ï¼Œparenté«˜åº¦å˜äº†ï¼Œéœ€è¦ç»§ç»­å¾€ä¸Šæ›´æ–°</li><li>æ›´æ–°åï¼Œparent-&gt;bf &#x3D;&#x3D; 0ï¼Œè¯´æ˜parentæ’å…¥å‰çš„å¹³è¡¡å› å­æ˜¯1 or -1ï¼Œ è¯´æ˜å·¦å³å­æ ‘ä¸€è¾¹é«˜ä¸€è¾¹ä½ï¼Œæ’å…¥åä¸¤è¾¹ä¸€æ ·é«˜ï¼Œæ’å…¥å¡«ä¸Šäº†çŸ®çš„é‚£è¾¹ï¼Œparentæ‰€åœ¨å­æ ‘é«˜åº¦ä¸å˜ï¼Œä¸éœ€è¦å¾€ä¸Šæ›´æ–°</li><li>æ›´æ–°åï¼Œparent-&gt;bf &#x3D;&#x3D; 2 or -2 ï¼Œè¯´æ˜parentæ’å…¥å‰çš„å¹³è¡¡å› å­æ˜¯1 or -1ï¼Œå·²ç»å¹³è¡¡ä¸´ç•Œå€¼ï¼Œæ’å…¥åå˜æˆ2 or -2ï¼Œæ‰“ç ´å¹³è¡¡ï¼Œparentæ‰€åœ¨å­æ ‘éœ€è¦æ—‹è½¬å¤„ç†</li><li>æ›´æ–°åï¼Œparent-&gt;bf &gt;2 or &lt; -2ï¼Œä¸å¯èƒ½ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è¯´æ˜æ’å…¥å‰å°±ä¸æ˜¯AVLæ ‘ï¼Œéœ€è¦å»æ£€æŸ¥ä¹‹å‰æ“ä½œçš„é—®é¢˜</li></ul><h2 id="æ—‹è½¬çš„åœºæ™¯"><a href="#æ—‹è½¬çš„åœºæ™¯" class="headerlink" title="æ—‹è½¬çš„åœºæ™¯"></a>æ—‹è½¬çš„åœºæ™¯</h2><p>æ—‹è½¬çš„ä»·å€¼å’Œæ„ä¹‰ï¼š</p><ul><li>å¹³è¡¡</li><li>é™ä½é«˜åº¦ï¼ˆé«˜åº¦æ¢å¤åˆ°æ’å…¥ä¹‹å‰çš„æ ·å­ï¼‰</li></ul><h3 id="å·¦å•æ—‹"><a href="#å·¦å•æ—‹" class="headerlink" title="å·¦å•æ—‹"></a>å·¦å•æ—‹</h3><h4 id="æƒ…æ™¯åˆ†æ"><a href="#æƒ…æ™¯åˆ†æ" class="headerlink" title="æƒ…æ™¯åˆ†æ"></a>æƒ…æ™¯åˆ†æ</h4><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212131542366.png"></p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212131543737.png"></p><p>å…·ä½“è¿›è¡Œå·¦æ—‹çš„æ—¶å€™ä¹Ÿè¦åˆ†ä¸¤ç§æƒ…å†µ</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212131544284.png"></p><p>è°ƒæ•´å®Œæˆä¹‹åï¼Œparentçš„å¹³è¡¡å› å­å˜ä¸º0ï¼ŒsubRå˜ä¸ºæ–°çš„æ ¹ï¼ŒåŒæ—¶å¹³è¡¡å› å­ä¹Ÿå˜ä¸º0</p><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·¦å•æ—‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">RotateL</span><span class="params">(Node* parent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å³è¾¹é«˜</span></span><br><span class="line">Node *subR = parent-&gt;_right;</span><br><span class="line">Node *subRL = subR-&gt;_left;</span><br><span class="line"></span><br><span class="line">parent-&gt;_right = subRL;</span><br><span class="line"><span class="keyword">if</span>(subRL)</span><br><span class="line">&#123;</span><br><span class="line">subRL-&gt;_parent = parent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node *ppNode = parent-&gt;_parent;</span><br><span class="line">subR-&gt;_left = parent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(parent==_root)</span><br><span class="line">&#123;</span><br><span class="line">_root = subR;</span><br><span class="line">subR-&gt;_parent = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(ppNode-&gt;_left=parent)</span><br><span class="line">&#123;</span><br><span class="line">ppNode-&gt;_left = subR;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">ppNode-&gt;_right = subR;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">subR-&gt;_parent = ppNode;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å³å•æ—‹"><a href="#å³å•æ—‹" class="headerlink" title="å³å•æ—‹"></a>å³å•æ—‹</h3><h4 id="æƒ…æ™¯åˆ†æâ€˜"><a href="#æƒ…æ™¯åˆ†æâ€˜" class="headerlink" title="æƒ…æ™¯åˆ†æâ€˜"></a>æƒ…æ™¯åˆ†æâ€˜</h4><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212131547708.png"></p><h4 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//å³å•æ—‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">RotateR</span><span class="params">(Node* parent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å·¦è¾¹é«˜</span></span><br><span class="line">Node* subL = parent-&gt;_left;</span><br><span class="line">Node *subLR = subL-&gt;_right;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…ˆè®°å½•ä¸€äº›parentçš„çˆ¶äº²</span></span><br><span class="line">Node *ppNode = parent-&gt;_parent;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®©subLçš„å³ç»™parentçš„å·¦ï¼Œç„¶åparentåšsubLçš„å³ï¼ŒsubLåšæ–°çš„æ ¹</span></span><br><span class="line">parent-&gt;_left = subLR;</span><br><span class="line"><span class="comment">// æ³¨æ„ è¦åˆ¤æ–­subLRæ˜¯ä¸æ˜¯ç©º</span></span><br><span class="line"><span class="keyword">if</span>(subLR)</span><br><span class="line">&#123;</span><br><span class="line">subLR-&gt;_parent = parent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">subL-&gt;_right = parent;</span><br><span class="line">parent-&gt;_parent = subL;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œä¹Ÿæ³¨æ„,</span></span><br><span class="line"><span class="keyword">if</span>(_root==parent)</span><br><span class="line">&#123;</span><br><span class="line">_root = subL;</span><br><span class="line">subL-&gt;_parent = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (ppNode-&gt;_left == parent)</span><br><span class="line">&#123;</span><br><span class="line">ppNode-&gt;_left = subL;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">ppNode-&gt;_right = subL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç„¶åè®©suLçš„parentæŒ‡å‘ppNode</span></span><br><span class="line">subL-&gt;_parent = ppNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subL-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">parent-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å·¦å³æ—‹"><a href="#å·¦å³æ—‹" class="headerlink" title="å·¦å³æ—‹"></a>å·¦å³æ—‹</h3><h4 id="æƒ…æ™¯åˆ†æ-1"><a href="#æƒ…æ™¯åˆ†æ-1" class="headerlink" title="æƒ…æ™¯åˆ†æ"></a>æƒ…æ™¯åˆ†æ</h4><p>ä¸‰ç§æƒ…å†µï¼š</p><p>1ã€åœ¨bæ–°å¢ï¼Œé‚£ä¹ˆ60èŠ‚ç‚¹çš„å¹³è¡¡å› å­æ˜¯-1<br>2ã€åœ¨cæ–°å¢ï¼Œé‚£ä¹ˆ60èŠ‚ç‚¹çš„å¹³è¡¡å› å­æ˜¯1</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212131548304.png"></p><p>3ã€subLRå°±æ˜¯æ–°å¢</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212131609243.png"></p><h4 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·¦å³æ—‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">RotateLR</span><span class="params">(Node *parent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Node *subL = parent-&gt;_left;</span><br><span class="line">Node *subLR = subL-&gt;_right;</span><br><span class="line"><span class="type">int</span> bf = subLR-&gt;_bf;</span><br><span class="line"></span><br><span class="line"><span class="built_in">RotateL</span>(parent-&gt;_left);</span><br><span class="line"><span class="built_in">RotateR</span>(parent);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼ŒsubLRå˜æˆæ–°çš„æ ¹</span></span><br><span class="line">subLR-&gt;_bf = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (bf == <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// åœ¨bæ’å…¥</span></span><br><span class="line">parent-&gt;_bf = <span class="number">1</span>;</span><br><span class="line">subL-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (bf == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// subLRå°±æ˜¯æ–°å¢</span></span><br><span class="line">parent-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">subL-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (bf == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// åœ¨cæ’å…¥</span></span><br><span class="line">parent-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">subL-&gt;_bf = <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">assert</span>(<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å³å·¦æ—‹"><a href="#å³å·¦æ—‹" class="headerlink" title="å³å·¦æ—‹"></a>å³å·¦æ—‹</h3><h4 id="æƒ…æ™¯åˆ†æ-2"><a href="#æƒ…æ™¯åˆ†æ-2" class="headerlink" title="æƒ…æ™¯åˆ†æ"></a>æƒ…æ™¯åˆ†æ</h4><p>1ã€æ–°å¢åœ¨bï¼Œé‚£ä¹ˆsubRLå¹³è¡¡å› å­å˜æˆ-1ï¼Œå…ˆå¯¹subRè¿›è¡Œå³æ—‹ï¼Œç„¶åå†å¯¹parentè¿›è¡Œå·¦æ—‹ï¼Œè°ƒæ•´å®Œæˆä¹‹åï¼ŒsubRLä¹Ÿå°±æ˜¯70èŠ‚ç‚¹å˜æˆäº†æ ¹ï¼Œå¹³è¡¡å› å­ä¸º0ï¼Œparentçš„å¹³è¡¡å› å­ä¸º0ï¼ŒsubRå°±æ˜¯90çš„å¹³è¡¡å› å­å˜æˆ1.</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212132009280.png"></p><p>2ã€æ–°å¢åœ¨cï¼Œé‚£ä¹ˆsubRLå¹³è¡¡å› å­å˜æˆ1ï¼Œå…ˆå¯¹subRè¿›è¡Œå³æ—‹ï¼Œç„¶åå†å¯¹parentè¿›è¡Œå·¦æ—‹ï¼Œè°ƒæ•´å®Œæˆä¹‹åï¼ŒsubRLä¹Ÿå°±æ˜¯70èŠ‚ç‚¹å˜æˆäº†æ ¹ï¼Œå¹³è¡¡å› å­ä¸º0ï¼Œparentçš„å¹³è¡¡å› å­ä¸º-1ï¼ŒsubRå°±æ˜¯90çš„å¹³è¡¡å› å­å˜æˆ0ã€‚</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212131937234.png"></p><p>3ã€æ–°å¢å°±æ˜¯subRLï¼ŒsubRLå¹³è¡¡å› å­ä¸º0ï¼Œè°ƒæ•´å®Œæˆåéƒ½æ˜¯0</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212131937964.png"></p><h4 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å³å·¦æ—‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">RotateRL</span><span class="params">(Node *parent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Node *subR = parent-&gt;_right;</span><br><span class="line">Node *subRL = subR-&gt;_left;</span><br><span class="line"><span class="type">int</span> bf = subRL-&gt;_bf;</span><br><span class="line"></span><br><span class="line"><span class="built_in">RotateR</span>(subR);</span><br><span class="line"><span class="built_in">RotateL</span>(parent);</span><br><span class="line"></span><br><span class="line">subRL-&gt;_bf = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­subRLçš„å¹³è¡¡å› å­æ˜¯å¤šå°‘</span></span><br><span class="line"><span class="keyword">if</span> (bf == <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">subR-&gt;_bf = <span class="number">1</span>;</span><br><span class="line">parent-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (bf == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">parent-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">subR-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (bf == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">parent-&gt;_bf = <span class="number">-1</span>;</span><br><span class="line">subR-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">assert</span>(<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">é«˜é˜¶æ•°æ®ç»“æ„</category>
      
      
      <category domain="http://example.com/tags/%E6%90%9C%E7%B4%A2%E6%A0%91/">æœç´¢æ ‘</category>
      
      
      <comments>http://example.com/2022/12/14/%E9%AB%98%E9%98%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/AVL%E6%A0%91/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>606. æ ¹æ®äºŒå‰æ ‘åˆ›å»ºå­—ç¬¦ä¸²</title>
      <link>http://example.com/2022/12/10/%E5%8A%9B%E6%89%A3/%E6%A0%B9%E6%8D%AE%E4%BA%8C%E5%8F%89%E6%A0%91%E5%88%9B%E5%BB%BA%E5%AD%97%E7%AC%A6%E4%B8%B2/</link>
      <guid>http://example.com/2022/12/10/%E5%8A%9B%E6%89%A3/%E6%A0%B9%E6%8D%AE%E4%BA%8C%E5%8F%89%E6%A0%91%E5%88%9B%E5%BB%BA%E5%AD%97%E7%AC%A6%E4%B8%B2/</guid>
      <pubDate>Sat, 10 Dec 2022 10:53:52 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;a href=&quot;https://leetcode.cn/problems/construct-string-from-binary-tree/&quot;&gt;606. æ ¹æ®äºŒå‰æ ‘åˆ›å»ºå­—ç¬¦ä¸²&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;æˆ‘çš„é”™è¯¯æ€è·¯&quot;&gt;&lt;a href=&quot;#æˆ‘çš„é”™è¯¯æ€è·¯&quot; class</description>
        
      
      
      
      <content:encoded><![CDATA[<p><a href="https://leetcode.cn/problems/construct-string-from-binary-tree/">606. æ ¹æ®äºŒå‰æ ‘åˆ›å»ºå­—ç¬¦ä¸²</a></p><h2 id="æˆ‘çš„é”™è¯¯æ€è·¯"><a href="#æˆ‘çš„é”™è¯¯æ€è·¯" class="headerlink" title="æˆ‘çš„é”™è¯¯æ€è·¯"></a>æˆ‘çš„é”™è¯¯æ€è·¯</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">tree2str</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        string str;</span><br><span class="line">        <span class="built_in">fun</span>(root, str);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">fun</span><span class="params">(TreeNode* root, string &amp;s)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// s+=&#x27;)&#x27;;</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        s+=(root-&gt;val+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(root-&gt;left==<span class="literal">nullptr</span>&amp;&amp;root-&gt;right)</span><br><span class="line">        &#123;</span><br><span class="line">            s+=<span class="string">&quot;()&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(root-&gt;left==<span class="literal">nullptr</span>&amp;&amp;root-&gt;right==<span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            s+=<span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            s+=<span class="string">&#x27;(&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">fun</span>(root-&gt;left, s);</span><br><span class="line">        <span class="keyword">if</span>(root-&gt;left&amp;&amp;root-&gt;right)</span><br><span class="line">        &#123;</span><br><span class="line">            s+=<span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">            s+=<span class="string">&#x27;(&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(root-&gt;left==<span class="literal">nullptr</span>&amp;&amp;root-&gt;right)</span><br><span class="line">        &#123;</span><br><span class="line">            s+=<span class="string">&#x27;(&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(root-&gt;left&amp;&amp;root-&gt;right==<span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            s+=<span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">fun</span>(root-&gt;right,s);</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æ­£ç¡®æ€è·¯"><a href="#æ­£ç¡®æ€è·¯" class="headerlink" title="æ­£ç¡®æ€è·¯"></a>æ­£ç¡®æ€è·¯</h2><p>è¿˜æ˜¯å‰åºéå†ï¼Œæ ¹ã€å·¦ã€å³<br>ä½†æ˜¯è¦æ±‚å°†å·¦å­æ ‘å’Œå³å­æ ‘æ‹¬èµ·æ¥<br>å¦‚æœä¸å…ˆè€ƒè™‘å»æ‹¬å·çš„è¯</p><ul><li>å…ˆåŠ å½“å‰èŠ‚ç‚¹çš„å€¼</li><li>åŠ  (</li><li>é€’å½’å¤„ç†å·¦å­æ ‘</li><li>åŠ  ï¼‰</li><li>åŠ  (</li><li>é€’å½’å¤„ç†å³å­æ ‘</li><li>åŠ  )</li></ul><p>è€ƒè™‘å»æ‹¬å·</p><ul><li>å·¦å³å­æ ‘éƒ½ä¸ºç©ºï¼Œéƒ½å»æ‰</li><li>å³ä¸ºç©ºï¼Œå»æ‰å³</li><li>å·¦ä¸ºç©ºï¼Œå³ä¸ä¸ºç©ºï¼Œä¸èƒ½å»æ‰å·¦</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">tree2str</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        string str;</span><br><span class="line">        <span class="built_in">fun</span>(root, str);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">fun</span><span class="params">(TreeNode* root, string &amp;s)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        s+=<span class="built_in">to_string</span>(root-&gt;val);</span><br><span class="line">        <span class="comment">//å·¦è¾¹ä¸ä¸ºç©ºï¼Œæˆ–è€…å·¦è¾¹ä¸ºç©ºä½†æ˜¯å³è¾¹ä¸ä¸ºç©ºï¼Œä¿ç•™</span></span><br><span class="line">        <span class="keyword">if</span>(root-&gt;left||root-&gt;right)</span><br><span class="line">        &#123;</span><br><span class="line">            s+=<span class="string">&#x27;(&#x27;</span>;</span><br><span class="line">            <span class="built_in">fun</span>(root-&gt;left, s);</span><br><span class="line">            s+=<span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(root-&gt;right)</span><br><span class="line">        &#123;</span><br><span class="line">            s+=<span class="string">&#x27;(&#x27;</span>;</span><br><span class="line">            <span class="built_in">fun</span>(root-&gt;right,s);</span><br><span class="line">            s+=<span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¦ä¸€ç§å†™æ³•"><a href="#å¦ä¸€ç§å†™æ³•" class="headerlink" title="å¦ä¸€ç§å†™æ³•"></a>å¦ä¸€ç§å†™æ³•</h2><p>è¿™ç§å†™æ³•æœ‰ä¸ªä¸å¥½çš„ç‚¹ï¼Œä¼ å€¼è¿”å›æ¶ˆè€—ç¨å¾®æœ‰ç‚¹å¤šã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">tree2str</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">string</span>();</span><br><span class="line"></span><br><span class="line">        string str;</span><br><span class="line">        str+=<span class="built_in">to_string</span>(root-&gt;val);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å·¦è¾¹ä¸ä¸ºç©ºï¼Œæˆ–è€…å³è¾¹ä¸ä¸ºç©ºå·¦è¾¹ä¸ºç©ºï¼Œéƒ½éœ€è¦åŠ æ‹¬å·</span></span><br><span class="line">        <span class="keyword">if</span>(root-&gt;left||root-&gt;right)</span><br><span class="line">        &#123;</span><br><span class="line">            str+=<span class="string">&#x27;(&#x27;</span>;</span><br><span class="line">            str+=<span class="built_in">tree2str</span>(root-&gt;left);</span><br><span class="line">            str+=<span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(root-&gt;right)</span><br><span class="line">        &#123;</span><br><span class="line">            str+=<span class="string">&#x27;(&#x27;</span>;</span><br><span class="line">            str+=<span class="built_in">tree2str</span>(root-&gt;right);</span><br><span class="line">            str+=<span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E5%8A%9B%E6%89%A3/">åŠ›æ‰£</category>
      
      
      <category domain="http://example.com/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/">äºŒå‰æ ‘</category>
      
      
      <comments>http://example.com/2022/12/10/%E5%8A%9B%E6%89%A3/%E6%A0%B9%E6%8D%AE%E4%BA%8C%E5%8F%89%E6%A0%91%E5%88%9B%E5%BB%BA%E5%AD%97%E7%AC%A6%E4%B8%B2/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</title>
      <link>http://example.com/2022/12/10/%E5%8A%9B%E6%89%A3/236.%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88/</link>
      <guid>http://example.com/2022/12/10/%E5%8A%9B%E6%89%A3/236.%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88/</guid>
      <pubDate>Sat, 10 Dec 2022 10:53:52 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;a href=&quot;https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/&quot;&gt;236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tong-1306822</description>
        
      
      
      
      <content:encoded><![CDATA[<p><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/">236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</a></p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212092158148.png"></p><h2 id="è§£æ³•1"><a href="#è§£æ³•1" class="headerlink" title="è§£æ³•1"></a>è§£æ³•1</h2><p>è§„åˆ™ï¼š</p><p>ä¸€ä¸ªæ˜¯å·¦å­æ ‘ä¸­çš„èŠ‚ç‚¹ï¼Œä¸€ä¸ªæ˜¯å³å­æ ‘ä¸­çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä»–å°±æ˜¯æœ€è¿‘çš„å…¬å…±ç¥–å…ˆ</p><p>è¿™ç§åšæ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(H*N)ï¼Œå¦‚æœå…¬å…±ç¥–å…ˆåœ¨å¾ˆä¸‹é¢ï¼Œæ—¶é—´å¤æ‚åº¦å°±æ¯”è¾ƒé«˜</p><p>æ¯æ¬¡æ‰¾é«˜åº¦æ¬¡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">Find</span><span class="params">(TreeNode* root, TreeNode* x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">/*if(root==x)</span></span><br><span class="line"><span class="comment">            return true;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        if(Find(root-&gt;left, x))</span></span><br><span class="line"><span class="comment">            return true;</span></span><br><span class="line"><span class="comment">        if(Find(root-&gt;right,x))</span></span><br><span class="line"><span class="comment">            return true;</span></span><br><span class="line"><span class="comment">        return false;*/</span></span><br><span class="line">    <span class="comment">//æ›´å¥½çš„å†™æ³•</span></span><br><span class="line">    retur root==x||<span class="built_in">Find</span>(root-&gt;left,x)||<span class="built_in">Find</span>(root-&gt;right,x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">TreeNode* <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode* root, TreeNode* p, TreeNode* q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(root==p||root==q)</span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        </span><br><span class="line">        <span class="type">bool</span> pInLeft,pInRight,qInLeft,qInRight;</span><br><span class="line">        pInLeft=<span class="built_in">Find</span>(root-&gt;left, p);</span><br><span class="line">        pInRight=!pInLeft;</span><br><span class="line"></span><br><span class="line">        qInLeft=<span class="built_in">Find</span>(root-&gt;left, q);</span><br><span class="line">        qInRight=!qInLeft;</span><br><span class="line">        <span class="comment">//1ã€ä¸€ä¸ªåœ¨å·¦ä¸€ä¸ªåœ¨å³ï¼Œrootå°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ</span></span><br><span class="line">        <span class="comment">//2ã€éƒ½åœ¨å·¦ï¼Œé€’å½’å»å·¦å­æ ‘æ‰¾</span></span><br><span class="line">        <span class="comment">//3ã€éƒ½åœ¨å³ï¼Œé€’å½’å»å³å­æ ‘æ‰¾</span></span><br><span class="line">        <span class="keyword">if</span>((pInLeft&amp;&amp;qInRight)||(pInRight&amp;&amp;qInLeft))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(pInLeft&amp;&amp;qInLeft)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">lowestCommonAncestor</span>(root-&gt;left, p, q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(pInRight&amp;&amp;qInRight)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">lowestCommonAncestor</span>(root-&gt;right, p, q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;pp</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è§£æ³•2"><a href="#è§£æ³•2" class="headerlink" title="è§£æ³•2"></a>è§£æ³•2</h2><p>ç”¨æ ˆè®°å½•è·¯å¾„ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)</p><p>æ‰¾6çš„è·¯å¾„</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212101302061.png"></p><p>æ‰¾4çš„è·¯å¾„</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212101302985.png"></p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202212101237692.png"></p><p>æˆ‘è‡ªå·±å†™çš„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">find</span><span class="params">(TreeNode* root, TreeNode* x, stack&lt;TreeNode*&gt;&amp; s)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        s.<span class="built_in">push</span>(root);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(root==x)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">find</span>(root-&gt;left, x, s))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">find</span>(root-&gt;right, x ,s))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        s.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">TreeNode* <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode* root, TreeNode* p, TreeNode* q)</span> </span>&#123;</span><br><span class="line">        stack&lt;TreeNode*&gt;s1;</span><br><span class="line">        stack&lt;TreeNode*&gt;s2;</span><br><span class="line">        <span class="built_in">find</span>(root,p, s1);</span><br><span class="line">        <span class="built_in">find</span>(root,q, s2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// while(!s1.empty())</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     cout&lt;&lt;s1.top()-&gt;val&lt;&lt;&quot; &quot;;</span></span><br><span class="line">        <span class="comment">//     s1.pop();</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// cout&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// while(!s2.empty())</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     cout&lt;&lt;s2.top()-&gt;val&lt;&lt;&quot; &quot;;</span></span><br><span class="line">        <span class="comment">//     s2.pop();</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// cout&lt;&lt;endl;</span></span><br><span class="line">        <span class="keyword">while</span>(!s1.<span class="built_in">empty</span>()&amp;&amp;!s2.<span class="built_in">empty</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(s1.<span class="built_in">top</span>()==s2.<span class="built_in">top</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> s2.<span class="built_in">top</span>();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(s1.<span class="built_in">size</span>()==s2.<span class="built_in">size</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                s1.<span class="built_in">pop</span>();</span><br><span class="line">                s2.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s1.<span class="built_in">size</span>()&gt;s2.<span class="built_in">size</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                s1.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                s2.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E5%8A%9B%E6%89%A3/">åŠ›æ‰£</category>
      
      
      <category domain="http://example.com/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/">äºŒå‰æ ‘</category>
      
      
      <comments>http://example.com/2022/12/10/%E5%8A%9B%E6%89%A3/236.%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
