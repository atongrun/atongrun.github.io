<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>孙菜菜</title>
    <link>http://example.com/</link>
    
    <atom:link href="http://example.com/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>万千不如意，睡得着就过得去</description>
    <pubDate>Sun, 29 Jan 2023 14:33:12 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>高并发内存池-序章</title>
      <link>http://example.com/2023/01/29/%E9%A1%B9%E7%9B%AE/%E9%AB%98%E5%B9%B6%E5%8F%91%E5%86%85%E5%AD%98%E6%B1%A0/%E9%AB%98%E5%B9%B6%E5%8F%91%E5%86%85%E5%AD%98%E6%B1%A0-%E5%BA%8F%E7%AB%A0/</link>
      <guid>http://example.com/2023/01/29/%E9%A1%B9%E7%9B%AE/%E9%AB%98%E5%B9%B6%E5%8F%91%E5%86%85%E5%AD%98%E6%B1%A0/%E9%AB%98%E5%B9%B6%E5%8F%91%E5%86%85%E5%AD%98%E6%B1%A0-%E5%BA%8F%E7%AB%A0/</guid>
      <pubDate>Sun, 29 Jan 2023 14:10:09 GMT</pubDate>
      
        
        
      <description>&lt;h1 id=&quot;项目介绍&quot;&gt;&lt;a href=&quot;#项目介绍&quot; class=&quot;headerlink&quot; title=&quot;项目介绍&quot;&gt;&lt;/a&gt;项目介绍&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;这是一个CPP实现的高并发内存池，原型是谷歌的tcmalloc开源项目（Thread-Cachin</description>
        
      
      
      
      <content:encoded><![CDATA[<h1 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h1><blockquote><p>这是一个CPP实现的高并发内存池，原型是谷歌的tcmalloc开源项目（Thread-Caching Malloc），既线程缓存的malloc，实现了高效的多线程内存管理，用于替代系统的内存分配相关函数（malloc、free）</p></blockquote><h1 id="前置需求"><a href="#前置需求" class="headerlink" title="前置需求"></a>前置需求</h1><ul><li>C&#x2F;C++</li><li>数据结构（链表、哈希桶）</li><li>操作系统内存管理</li><li>单例模式</li><li>多线程</li><li>互斥锁</li><li>….</li></ul><h1 id="内存池简介"><a href="#内存池简介" class="headerlink" title="内存池简介"></a>内存池简介</h1><h2 id="1、池化技术"><a href="#1、池化技术" class="headerlink" title="1、池化技术"></a>1、池化技术</h2><blockquote><p>池化技术就是程序先向系统申请过量的资源，然后自己管理，能大大提升程序的运行效率</p></blockquote><p>常见的池化技术场景</p><ul><li>内存池</li><li>线程池</li><li>对象池</li><li>…..</li></ul><h2 id="2、内存池"><a href="#2、内存池" class="headerlink" title="2、内存池"></a>2、内存池</h2><blockquote><p>内存池是指程序预先从操作系统申请一块足够大内存，此后，当程序中需要申请内存的时候，不是直接向操作系统申请，而是直接从内存池中获取；同理，当程序释放内存的时候，并不真正将内存返回给操作系统，而是返回内存池。当程序退出(或者特定时间)时，内存池才将之前申请的内存真正释放。</p></blockquote><h2 id="3、内存池解决的问题"><a href="#3、内存池解决的问题" class="headerlink" title="3、内存池解决的问题"></a>3、内存池解决的问题</h2><h3 id="内存碎片问题"><a href="#内存碎片问题" class="headerlink" title="内存碎片问题"></a>内存碎片问题</h3><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301292200227.png" alt="内存碎片.png"></p><h3 id="效率问题"><a href="#效率问题" class="headerlink" title="效率问题"></a>效率问题</h3><blockquote><p>向操作系统频繁申请内存消耗较大，内存池能够避免让程序频繁的向系统申请和释放内存</p></blockquote><h2 id="4、malloc"><a href="#4、malloc" class="headerlink" title="4、malloc"></a>4、malloc</h2><blockquote><p>C&#x2F;C++中动态申请内存都是通过malloc去申请内存，malloc本质也是一个内存池，原理如下：</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301292206748.png" alt="image.png"></p>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E9%A1%B9%E7%9B%AE/">项目</category>
      
      <category domain="http://example.com/categories/%E9%A1%B9%E7%9B%AE/%E9%AB%98%E5%B9%B6%E5%8F%91%E5%86%85%E5%AD%98%E6%B1%A0/">高并发内存池</category>
      
      
      
      <comments>http://example.com/2023/01/29/%E9%A1%B9%E7%9B%AE/%E9%AB%98%E5%B9%B6%E5%8F%91%E5%86%85%E5%AD%98%E6%B1%A0/%E9%AB%98%E5%B9%B6%E5%8F%91%E5%86%85%E5%AD%98%E6%B1%A0-%E5%BA%8F%E7%AB%A0/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>课程推荐-理财篇</title>
      <link>http://example.com/2023/01/28/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/%E8%AF%BE%E7%A8%8B%E6%8E%A8%E8%8D%90-%E7%90%86%E8%B4%A2/</link>
      <guid>http://example.com/2023/01/28/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/%E8%AF%BE%E7%A8%8B%E6%8E%A8%E8%8D%90-%E7%90%86%E8%B4%A2/</guid>
      <pubDate>Sat, 28 Jan 2023 06:30:51 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;Python数据分析实战：构建股票量化交易系统&quot;&gt;&lt;a href=&quot;#Python数据分析实战：构建股票量化交易系统&quot; class=&quot;headerlink&quot; title=&quot;Python数据分析实战：构建股票量化交易系统&quot;&gt;&lt;/a&gt;Python数据分析实战：构建股票</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="Python数据分析实战：构建股票量化交易系统"><a href="#Python数据分析实战：构建股票量化交易系统" class="headerlink" title="Python数据分析实战：构建股票量化交易系统"></a>Python数据分析实战：构建股票量化交易系统</h2><ul><li>深入理解量化交易的本质、发展、优势、意义和过程；</li><li>掌握Python基础工具的使用方法，如Python、Pandas、Numpy、Matplotlib、TA-Lib、Tushare、statsmodels、pyecharts等；</li><li>掌握Python数据分析和挖掘的过程和技能；</li><li>掌握Python实现经典金融技术指标的方法，如K线、均线、成交量、MACD、KDJ等。</li><li>掌握使用Matplotlib、pyecharts可视化方法绘制出股票行情分析界面以捕捉个股动向，为大家呈现不同的显示效果。</li><li>掌握Python实现应用数学中经典算法，如线性回归、蒙特卡洛、随机漫步、凯利公式等；</li><li>掌握如何从数据特征值中实现常用的量化交易策略，如择时、选股、风险控制、度量、仓位管理等。通过学习我们可以制定量化交易策略以及度量策略效果，应用交易策略来辅助股票交易。</li></ul><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301281429616.jpg" alt="D90C09628F49A26EBEF4BB6308B6BE05.jpg"></p>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E6%8E%A8%E8%8D%90/">推荐</category>
      
      <category domain="http://example.com/categories/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/">课程</category>
      
      
      
      <comments>http://example.com/2023/01/28/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/%E8%AF%BE%E7%A8%8B%E6%8E%A8%E8%8D%90-%E7%90%86%E8%B4%A2/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>课程推荐-后端篇</title>
      <link>http://example.com/2023/01/28/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/%E8%AF%BE%E7%A8%8B%E6%8E%A8%E8%8D%90-%E5%90%8E%E7%AB%AF/</link>
      <guid>http://example.com/2023/01/28/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/%E8%AF%BE%E7%A8%8B%E6%8E%A8%E8%8D%90-%E5%90%8E%E7%AB%AF/</guid>
      <pubDate>Sat, 28 Jan 2023 06:24:48 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;课程1-MySQL-性能调优必知必会&quot;&gt;&lt;a href=&quot;#课程1-MySQL-性能调优必知必会&quot; class=&quot;headerlink&quot; title=&quot;课程1 - MySQL 性能调优必知必会&quot;&gt;&lt;/a&gt;课程1 - MySQL 性能调优必知必会&lt;/h2&gt;&lt;ul&gt;
</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="课程1-MySQL-性能调优必知必会"><a href="#课程1-MySQL-性能调优必知必会" class="headerlink" title="课程1 - MySQL 性能调优必知必会"></a>课程1 - MySQL 性能调优必知必会</h2><ul><li>数据架构方面：主要讲述 MySQL 主从架构之间可能遇到的问题，以及主从架构如何提高稳定性。</li><li>存储引擎方面：主要讲述 MySQL 数据库中的 InnoDB 存储引擎的底层运行原理以及 InnoDB 存储引擎的优化。</li><li>SQL 方面：主要讲述 SQL 的实现原理，例如，order by（排序）的实现原理及优化、join（连表）的实现原理及优化等，更有一条 SQL 从执行的开始到结束都经历过哪些模块，在使用过程中优化的最佳实践等。</li><li>MySQL 数据安全：主要讲述在 MySQL 数据库中如何防止数据丢失，以及数据库中各种日志的作用。</li></ul><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301281428630.jpg" alt="11E0A633507956E663577A8E64791E6D.jpg"></p><h2 id="课程2-Python-异步网络编程实战"><a href="#课程2-Python-异步网络编程实战" class="headerlink" title="课程2 - Python 异步网络编程实战"></a>课程2 - Python 异步网络编程实战</h2><ul><li>从事 Python Web 开发的技术人员</li><li>对 Python 感兴趣，想了解 Python 异步实现过程</li><li>在开发过程中，想使用异步方式提升 Python 性能的开发者</li></ul><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301281428056.jpg" alt="E6D29224C353AC28FC76ABD734A8C32C.jpg"></p><h2 id="课程3-深入理解-TCP-协议：从原理到实战"><a href="#课程3-深入理解-TCP-协议：从原理到实战" class="headerlink" title="课程3 - 深入理解 TCP 协议：从原理到实战"></a>课程3 - 深入理解 TCP 协议：从原理到实战</h2><ul><li>学习 TCP 协议多次从入门到放弃的同学</li><li>想通过实验方法学习 TCP 协议的同学</li><li>对于前端工程师，学完可以快速辨识开发中遇到的问题是前端还是后端的问题，对页面性能优化有更深的理解</li><li>对于后端工程师，TCP 协议可以说是必须要掌握的技能，学完能从协议和网络层面快速分析后端诸多分布式组件的问题，对提升接口的性能和分布式系统的可靠性会更有把握</li><li>对于测试工程师，对网络协议理解的越深，越能发现隐藏很深的 Bug，对性能测试、压力测试会有更深的理解</li></ul><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301281428061.jpg" alt="0F0CD1421DF22FE9CFBA9E317E9E2B45.jpg"></p><h2 id="课程4-开发者必备的-Docker-实践指南"><a href="#课程4-开发者必备的-Docker-实践指南" class="headerlink" title="课程4 - 开发者必备的 Docker 实践指南"></a>课程4 - 开发者必备的 Docker 实践指南</h2><ul><li>虚拟化技术、容器技术和 Docker 的背景</li><li>Docker 运行环境的搭建</li><li>镜像与容器的管理与使用</li><li>自定义镜像和共享镜像</li><li>通过 Compose 编排应用</li><li>多个使用 Docker 搭建运行环境的实践</li></ul><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301281429087.jpg" alt="35C46EF4C2C8A41F16DC9C43DE6CA8B6.jpg"></p>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E6%8E%A8%E8%8D%90/">推荐</category>
      
      <category domain="http://example.com/categories/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/">课程</category>
      
      
      
      <comments>http://example.com/2023/01/28/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/%E8%AF%BE%E7%A8%8B%E6%8E%A8%E8%8D%90-%E5%90%8E%E7%AB%AF/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>课程推荐-工具篇</title>
      <link>http://example.com/2023/01/28/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/%E8%AF%BE%E7%A8%8B%E6%8E%A8%E8%8D%90-%E5%B7%A5%E5%85%B7/</link>
      <guid>http://example.com/2023/01/28/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/%E8%AF%BE%E7%A8%8B%E6%8E%A8%E8%8D%90-%E5%B7%A5%E5%85%B7/</guid>
      <pubDate>Sat, 28 Jan 2023 05:48:26 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;Git&quot;&gt;&lt;a href=&quot;#Git&quot; class=&quot;headerlink&quot; title=&quot;Git&quot;&gt;&lt;/a&gt;Git&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;随着这几年 GitHub 的流行，Git 已经是一个程序员逃不过的技术项，但很多人却纷纷倒在了学习它的路上</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><blockquote><p>随着这几年 GitHub 的流行，Git 已经是一个程序员逃不过的技术项，但很多人却纷纷倒在了学习它的路上。而且，出于工作原因而不得不用 Git 的人，有不少在工作中对 Git 也是能不用就不用，生怕哪个命令用错就把公司的代码库毁掉了🙈。而那些对 Git 掌握得比较好的少数人，就像团队中的神一样，在同事遇到 Git 相关的问题的时候用各种风骚操作来拯救队友于水火。</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301281415936.jpg" alt="E1AEE84870D5BE5C2DA57BDF00F1C3D8.jpg"></p><h2 id="Nvim"><a href="#Nvim" class="headerlink" title="Nvim"></a>Nvim</h2><ul><li>适合有一点 VIM 基础的使用者（至少知道怎么编辑文件和退出 VIM 😁）。</li><li>有程序开发基础，有可以访问 Github 的网络环境，想要提升开发效率与开发体验的程序开发人员。</li><li>想要系统学习 Neovim 配置，却被网上零散过时的 VIM 配置教程困扰的同学们。</li></ul><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301281416032.jpg" alt="01893C4AF74549C45EEC1A4DC4D77019.jpg"></p>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E6%8E%A8%E8%8D%90/">推荐</category>
      
      <category domain="http://example.com/categories/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/">课程</category>
      
      
      
      <comments>http://example.com/2023/01/28/%E6%8E%A8%E8%8D%90/%E8%AF%BE%E7%A8%8B/%E8%AF%BE%E7%A8%8B%E6%8E%A8%E8%8D%90-%E5%B7%A5%E5%85%B7/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>这里有个彩蛋哦</title>
      <link>http://example.com/2023/01/24/%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96/%E5%BD%A9%E8%9B%8B/</link>
      <guid>http://example.com/2023/01/24/%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96/%E5%BD%A9%E8%9B%8B/</guid>
      <pubDate>Tue, 24 Jan 2023 09:24:40 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;正在建设中……&lt;/p&gt;
</description>
        
      
      
      
      <content:encoded><![CDATA[<p>正在建设中……</p>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E5%B7%A5%E5%85%B7/">工具</category>
      
      <category domain="http://example.com/categories/%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96/">其他</category>
      
      
      
      <comments>http://example.com/2023/01/24/%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96/%E5%BD%A9%E8%9B%8B/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>如何最快的打造一个帅气好看可以装逼的github主页呢？</title>
      <link>http://example.com/2023/01/22/%E5%B7%A5%E5%85%B7/github/github%E4%B8%BB%E9%A1%B5/</link>
      <guid>http://example.com/2023/01/22/%E5%B7%A5%E5%85%B7/github/github%E4%B8%BB%E9%A1%B5/</guid>
      <pubDate>Sat, 21 Jan 2023 17:24:58 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;strong&gt;先说结论：抄别人好看的主页&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;PS：自己去搞得话，并不一定好弄，而且不如人家的好看，当然我也在后边放了几个小网站，想自己丰富的可以去看看。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;好看主页推</description>
        
      
      
      
      <content:encoded><![CDATA[<p><strong>先说结论：抄别人好看的主页</strong></p><blockquote><p>PS：自己去搞得话，并不一定好弄，而且不如人家的好看，当然我也在后边放了几个小网站，想自己丰富的可以去看看。</p></blockquote><h2 id="好看主页推荐"><a href="#好看主页推荐" class="headerlink" title="好看主页推荐"></a>好看主页推荐</h2><blockquote><p>这边推荐四个主页，后边会说复制主页的方法，github的主页是需要建立一个与github的ID同名的仓库的，然后里面放README.md的文档，这个文档内容就会被展示到主页。</p></blockquote><p><a href="https://github.com/blinkfox">blinkfox (闪烁之狐 (blinkfox)) (github.com)</a></p><p>推荐指数：⭐⭐⭐⭐</p><p>好看指数：⭐⭐</p><p>复制难易：⭐⭐</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301210027622.png"></p><p><a href="https://github.com/L1cardo">L1cardo (Licardo) (github.com)</a></p><p>推荐指数：⭐⭐⭐⭐⭐</p><p>好看指数：⭐⭐⭐⭐</p><p>复制难易：⭐⭐⭐⭐</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301210034952.png"></p><p><a href="https://github.com/appotry">appotry (夜法之书(appotry)) (github.com)</a></p><p>推荐指数：⭐⭐</p><p>好看指数：⭐⭐⭐</p><p>复制难易：⭐⭐⭐⭐</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301210041636.png"></p><p><a href="https://github.com/atongrun">atongrun (孙菜菜) (github.com)</a></p><p>推荐指数：⭐⭐⭐</p><p>好看指数：⭐⭐</p><p>复制难易：⭐⭐</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301210049534.png"></p><blockquote><p>前三个是大佬的，最后一个是我的，我是抄的大佬的，这里就没必要放太多了，因为大差不差，大家可以自己打开github主页下载文档，当然方便点也可以关注我的公众号【孙菜菜】，回复【帅气主页】，获取源文件。</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301210119032.png"></p><h2 id="如何复制"><a href="#如何复制" class="headerlink" title="如何复制"></a>如何复制</h2><h3 id="步骤1、建立同名仓库"><a href="#步骤1、建立同名仓库" class="headerlink" title="步骤1、建立同名仓库"></a>步骤1、建立同名仓库</h3><p>在github上建立一个同名的仓库，这里就不多说，看主页美化的大家应该都会的，然后对README.md文档操作就OK了</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301211357638.png"></p><h2 id="步骤2、Copy大法"><a href="#步骤2、Copy大法" class="headerlink" title="步骤2、Copy大法"></a>步骤2、Copy大法</h2><blockquote><p>具体步骤如下，记得一定用markdown编辑器弄最好，容易显示出实时的效果，可以按照自己的喜欢酌情删减哦，或者几个文档混合copy</p></blockquote><ul><li>打开四个文件夹的任何一个（你喜欢的）</li><li>将所有内容放到你本地仓库</li><li>打开README.md文档，将里面的github用户名换成自己的</li><li>将各种链接换成自己的</li><li>git add -&gt; git commit -&gt; git push 大功告成</li></ul><blockquote><p>当然，如果大家嫌麻烦怕改链接名错误啥的话，同样关注【孙菜菜】公众号，回复【帅气主页】，获取源文件。里面我还放了个详细的说明，以我的github主页为例子，放到word里面了，将所有需要修改的地方都加上了高亮和注释。</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301211354492.png"></p><blockquote><p>欢迎关注哦。</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301211358151.gif"></p><h2 id="网站推荐"><a href="#网站推荐" class="headerlink" title="网站推荐"></a>网站推荐</h2><blockquote><p>如果大家非得说不喜欢直接copy别人的，那么你就可以看看下面几个网站了，这下边是我觉得最常见的github主页的几个部件了，如果你要配的比较好看的话，可能还需要懂一点HTML语言哦</p></blockquote><p><a href="https://www.webfx.com/tools/emoji-cheat-sheet/">各种表情</a></p><blockquote><p>在这里有许多 emoji 的符号代码，你可以直接将它们用到 README 中。</p></blockquote><p>实用指数：⭐⭐⭐</p><p><a href="https://github.com/anuraghazra/github-readme-stats/blob/master/docs/readme_cn.md">统计卡片</a></p><blockquote><p>这个就是github主页最常见的小部件了</p></blockquote><p>实用指数：⭐⭐⭐⭐</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301210105140.png"></p><p><a href="https://shields.io/">丰富标签</a></p><blockquote><p>无论是项目还是github主页出现频率超高的小标签，非常的实用。</p></blockquote><p>实用指数：⭐⭐⭐⭐⭐</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301210106308.png"></p><p><a href="https://github.com/ryo-ma/github-profile-trophy/blob/master/README.md">各种奖杯</a></p><blockquote><p>这个也是和卡片差不多的统计相关的小部件，出现频率也挺高</p></blockquote><p>实用指数：⭐⭐⭐</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301211413651.png"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>有一个好看的github主页挺好玩主要的可以装逼，希望大家都能搞一个令自己满意的主页。</p>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E5%B7%A5%E5%85%B7/">工具</category>
      
      <category domain="http://example.com/categories/%E5%B7%A5%E5%85%B7/github/">github</category>
      
      
      
      <comments>http://example.com/2023/01/22/%E5%B7%A5%E5%85%B7/github/github%E4%B8%BB%E9%A1%B5/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>白嫖零花钱</title>
      <link>http://example.com/2023/01/19/%E6%8E%A8%E8%8D%90/%E4%B8%9A%E4%BD%99/%E9%9B%B6%E8%8A%B1%E9%92%B1/</link>
      <guid>http://example.com/2023/01/19/%E6%8E%A8%E8%8D%90/%E4%B8%9A%E4%BD%99/%E9%9B%B6%E8%8A%B1%E9%92%B1/</guid>
      <pubDate>Thu, 19 Jan 2023 05:55:58 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;1、微信扫码&quot;&gt;&lt;a href=&quot;#1、微信扫码&quot; class=&quot;headerlink&quot; title=&quot;1、微信扫码&quot;&gt;&lt;/a&gt;1、微信扫码&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://tong-1306822294.cos.ap-beijing.myqcl</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="1、微信扫码"><a href="#1、微信扫码" class="headerlink" title="1、微信扫码"></a>1、微信扫码</h2><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301191345034.jpg"></p><h2 id="2、搜索关键词"><a href="#2、搜索关键词" class="headerlink" title="2、搜索关键词"></a>2、搜索关键词</h2><p>进去搜索以下关键词，选择价格最高做即可，基本上3分钟左右就Ok了</p><blockquote><p>下面都是我自己做过的。</p><p>主要是时间短、价格高，当然还有很多，大家可以自己找找。</p><p>迫于懒的原因，没找多少，都是想改善一下自己的生活的时候，才做的</p></blockquote><table><thead><tr><th align="center">序号</th><th align="center">名称</th><th align="center">价格</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">凹音短视频</td><td align="center">7+</td></tr><tr><td align="center">2</td><td align="center">云闪付</td><td align="center">15+</td></tr><tr><td align="center">3</td><td align="center">小招推客</td><td align="center">10+</td></tr><tr><td align="center">4</td><td align="center">快步</td><td align="center">5+</td></tr><tr><td align="center">5</td><td align="center">云缴费</td><td align="center">5+</td></tr><tr><td align="center">6</td><td align="center">星云视界</td><td align="center">4+</td></tr><tr><td align="center">7</td><td align="center">香蕉乐玩</td><td align="center">12+</td></tr><tr><td align="center">8</td><td align="center">游易赚</td><td align="center">10+</td></tr><tr><td align="center">9</td><td align="center">豆豆趣玩</td><td align="center">7+</td></tr><tr><td align="center">10</td><td align="center">辅助注册</td><td align="center">8+</td></tr><tr><td align="center">11</td><td align="center">哔哩哔哩</td><td align="center">5+</td></tr><tr><td align="center">12</td><td align="center">btd</td><td align="center">11+</td></tr><tr><td align="center">13</td><td align="center">淘宝特价版</td><td align="center">7+</td></tr><tr><td align="center">14</td><td align="center">京东白条</td><td align="center">20+</td></tr><tr><td align="center">15</td><td align="center">冲顶鸭</td><td align="center">10+</td></tr><tr><td align="center">16</td><td align="center">一淘</td><td align="center">5+</td></tr><tr><td align="center">17</td><td align="center">梨漩</td><td align="center">7+</td></tr><tr><td align="center">18</td><td align="center">京东极速版</td><td align="center">6+</td></tr><tr><td align="center">19</td><td align="center">聚跑</td><td align="center">6+</td></tr><tr><td align="center">20</td><td align="center">萌犬世界</td><td align="center">12+</td></tr><tr><td align="center">21</td><td align="center">AITD</td><td align="center">10+</td></tr><tr><td align="center">22</td><td align="center">小蚂蚁</td><td align="center">7+</td></tr><tr><td align="center">23</td><td align="center">陌嗨短视频</td><td align="center">8+</td></tr><tr><td align="center">24</td><td align="center">未完</td><td align="center">待更新。。。</td></tr></tbody></table><p><strong>Ps：也可以看网页版的，点击阅读原文即可，网页版的更新快一点。只做简单的，勿被标题迷惑，提交截图超过2个的，直接放弃即可，因为太繁琐了</strong></p>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/%E6%8E%A8%E8%8D%90/">推荐</category>
      
      <category domain="http://example.com/categories/%E6%8E%A8%E8%8D%90/%E4%B8%9A%E4%BD%99/">业余</category>
      
      
      
      <comments>http://example.com/2023/01/19/%E6%8E%A8%E8%8D%90/%E4%B8%9A%E4%BD%99/%E9%9B%B6%E8%8A%B1%E9%92%B1/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>C++的IO流</title>
      <link>http://example.com/2023/01/15/CPP/C++IO%E6%B5%81/</link>
      <guid>http://example.com/2023/01/15/CPP/C++IO%E6%B5%81/</guid>
      <pubDate>Sun, 15 Jan 2023 14:39:00 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;C-IO体系&quot;&gt;&lt;a href=&quot;#C-IO体系&quot; class=&quot;headerlink&quot; title=&quot;C++IO体系&quot;&gt;&lt;/a&gt;C++IO体系&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ostream&amp;#x2F;istream 更好的支持自定义类型对象的流插入和流</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="C-IO体系"><a href="#C-IO体系" class="headerlink" title="C++IO体系"></a>C++IO体系</h2><blockquote><p>ostream&#x2F;istream 更好的支持自定义类型对象的流插入和流提取，自定义类型，可以自己重载，控制流提取和流插入的方式</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301151704396.png"></p><h2 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h2><h3 id="c输入"><a href="#c输入" class="headerlink" title="c输入"></a>c输入</h3><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301151712088.png"></p><h3 id="c-输入"><a href="#c-输入" class="headerlink" title="c++输入"></a>c++输入</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cin &gt;&gt; str;</span><br><span class="line"></span><br><span class="line">year = <span class="built_in">stoi</span>(str.<span class="built_in">substr</span>(<span class="number">0</span>, <span class="number">4</span>));</span><br><span class="line">mon = <span class="built_in">stoi</span>(str.<span class="built_in">substr</span>(<span class="number">4</span>, <span class="number">2</span>));</span><br><span class="line">day = <span class="built_in">stoi</span>(str.<span class="built_in">substr</span>(<span class="number">6</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301151724063.png"></p><p>ctrl+z+换行结束输入</p><blockquote><p>为什么可以用上边循环的写法呢？是因为cin的对象可以隐式类型转换成bool（调用operator bool），在流里面读到错误或者结束标志的时候，会返回false</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301151732425.png"></p><p>举例详解：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">A</span>(<span class="type">int</span> a)  <span class="comment">//这里前边加上explict，下边 A aa1 = 1 代码就编不过去了</span></span><br><span class="line">:_a(a)</span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">operator</span> <span class="title">int</span><span class="params">()</span> <span class="comment">//如果这个前边加explict那么int i = aa1也不行，但是可以强转</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> _a;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 内置类型 转换成自定义类型</span></span><br><span class="line">A aa1 = <span class="number">1</span>; <span class="comment">// 隐式类型转换 用1构造A临时对象，再拷贝构造aa1，优化后直接1构造aa1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义类型 转换成内置类型</span></span><br><span class="line"><span class="type">int</span> i = aa1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="文件IO"><a href="#文件IO" class="headerlink" title="文件IO"></a>文件IO</h2><blockquote><p>C++根据文件内容的数据格式分为二进制文件和文本文件</p></blockquote><p>定义一个文件流对象  </p><ul><li>ifstream ifile(只输入用)  </li><li>ofstream ofile(只输出用)  </li><li>fstream iofile(既输入又输出用)</li></ul><p>看一个例子：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">ifstream <span class="title">ifs</span><span class="params">(<span class="string">&quot;test.cpp&quot;</span>)</span></span>;</span><br><span class="line"><span class="type">char</span> ch = ifs.<span class="built_in">get</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (ifs)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; ch;</span><br><span class="line">ch = ifs.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>这段程序可以读取当前文件的内容</code></pre><p>C++特有的优点：</p><p>对内置的类型</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301151927497.png"></p><p>对自定义的类型：</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301151934569.png"></p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301151935531.png"></p><pre><code>前题是自定义的类型支持流提取，这样对自定义类型的读写通过流的方式就非常的方便了。</code></pre><blockquote><p>两种读写方式对比</p></blockquote><ol><li>二进制读写：在内存如何存储，就如何写到磁盘文件<br> 优点：快<br> 缺点：写出去内容看不见</li><li>文本读写：对象数据序列化字符串写出来，读回来也是字符串，反序列化转成对象数据<br> 优点：可以看见写出去是什么<br> 缺点：存在一个转换过程，要慢一些</li></ol><h3 id="二进制读写"><a href="#二进制读写" class="headerlink" title="二进制读写"></a>二进制读写</h3><blockquote><p>一个关于二进制读取string类型的坑</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ServerInfo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//char _address[32];</span></span><br><span class="line">string _address; <span class="comment">// 换成string 类型</span></span><br><span class="line"><span class="type">int</span> _port;  <span class="comment">// 100</span></span><br><span class="line"></span><br><span class="line">Date _date;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ConfigManager</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">ConfigManager</span>(<span class="type">const</span> <span class="type">char</span>* filename = <span class="string">&quot;server.config&quot;</span>)</span><br><span class="line">:_filename(filename)</span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">WriteBin</span><span class="params">(<span class="type">const</span> ServerInfo&amp; info)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">ofstream <span class="title">ofs</span><span class="params">(_filename, ios_base::out | ios_base::binary)</span></span>;</span><br><span class="line">ofs.<span class="built_in">write</span>((<span class="type">char</span>*)&amp;info, <span class="built_in">sizeof</span>(info));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ReadBin</span><span class="params">(ServerInfo&amp; info)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">ifstream <span class="title">ifs</span><span class="params">(_filename, ios_base::in | ios_base::binary)</span></span>;</span><br><span class="line">ifs.<span class="built_in">read</span>((<span class="type">char</span>*)&amp;info, <span class="built_in">sizeof</span>(info));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string _filename; <span class="comment">// 配置文件</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 二进制写出去</span></span><br><span class="line"><span class="comment">//ServerInfo winfo = &#123; &quot;127.0.0.1&quot;, 888 &#125;;</span></span><br><span class="line"><span class="comment">//ServerInfo winfo = &#123; &quot;https://legacy.cplusplus.com/reference/istream/istream/read/&quot;, 888 &#125;;</span></span><br><span class="line"><span class="comment">//ConfigManager cm;</span></span><br><span class="line"><span class="comment">//cm.WriteBin(winfo);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 二进制的读</span></span><br><span class="line">ServerInfo rinfo;</span><br><span class="line">ConfigManager cm;</span><br><span class="line">cm.<span class="built_in">ReadBin</span>(rinfo);</span><br><span class="line">cout &lt;&lt; rinfo._address &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; rinfo._port &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>情况1、写入字符较短时</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301152109265.png"></p><pre><code>结果虽然读取成功，但是程序出现了问题，退出码不是0</code></pre><blockquote><p>情况2、写入字符串较长时</p></blockquote><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301152111415.png"></p><pre><code>可以看到address直接读取报错</code></pre><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301152116889.png"></p><p>原因是当address比较长的时候，string对象，字符串会存在堆里面，ptr指针指向这个字符串，但是写到文件里面的时候，写的不是堆的内存，而是ptr这个地址。</p><p>二进制读写，不大适合有在堆上申请数据类型的</p><h3 id="文本读写"><a href="#文本读写" class="headerlink" title="文本读写"></a>文本读写</h3><p>下边是文本读写的方式：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*void WriteText(const ServerInfo&amp; info)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">ofstream ofs(_filename, ios_base::out);</span></span><br><span class="line"><span class="comment">ofs.write(info._address.c_str(), info._address.size());</span></span><br><span class="line"><span class="comment">ofs.put(&#x27;\n&#x27;);</span></span><br><span class="line"><span class="comment">const string str = to_string(info._port);</span></span><br><span class="line"><span class="comment">ofs.write(str.c_str(), str.size());</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">void ReadText(ServerInfo&amp; info)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">ifstream ifs(_filename, ios_base::in | ios_base::binary);</span></span><br><span class="line"><span class="comment">char buff[128];</span></span><br><span class="line"><span class="comment">ifs.getline(buff, 128);</span></span><br><span class="line"><span class="comment">info._address = buff;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">ifs.getline(buff, 128);</span></span><br><span class="line"><span class="comment">info._port = stoi(buff);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">WriteText</span><span class="params">(<span class="type">const</span> ServerInfo&amp; info)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">ofstream <span class="title">ofs</span><span class="params">(_filename, ios_base::out)</span></span>;</span><br><span class="line">ofs &lt;&lt; info._address &lt;&lt; endl;</span><br><span class="line">ofs &lt;&lt; info._port &lt;&lt; endl;</span><br><span class="line">ofs &lt;&lt; info._date &lt;&lt; endl; <span class="comment">//这里是日期类的对象</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ReadText</span><span class="params">(ServerInfo&amp; info)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">ifstream <span class="title">ifs</span><span class="params">(_filename, ios_base::in | ios_base::binary)</span></span>;</span><br><span class="line">ifs &gt;&gt; info._address &gt;&gt; info._port &gt;&gt; info._date;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="stringstream"><a href="#stringstream" class="headerlink" title="stringstream"></a>stringstream</h2><p>一个例子：</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301152147060.png"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ChatInfo</span></span><br><span class="line">&#123;</span><br><span class="line">string _name; <span class="comment">// 名字</span></span><br><span class="line"><span class="type">int</span> _id;      <span class="comment">// id</span></span><br><span class="line">Date _date;   <span class="comment">// 时间</span></span><br><span class="line">string _msg;  <span class="comment">// 聊天信息</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 序列化</span></span><br><span class="line">ChatInfo winfo = &#123; <span class="string">&quot;张三&quot;</span>, <span class="number">135246</span>, &#123; <span class="number">2022</span>, <span class="number">4</span>, <span class="number">10</span> &#125;, <span class="string">&quot;晚上一起看电影吧&quot;</span> &#125;;</span><br><span class="line"><span class="comment">//ostringstream oss;</span></span><br><span class="line">stringstream oss;</span><br><span class="line">oss &lt;&lt; winfo._name &lt;&lt; endl;</span><br><span class="line">oss &lt;&lt; winfo._id &lt;&lt; endl;</span><br><span class="line">oss &lt;&lt; winfo._date &lt;&lt; endl;</span><br><span class="line">oss &lt;&lt; winfo._msg &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str = oss.<span class="built_in">str</span>();</span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 网络传输str，另一端接收到了字符串串信息数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 反序列化</span></span><br><span class="line">ChatInfo rInfo;</span><br><span class="line"><span class="comment">//istringstream iss(str);</span></span><br><span class="line"><span class="function">stringstream <span class="title">iss</span><span class="params">(str)</span></span>;</span><br><span class="line">iss &gt;&gt; rInfo._name;</span><br><span class="line">iss &gt;&gt; rInfo._id;</span><br><span class="line">iss &gt;&gt; rInfo._date;</span><br><span class="line">iss &gt;&gt; rInfo._msg;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; rInfo._date &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; rInfo._name &lt;&lt; <span class="string">&quot;[&quot;</span> &lt;&lt; rInfo._id &lt;&lt; <span class="string">&quot;]:&gt;&quot;</span> &lt;&lt; rInfo._msg &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>分割字符串：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">stringstream <span class="title">ss</span><span class="params">(<span class="string">&quot;sad ad fsd&quot;</span>)</span></span>;</span><br><span class="line">string s;</span><br><span class="line"><span class="keyword">while</span> (ss &gt;&gt; s)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/CPP/">CPP</category>
      
      
      
      <comments>http://example.com/2023/01/15/CPP/C++IO%E6%B5%81/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>C++类型转换</title>
      <link>http://example.com/2023/01/15/CPP/c++%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</link>
      <guid>http://example.com/2023/01/15/CPP/c++%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</guid>
      <pubDate>Sun, 15 Jan 2023 08:41:49 GMT</pubDate>
      
        
        
      <description>&lt;h1 id=&quot;C语言中的类型转换&quot;&gt;&lt;a href=&quot;#C语言中的类型转换&quot; class=&quot;headerlink&quot; title=&quot;C语言中的类型转换&quot;&gt;&lt;/a&gt;C语言中的类型转换&lt;/h1&gt;&lt;h2 id=&quot;隐式类型转换&quot;&gt;&lt;a href=&quot;#隐式类型转换&quot; class=&quot;head</description>
        
      
      
      
      <content:encoded><![CDATA[<h1 id="C语言中的类型转换"><a href="#C语言中的类型转换" class="headerlink" title="C语言中的类型转换"></a>C语言中的类型转换</h1><h2 id="隐式类型转换"><a href="#隐式类型转换" class="headerlink" title="隐式类型转换"></a>隐式类型转换</h2><blockquote><p>隐式类型转换（意义相近的类型）</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 隐式类型转换(意义相近的类型)</span></span><br><span class="line"><span class="type">double</span> d = i;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d, %.2f\n&quot;</span>, i, d);</span><br></pre></td></tr></table></figure><h2 id="显示类型转换"><a href="#显示类型转换" class="headerlink" title="显示类型转换"></a>显示类型转换</h2><blockquote><p>显示的强制类型转换(意义不相近的类型，值转换后有意义)</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span>* p = &amp;a;</span><br><span class="line"></span><br><span class="line"><span class="comment">//int address = p; //这样没法隐式类型转换会报错</span></span><br><span class="line"><span class="type">int</span> address = (<span class="type">int</span>)p; <span class="comment">//强制类型转换没问题</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%x, %d\n&quot;</span>, p, address);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="C-强制类型转换"><a href="#C-强制类型转换" class="headerlink" title="C++强制类型转换"></a>C++强制类型转换</h1><blockquote><p>c++也支持c的类型转换，但是c++为了加强类型转换的可视性，引入了四种命名的强制类型转换操作符</p></blockquote><h2 id="static-cast"><a href="#static-cast" class="headerlink" title="static_cast"></a>static_cast</h2><blockquote><p>这个就像c中的隐式类型转换，只不过显示的写了出来，static_cast用于非多态类型的转换（静态转换），编译器隐式执行的任何类型转换都可用static_cast，但它不能用于两个不相关的类型进行转换</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">double</span> d = <span class="number">12.34</span>;</span><br><span class="line"><span class="type">int</span> a = <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;(d);</span><br><span class="line">cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="reinterpret-cast"><a href="#reinterpret-cast" class="headerlink" title="reinterpret_cast"></a>reinterpret_cast</h2><blockquote><p>类似于c的显示强制类型的转换，一般用于将一种类型转换为另一种不同的类型</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span>* p = <span class="built_in">reinterpret_cast</span>&lt;<span class="type">int</span>*&gt;(a);  <span class="comment">// 把int 强转为 int*</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="const-cast"><a href="#const-cast" class="headerlink" title="const_cast"></a>const_cast</h2><blockquote><p>能够删除变量的const属性</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="comment">//int* p = const_cast&lt;int*&gt;(&amp;a);</span></span><br><span class="line"><span class="type">int</span>* p = (<span class="type">int</span>*)&amp;a; <span class="comment">// c的那一套也可以</span></span><br><span class="line">*p = <span class="number">3</span>;</span><br><span class="line">cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是上边的代码会出现一个问题，就是运行结果显示，a还是2，不过当我们打开监视窗口可以看到a其实已经被改成3了，这是什么原因呢？</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301131530309.png"></p><pre><code>a被const修饰，编译器以为不会被修改，所以加载到寄存器，虽然内存中已经被改了但是寄存器里面的还是2，cout的时候直接去寄存器读，所以打印出来是2</code></pre><p>我们可以在定义a变量的时候加上 volatile关键字，这样编译器处理的时候就会去内存中读取数据，这样，运行结果就变成3 3了。</p><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301131535214.png"></p><p>注：</p><ol><li>兼容c隐式类型转换和强制类型转换</li><li>期望不要再用了，最好用规范的cpp显示强制类型转换</li><li>static_cast（隐式类型转换）、reinterpret_cast、const_cast（强制类型转换）</li></ol><h2 id="dynamic-cast"><a href="#dynamic-cast" class="headerlink" title="dynamic_cast"></a>dynamic_cast</h2><blockquote><p> 用于将一个父类对象的指针或者引用转换为子类的指针或者引用（动态转换）</p></blockquote><p><strong>向上转型</strong>：子类对象指针&#x2F;引用-&gt;父类指针&#x2F;引用  （不需要转换，赋值兼容规则）<br><strong>向下转型</strong>：父类对象指针&#x2F;引用-&gt;子类指针&#x2F;引用  （用dynamic_cast转型是安全的）</p><ol><li>dynamic_cast只能用于父类含有虚函数的类</li><li>dynamic_cast会先检查是否能转换成功，能成功则转换，不能则返回0</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> _a = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> _b = <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A*指针pa有可能指向父类，有可能指向子类</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun</span><span class="params">(A* pa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 如果pa是指向子类，那么可以转换，转换表达式返回正确的地址</span></span><br><span class="line"><span class="comment">// 如果pa是指向父类，那么不能转换，转换表达式返回nullptr</span></span><br><span class="line">B* pb = <span class="built_in">dynamic_cast</span>&lt;B*&gt;(pa); <span class="comment">// 安全的</span></span><br><span class="line"><span class="comment">//B* pb = (B*)pa;             // 不安全</span></span><br><span class="line"><span class="keyword">if</span> (pb)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;转换成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">pb-&gt;_a++;</span><br><span class="line">pb-&gt;_b++;</span><br><span class="line">cout &lt;&lt; pb-&gt;_a &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; pb-&gt;_b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;转换失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">pa-&gt;_a++;</span><br><span class="line">cout &lt;&lt; pa-&gt;_a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">A aa;</span><br><span class="line"><span class="comment">// 父类对象无论如何都是不允许转换成子类对象的</span></span><br><span class="line"><span class="comment">/*B bb = dynamic_cast&lt;B&gt;(aa);</span></span><br><span class="line"><span class="comment">B bb = (B)aa;*/</span></span><br><span class="line">B bb;</span><br><span class="line"></span><br><span class="line"><span class="built_in">fun</span>(&amp;aa);</span><br><span class="line"><span class="built_in">fun</span>(&amp;bb);</span><br><span class="line"><span class="comment">//fun(nullptr); 转换失败并且报错</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>细节部分：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> _a1 = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> _a2 = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A1, <span class="keyword">public</span> A2</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> _b = <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">B bb; <span class="comment">//定义子类对象</span></span><br><span class="line">A1* ptr1 = &amp;bb;</span><br><span class="line">A2* ptr2 = &amp;bb;</span><br><span class="line">cout &lt;&lt; ptr1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; ptr2 &lt;&lt; endl &lt;&lt; endl;  <span class="comment">//这两个地址是不同的</span></span><br><span class="line"></span><br><span class="line">B* pb1 = (B*)ptr1;</span><br><span class="line">B* pb2 = (B*)ptr2;</span><br><span class="line">cout &lt;&lt; pb1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; pb2 &lt;&lt; endl &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">B* pb3 = <span class="built_in">dynamic_cast</span>&lt;B*&gt;(ptr1);</span><br><span class="line">B* pb4 = <span class="built_in">dynamic_cast</span>&lt;B*&gt;(ptr2);</span><br><span class="line">cout &lt;&lt; pb3 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; pb4 &lt;&lt; endl &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://tong-1306822294.cos.ap-beijing.myqcloud.com/tong/picture/202301151637140.png"></p><pre><code>可以看到，强转成子类指针，和dynamic_cast都可以将指针位置偏移到头上</code></pre><p>总结：</p><ul><li>如果有个子类的对象，将地址传给一个函数，函数形参是父类的指针，那么函数内部可以将这个指针重新安全的转成子类的指针。</li><li>普通的父类指针强转成子类可能有风险，如果父类的指针本来指向的对象就是父类的对象，那么将这个指针转换成子类，会有越界的风险。</li></ul><h1 id="RTTI"><a href="#RTTI" class="headerlink" title="RTTI"></a>RTTI</h1><blockquote><p>Run-time Type identification ：运行时类型识别</p></blockquote><p>c++通过以下方式支持RTTI</p><ol><li>typeid运算符   (获取对象类型的字符串)</li><li>dynamic_cast运算符 （识别父类的指针是指向父类对象还是子类对象）</li><li>decltype   （推导一个对象类型，这个类型可以用来定义另一个对象）</li></ol>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/CPP/">CPP</category>
      
      
      
      <comments>http://example.com/2023/01/15/CPP/c++%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>继承</title>
      <link>http://example.com/2023/01/14/CPP/%E7%BB%A7%E6%89%BF/</link>
      <guid>http://example.com/2023/01/14/CPP/%E7%BB%A7%E6%89%BF/</guid>
      <pubDate>Sat, 14 Jan 2023 12:38:23 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;继承的概念及定义&quot;&gt;&lt;a href=&quot;#继承的概念及定义&quot; class=&quot;headerlink&quot; title=&quot;继承的概念及定义&quot;&gt;&lt;/a&gt;继承的概念及定义&lt;/h2&gt;&lt;h3 id=&quot;继承概念&quot;&gt;&lt;a href=&quot;#继承概念&quot; class=&quot;headerlink&quot; </description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="继承的概念及定义"><a href="#继承的概念及定义" class="headerlink" title="继承的概念及定义"></a>继承的概念及定义</h2><h3 id="继承概念"><a href="#继承概念" class="headerlink" title="继承概念"></a>继承概念</h3><p>继承(inheritance)机制是面向对象程序设计使代码可以复用的最重要的手段，它允许程序员在保 持原有类特性的基础上进行扩展，增加功能，这样产生新的类，称派生类。继承呈现了面向对象 程序设计的层次结构，体现了由简单到复杂的认知过程。以前我们接触的复用都是函数复用，继承是类设计层次的复用</p><h3 id="继承定义"><a href="#继承定义" class="headerlink" title="继承定义"></a>继承定义</h3><h4 id="定义格式"><a href="#定义格式" class="headerlink" title="定义格式"></a>定义格式</h4><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665842803037-eb12fae7-3e8c-4243-a915-09d684e626bd.png#averageHue=%23fbfbfb&clientId=ucddb3e9e-e17a-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=369&id=ude023e28&margin=%5Bobject%20Object%5D&name=image.png&originHeight=554&originWidth=920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25512&status=done&style=none&taskId=ue258894c-c700-4c08-af2f-16f2fe31140&title=&width=613.3333333333334" alt="image.png"><br>继承后，父类的成员，包括成员函数和成员变量，都会变成子类的一部分。</p><h4 id="默认继承方式"><a href="#默认继承方式" class="headerlink" title="默认继承方式"></a>默认继承方式</h4><p>在使用继承时，可以不指定继承方式，使用关键字class时默认的继承方式是private，使用struct时，默认的继承方式是public</p><h4 id="继承关系和访问限定符"><a href="#继承关系和访问限定符" class="headerlink" title="继承关系和访问限定符"></a>继承关系和访问限定符</h4><p>访问限定符：</p><ul><li>public</li><li>protected</li><li>private</li></ul><p>继承关系</p><ul><li>public</li><li>protected</li><li>private</li></ul><p>私有成员的意义：不想被子类继承的成员，可以设计成私有<br>基类中想给子类复用，但是又不想暴露直接访问的成员，就应该定义成保护</p><h4 id="继承基类成员访问方式的变化"><a href="#继承基类成员访问方式的变化" class="headerlink" title="继承基类成员访问方式的变化"></a>继承基类成员访问方式的变化</h4><table><thead><tr><th>类成员&#x2F;继承方式</th><th>public继承</th><th>protected继承</th><th>private继承</th></tr></thead><tbody><tr><td>基类的public成员</td><td>派生类的public成员</td><td>派生类的protected成员</td><td>派生类的private成员</td></tr><tr><td>基类的protected成员</td><td>派生类的protected成员</td><td>派生类的protected成员</td><td>派生类的private成员</td></tr><tr><td>基类的private成员</td><td>在派生类不可见</td><td>在派生类不可见</td><td>在派生类不可见</td></tr></tbody></table><p>:::info<br>取成员限定符和继承方式的较小<br>:::</p><blockquote><p>protected&#x2F;private  类外边不能访问 类里面可以访问<br>不可见                         隐身，类里面外面都无法访问</p></blockquote><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ul><li>基类private成员在派生类中无论以什么方式继承都是不可见的。这里的不可见是指基类的私<br>有成员还是被继承到了派生类对象中，但是语法上限制派生类对象不管在类里面还是类外面<br>都不能去访问它。</li><li>基类private成员在派生类中是不能被访问，如果基类成员不想在类外直接被访问，但需要在<br>派生类中能访问，就定义为protected。可以看出保护成员限定符是因继承才出现的。</li><li>实际上面的表格我们进行一下总结会发现，基类的私有成员在子类都是不可见。基类的其他<br>成员在子类的访问方式 &#x3D;&#x3D; Min(成员在基类的访问限定符，继承方式)，public &gt; protected&gt;private。</li><li>使用关键字class时默认的继承方式是private，使用struct时默认的继承方式是public，不过<br>最好显示的写出继承方式。</li><li>在实际运用中一般使用都是public继承，几乎很少使用protetced&#x2F;private继承，也不提倡<br>使用protetced&#x2F;private继承，因为protetced&#x2F;private继承下来的成员都只能在派生类的类里<br>面使用，实际中扩展维护性不强</li></ul><h2 id="基和派生类对象赋值转换"><a href="#基和派生类对象赋值转换" class="headerlink" title="基和派生类对象赋值转换"></a>基和派生类对象赋值转换</h2><ul><li>派生类对象 可以赋值给 基类的对象 &#x2F; 基类的指针 &#x2F; 基类的引用。这里有个形象的说法叫切片<br>或者切割。寓意把派生类中父类那部分切来赋值过去。</li><li>基类对象不能赋值给派生类对象。</li><li>基类的指针或者引用可以通过强制类型转换赋值给派生类的指针或者引用。但是必须是基类<br>的指针是指向派生类对象时才是安全的。这里基类如果是多态类型，可以使用RTTI(RunTime Type Information)的dynamic_cast 来进行识别后进行安全转换。</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665911527698-30aebb38-ac6a-4bc6-9963-62f385ae1e2d.png#averageHue=%23fdf7eb&clientId=uda2bf642-89db-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=524&id=uedf0ce47&margin=%5Bobject%20Object%5D&name=image.png&originHeight=786&originWidth=554&originalType=binary&ratio=1&rotation=0&showTitle=false&size=43417&status=done&style=none&taskId=u10f1346e-edeb-46c9-ad83-93a2d7d8c24&title=&width=369.3333333333333" alt="image.png"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">string _name; <span class="comment">// 姓名</span></span><br><span class="line">string _sex;  <span class="comment">// 性别</span></span><br><span class="line"><span class="type">int</span>_age; <span class="comment">// 年龄</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> : <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> _No; <span class="comment">// 学号</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Student sobj;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.子类对象可以赋值给父类对象/指针/引用</span></span><br><span class="line"><span class="comment">// 这里虽然是不同类型，但是不是隐式类型转换</span></span><br><span class="line"><span class="comment">// 这里算是一个特殊支持，语法天然支持的</span></span><br><span class="line">Person pobj = sobj;</span><br><span class="line">Person* pp = &amp;sobj;</span><br><span class="line">Person&amp; rp = sobj;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span>&amp; d = i;</span><br><span class="line"></span><br><span class="line"><span class="comment">//sobj = (Student)pobj;   //强转成派生类</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意：基类的对象不能赋值给派生类对象，基类的指针可以通过强制类型转换赋值给派生类的指针，但是此时基类的指针必须是指向派生类的对象才是安全的。</p><h2 id="继承中的作用域"><a href="#继承中的作用域" class="headerlink" title="继承中的作用域"></a>继承中的作用域</h2><ul><li>在继承体系中，基类和派生类都有独立的作用域</li><li>子类和父类中有同名成员，子类成员将屏蔽父类对同名成员的直接访问，这种情况叫隐藏，也叫重定义。（在子类成员函数中，可以使用 基类::基类成员 显示访问）</li><li>注意在实际中在继承体系里最好不要定义同名的成员</li><li>需要注意的是如果是成员函数的隐藏，只需要函数名相同就构成隐藏</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string _name; <span class="comment">// 姓名</span></span><br><span class="line"><span class="type">int</span> _num;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;parent&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> : <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> _num;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;child&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Student s;</span><br><span class="line">s._num = <span class="number">1</span>;</span><br><span class="line">cout &lt;&lt; s._num &lt;&lt; endl;</span><br><span class="line">s.Person::_num = <span class="number">2</span>;</span><br><span class="line">cout &lt;&lt; s.Person::_num &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">s.<span class="built_in">fun</span>();</span><br><span class="line">s.Person::<span class="built_in">fun</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="派生类的默认成员函数"><a href="#派生类的默认成员函数" class="headerlink" title="派生类的默认成员函数"></a>派生类的默认成员函数</h2><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665924224019-25167b1f-d0d9-41fb-8a1e-3036a3938fc3.png#averageHue=%23d6e81f&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=170&id=ue92dcd90&margin=%5Bobject%20Object%5D&name=image.png&originHeight=255&originWidth=913&originalType=binary&ratio=1&rotation=0&showTitle=false&size=69980&status=done&style=none&taskId=u3248b978-23c3-41d1-b69d-a99b288c1ca&title=&width=608.6666666666666" alt="image.png"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//Person(const char* name = &quot;peter&quot;)</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> <span class="type">char</span>* name)</span><br><span class="line">: _name(name)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Person()&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p)</span><br><span class="line">: _name(p._name)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Person(const Person&amp; p)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Person&amp; p)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Person operator=(const Person&amp; p)&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span> != &amp;p)</span><br><span class="line">_name = p._name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;~Person()&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">string _name; <span class="comment">// 姓名</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> : <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Student</span>(<span class="type">const</span> <span class="type">char</span>* name, <span class="type">int</span> num)</span><br><span class="line">:<span class="built_in">Person</span>(name)   <span class="comment">//父类没有默认构造，初始化列表规定这么写，就像匿名对象那样</span></span><br><span class="line">, _num(num)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Student()&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Student</span>(<span class="type">const</span> Student&amp; s)</span><br><span class="line">:<span class="built_in">Person</span>(s) <span class="comment">//切片  </span></span><br><span class="line">, _num(s._num)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Student(const Student&amp; s)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Student&amp; s)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span> != &amp;s)</span><br><span class="line">&#123;</span><br><span class="line">Person::<span class="keyword">operator</span>=(s);</span><br><span class="line"></span><br><span class="line">_num = s._num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Student&amp; operator=(const Student&amp; s)&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类的析构的函数跟父类析构函数构成隐藏。</span></span><br><span class="line"><span class="comment">// 由于后面多态的需要，析构函数名字会统一处理成destructor()</span></span><br><span class="line">~<span class="built_in">Student</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// 不需要显示调用父类析构函数</span></span><br><span class="line"><span class="comment">// 每个子类析构函数后面，会自动调用父类析构函数，这样才能保证先析构子类，再析构父类</span></span><br><span class="line"><span class="comment">//Person::~Person();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...处理子类自己的</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;~Student()&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Student* operator&amp;()</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//return this;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> _num;</span><br><span class="line"></span><br><span class="line"><span class="comment">// int* _ptr;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Student <span class="title">s1</span><span class="params">(<span class="string">&quot;张三&quot;</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Student s2(s1);</span></span><br><span class="line">Student s2 = s1;</span><br><span class="line"></span><br><span class="line"><span class="function">Student <span class="title">s3</span><span class="params">(<span class="string">&quot;李四&quot;</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">s1 = s3;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; &amp;s1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665923523186-23fc5042-b349-4418-abc2-3f816c892f7f.png#averageHue=%23272625&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=277&id=ua98444aa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=415&originWidth=633&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31156&status=done&style=none&taskId=ucc19a40c-5c37-435c-b800-e4ef171ef8d&title=&width=422" alt="image.png"></p><blockquote><p>构造时，先调用父类的构造，再调用子类的，析构时先析构子，再析构父类</p></blockquote><h3 id="子类默认生成的构造函数"><a href="#子类默认生成的构造函数" class="headerlink" title="子类默认生成的构造函数"></a>子类默认生成的构造函数</h3><ul><li>自己的成员，跟类和对象一样，内置类型不处理，自定义类型调用他的默认构造</li><li>继承父类成员必须调用父类构造函数初始化</li></ul><h3 id="编译器默认生成的析构函数"><a href="#编译器默认生成的析构函数" class="headerlink" title="编译器默认生成的析构函数"></a>编译器默认生成的析构函数</h3><ul><li>自己的成员， 内置类型不处理，自定义类型调用它的析构</li><li>继承的成员，调用父类析构函数处理</li></ul><hr><h3 id="编译生成的默认拷贝构造"><a href="#编译生成的默认拷贝构造" class="headerlink" title="编译生成的默认拷贝构造"></a>编译生成的默认拷贝构造</h3><ul><li>自己成员，跟类和对象一样（内置类型，值拷贝，自定义类型调用它的拷贝构造）</li><li>继承的父类成员，必须调用父类拷贝构造初始化</li></ul><h3 id="编译器默认生成的operator-x3D"><a href="#编译器默认生成的operator-x3D" class="headerlink" title="编译器默认生成的operator&#x3D;"></a>编译器默认生成的operator&#x3D;</h3><p>同上</p><hr><h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><ul><li>派生类的构造函数调用时，会自动调用基类的构造函数初始化基类的一部分成员，如果基类中没有默认构造函数则必须在派生类构造函数的初始化列表中显示调用基类的构造函数</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665924438484-50f4e250-c115-464a-ab08-7aa2536ecf3e.png#averageHue=%23fdfaf9&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=161&id=sgyNG&margin=%5Bobject%20Object%5D&name=image.png&originHeight=241&originWidth=650&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25919&status=done&style=none&taskId=uac21a5c0-4078-4e18-90a7-bc711541814&title=&width=433.3333333333333" alt="image.png"></p><ul><li>派生类的拷贝构造函数必须调用基类的构造函数完成基类成员的拷贝构造</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665924541930-3bcafcf9-c9a3-4fb7-9d91-74cea67322fd.png#averageHue=%23fdfbfa&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=185&id=ud658102a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=277&originWidth=850&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31291&status=done&style=none&taskId=u2622b831-0296-418f-81e4-0668e6475a3&title=&width=566.6666666666666" alt="image.png"></p><ul><li>派生类的赋值运算符重载函数必须调用基类的赋值运算符重载函数完成基类成员的赋值</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665924642477-58801ec0-cd39-4c14-800d-68029738993d.png#averageHue=%23fefcfc&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=349&id=ubd1d7b31&margin=%5Bobject%20Object%5D&name=image.png&originHeight=524&originWidth=1076&originalType=binary&ratio=1&rotation=0&showTitle=false&size=52453&status=done&style=none&taskId=u1e8b2984-42cd-4bfe-ab36-30167408283&title=&width=717.3333333333334" alt="image.png"></p><ul><li>派生类的析构函数会会在被调用完成后自动调用基类的析构函数清理基类成员</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665924714654-705f1273-b934-4799-a0fc-b63b87e4d831.png#averageHue=%23fefdfd&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=243&id=u278f7ef6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=364&originWidth=1434&originalType=binary&ratio=1&rotation=0&showTitle=false&size=76014&status=done&style=none&taskId=ua2ce9e09-5343-4181-86f3-e761020ab72&title=&width=956" alt="image.png"></p><ul><li>派生对象初始化时，会先调用基类的构造函数，再调用派生类的构造函数</li></ul><blockquote><p>另外几点注意</p></blockquote><ol><li>派生类和基类的赋值运算符重载函数因为函数名相同构造隐藏，因此在派生类当中，调用基类的赋值运算符重载函数时，需要使用作用域限定符指定调用</li><li>由于多态的某些原因，任何类的析构函数名都被统一处理为destructor()，因此，派生类和基类的析构函数就会因为函数名相同构成隐藏，如若我们需要在某处显示调用基类的析构函数，那么就要使用作用域限定符指定调用</li><li>在派生类的拷贝构造函数和operator&#x3D;当中调用基类的拷贝构造函数，传参方式都是切片行为，都是将派生类对象直接赋值给基类的引用</li><li>基类的构造、拷贝构造、赋值我们都可以在派生类中自行调用，但是基类析构是当派生类析构函数调用后由编译器自动调用的，如果我们显示调用基类析构函数，会导致基类被析构多次</li><li>创建派生类对象时是先创建基类成员再创建派生类成员，编译器为了保证先定义的后析构，所以自动调用基类的析构函数</li></ol><h2 id="继承与友元"><a href="#继承与友元" class="headerlink" title="继承与友元"></a>继承与友元</h2><p>友元关系不能继承，基类的友元函数，不能访问派生类的私有和保护</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">Display</span><span class="params">(<span class="type">const</span> Person&amp; p, <span class="type">const</span> Student&amp; s)</span></span>;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">string _name; <span class="comment">// 姓名</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> : <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">Display</span><span class="params">(<span class="type">const</span> Person&amp; p, <span class="type">const</span> Student&amp; s)</span></span>; <span class="comment">//这里不加会报错</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> _stuNum; <span class="comment">// 学号</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Display</span><span class="params">(<span class="type">const</span> Person&amp; p, <span class="type">const</span> Student&amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; p._name &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; s._stuNum &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p;</span><br><span class="line">Student s;</span><br><span class="line"><span class="built_in">Display</span>(p, s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="继承与静态成员"><a href="#继承与静态成员" class="headerlink" title="继承与静态成员"></a>继承与静态成员</h2><p>若基类中定义了一个static静态成员变量，那么在整个继承体系中只有一个该静态成员，无论派生出多少个子类，都只有一个static成员实例</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123; ++_count; &#125;</span><br><span class="line"><span class="comment">//protected:</span></span><br><span class="line">string _name; <span class="comment">// 姓名</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> _count; <span class="comment">// 统计人的个数。</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Person::_count = <span class="number">0</span>;   <span class="comment">//静态成员变量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> : <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> _stuNum; <span class="comment">// 学号</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p;</span><br><span class="line">Student s;</span><br><span class="line"></span><br><span class="line">p._name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line">cout &lt;&lt; s._name &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; Student::_count &lt;&lt; endl;</span><br><span class="line">++Person::_count;</span><br><span class="line">cout &lt;&lt; Student::_count &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; &amp;Person::_count &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; &amp;Student::_count &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码说明：</p><ul><li>子类 count++  父类 也会++</li><li>两个count 地址相同</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665926120982-afd1f668-5895-4c23-b042-5891253899d1.png#averageHue=%23434140&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=117&id=u275c88b4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=176&originWidth=350&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7607&status=done&style=none&taskId=u0b735a34-b8a5-4c78-9dc3-bae9a28d15b&title=&width=233.33333333333334" alt="image.png"></p><h2 id="复杂的菱形继承及菱形虚拟继承"><a href="#复杂的菱形继承及菱形虚拟继承" class="headerlink" title="复杂的菱形继承及菱形虚拟继承"></a>复杂的菱形继承及菱形虚拟继承</h2><h3 id="如何定义一个不能被继承的类"><a href="#如何定义一个不能被继承的类" class="headerlink" title="如何定义一个不能被继承的类"></a>如何定义一个不能被继承的类</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">final</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="built_in">A</span>()</span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> _a;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// C++98</span></span><br><span class="line"><span class="comment">// 1、父类构造函数私有-- 子类是不可见</span></span><br><span class="line"><span class="comment">// 2、子类对象实例化，无法调用构造函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// C++11</span></span><br><span class="line"><span class="comment">// final</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//B bb;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665926275604-95484c9a-7dfe-4e5a-ac44-6069a199abba.png#averageHue=%236babdf&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=49&id=ue4cf0d64&margin=%5Bobject%20Object%5D&name=image.png&originHeight=74&originWidth=1462&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14903&status=done&style=none&taskId=ubf9c4de1-9e31-4ece-aefc-d9ce21309b6&title=&width=974.6666666666666" alt="image.png"></p><h3 id="继承方式"><a href="#继承方式" class="headerlink" title="继承方式"></a>继承方式</h3><blockquote><p>单继承：一个子类只有一个直接父类</p></blockquote><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665926407861-410505cc-54ef-4f2c-b258-fa75dcae5bbf.png#averageHue=%23f6f6f6&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=440&id=u3930072f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=660&originWidth=1050&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4930&status=done&style=none&taskId=u22cdf83d-7d24-445d-b7a4-60c1bb39e82&title=&width=700" alt="image.png"></p><blockquote><p>多继承：一个子类有两个或两个以上直接父类</p></blockquote><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665926491715-d1faab7e-ac2e-462b-9b8a-bcb641e79382.png#averageHue=%23f7f7f7&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=341&id=u186177c4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=511&originWidth=974&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4295&status=done&style=none&taskId=uddca721d-77c1-467c-9cec-0ca4dc91358&title=&width=649.3333333333334" alt="image.png"></p><blockquote><p>菱形继承：多继承的一种特殊情况</p></blockquote><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665926639901-30398b6a-75ad-4a1c-a4e4-6acbe0258f5e.png#averageHue=%23f8f8f8&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=527&id=uc7e73fba&margin=%5Bobject%20Object%5D&name=image.png&originHeight=791&originWidth=955&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6898&status=done&style=none&taskId=ue910af18-9434-4c87-b8e7-42cbf793754&title=&width=636.6666666666666" alt="image.png"><br>菱形继承的方式存在数据冗余和二义性的问题</p><h3 id="一个题"><a href="#一个题" class="headerlink" title="一个题"></a>一个题</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base1</span> &#123; <span class="keyword">public</span>:  <span class="type">int</span> _b1; &#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base2</span> &#123; <span class="keyword">public</span>:  <span class="type">int</span> _b2; &#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derive</span> : <span class="keyword">public</span> Base1, <span class="keyword">public</span> Base2 &#123; <span class="keyword">public</span>: <span class="type">int</span> _d; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Derive d;</span><br><span class="line">Base1* p1 = &amp;d;</span><br><span class="line">Base2* p2 = &amp;d;</span><br><span class="line">Derive* p3 = &amp;d;</span><br><span class="line"></span><br><span class="line">d._b1 = <span class="number">1</span>;</span><br><span class="line">d._b2 = <span class="number">2</span>;</span><br><span class="line">d._d = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; p1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; p2 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; p3 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>P1 P2 P3的关系： “先使用了低地址”<br>p1&#x3D;&#x3D;p3&lt;p2</p><p><strong>解释：</strong><br><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665927761574-109c0daa-a64d-4ec2-bbe9-45e38bb19a86.png#averageHue=%23f6f6f6&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=213&id=u4533b4cf&margin=%5Bobject%20Object%5D&name=image.png&originHeight=319&originWidth=1360&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13067&status=done&style=none&taskId=u4141fed7-a89e-4356-a6ed-b01929f0ef3&title=&width=906.6666666666666" alt="image.png"><br><strong>该类对象模型：</strong><br><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665927183117-40ca8bae-cd49-4b91-996f-06263871b07a.png#averageHue=%23fefefe&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=500&id=u3aa93300&margin=%5Bobject%20Object%5D&name=image.png&originHeight=750&originWidth=822&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15161&status=done&style=none&taskId=u545af6a6-487d-4e0d-8c91-d2cb5c94944&title=&width=548" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665927302508-4e02ebc3-cecc-410a-9e73-a5addf5a7c05.png#averageHue=%23f0c782&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=147&id=u927f6c7f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=220&originWidth=492&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13295&status=done&style=none&taskId=ua3c395ac-74f6-4cbc-91c0-47180a97f08&title=&width=328" alt="image.png"></p><p>&amp;d 看到内存信息，01地址最低，也就是_b1的地址最低，base1是先继承的，所以地址最低，我们传统的想法是栈是向下增长，先使用高地址再使用低地址，但是在这个对象里成员就像倒着存一样</p><h3 id="菱形继承的问题"><a href="#菱形继承的问题" class="headerlink" title="菱形继承的问题"></a>菱形继承的问题</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string _name; <span class="comment">// 姓名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// int _age;</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> : <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> _num; <span class="comment">//学号</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span> : <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> _id; <span class="comment">// 职工编号</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Assistant</span> : <span class="keyword">public</span> Student, <span class="keyword">public</span> Teacher</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">string _majorCourse; <span class="comment">// 主修课程</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Assistant at;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 菱形继承的二义性问题</span></span><br><span class="line"><span class="comment">// 数据冗余</span></span><br><span class="line"><span class="comment">//at._name = &quot;张三&quot;;</span></span><br><span class="line">at.Student::_name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line">at.Teacher::_name = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>二义性可以通过指定类域解决，但是数据冗余的问题还是无法解决，Assistant这个类中有两份的_name.<br><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665928284321-c1616231-08cd-4c01-9c15-460c7727b0ce.png#averageHue=%23f9f8f6&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=193&id=u4fe948a1&margin=%5Bobject%20Object%5D&name=image.png&originHeight=290&originWidth=869&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26788&status=done&style=none&taskId=u42b53a14-4f5b-4850-8c9c-3001e700fd0&title=&width=579.3333333333334" alt="image.png"></p><blockquote><p>这时候需要用菱形虚拟继承，用法就是在继承方式前边加一个virtual，在菱形继承的腰部加virtual</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string _name; <span class="comment">// 姓名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// int _age;</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> _num; <span class="comment">//学号</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> _id; <span class="comment">// 职工编号</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Assistant</span> : <span class="keyword">public</span> Student, <span class="keyword">public</span> Teacher</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">string _majorCourse; <span class="comment">// 主修课程</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Assistant at;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 菱形虚拟继承解决了二义性和数据冗余</span></span><br><span class="line">at._name = <span class="string">&quot;小张&quot;</span>;</span><br><span class="line">at.Student::_name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line">at.Teacher::_name = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665928541044-58906662-6534-4929-a125-f71ed144504f.png#averageHue=%23fcfaf9&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=451&id=u505afb34&margin=%5Bobject%20Object%5D&name=image.png&originHeight=677&originWidth=2084&originalType=binary&ratio=1&rotation=0&showTitle=false&size=166970&status=done&style=none&taskId=u0a404cfc-23d6-4b61-a3ee-974587803bc&title=&width=1389.3333333333333" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665928728293-6786235e-8f54-4ebf-b745-42eee72ca4f8.png#averageHue=%23fcfaf8&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=369&id=u06883c63&margin=%5Bobject%20Object%5D&name=image.png&originHeight=553&originWidth=2083&originalType=binary&ratio=1&rotation=0&showTitle=false&size=142280&status=done&style=none&taskId=u9d3c0d5f-83fd-45c0-aff8-ab9ca53cf71&title=&width=1388.6666666666667" alt="image.png"></p><p>这里解决了数据冗余的问题，因为_name都是一个</p><h3 id="虚拟继承的对象模型"><a href="#虚拟继承的对象模型" class="headerlink" title="虚拟继承的对象模型"></a>虚拟继承的对象模型</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> _a;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//class B : public A</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> _b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//class C : public A</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> _c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> : <span class="keyword">public</span> B, <span class="keyword">public</span> C</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> _d;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">D d;</span><br><span class="line">d.B::_a = <span class="number">1</span>;</span><br><span class="line">d.C::_a = <span class="number">2</span>;</span><br><span class="line">d._a = <span class="number">0</span>;</span><br><span class="line">d._b = <span class="number">3</span>;</span><br><span class="line">d._c = <span class="number">4</span>;</span><br><span class="line">d._d = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">B b = d;</span><br><span class="line">B* pb = &amp;d;</span><br><span class="line"></span><br><span class="line">C c = d;</span><br><span class="line">C* pc = &amp;d;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>有虚拟继承</strong><br><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665929216002-77d2109f-1280-486a-96e7-f30915b7517d.png#averageHue=%23e1be87&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=737&id=ua5ea4805&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1105&originWidth=2077&originalType=binary&ratio=1&rotation=0&showTitle=false&size=258149&status=done&style=none&taskId=ud8ef7aeb-9160-48cc-be1e-0e2c6c56464&title=&width=1384.6666666666667" alt="image.png"><br>我们来看内存的具体信息<br><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665930343351-8fa3f176-7e43-4803-87a5-f421bc79d7e9.png#averageHue=%23fcfaf7&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=467&id=uae4d76fa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=700&originWidth=1957&originalType=binary&ratio=1&rotation=0&showTitle=false&size=97769&status=done&style=none&taskId=u0761c169-fa35-4371-b9f6-72127f42028&title=&width=1304.6666666666667" alt="image.png"></p><p>虚拟继承后类对象模型变成了如下<br><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665930553735-f608a98b-8117-440e-aa4b-242da677bd08.png#averageHue=%23fefdfd&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=507&id=u8e90a8c2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=761&originWidth=903&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10332&status=done&style=none&taskId=ub30041f5-98e6-4109-9076-6fc6db9a7db&title=&width=602" alt="image.png"><br>对象里面有了两个指针，叫做虚基表指针，他们分别指向一个虚基表，虚基表中包含两个数据，第一个是为多态的虚表预留的存偏移量的位置，第二个数据就是当前类对象位置距离公共虚基类的偏移量</p><p><strong>如果没有虚拟继承</strong><br><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665930786365-d351fcb7-1648-4c4b-b52c-7baf6d006387.png#averageHue=%23fcfcfb&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=274&id=u82e87a07&margin=%5Bobject%20Object%5D&name=image.png&originHeight=411&originWidth=1246&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35325&status=done&style=none&taskId=ue79b9a48-1be0-434b-a73c-d38be29be6b&title=&width=830.6666666666666" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665930848594-a73182f0-67fa-44d2-bbd0-67e7249ae9c0.png#averageHue=%23fefdfd&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=485&id=ud37b8164&margin=%5Bobject%20Object%5D&name=image.png&originHeight=727&originWidth=723&originalType=binary&ratio=1&rotation=0&showTitle=false&size=9686&status=done&style=none&taskId=u67aee36b-3cdf-4e57-8ff9-f334d68402e&title=&width=482" alt="image.png"><br>这里有个问题，好像使用虚拟继承和不用虚拟继承空间是消耗了相同的，但是，如果A的_a是个大对象，就会省空间。<br>注：如果，将D类对象，赋值给B类对象，在这个切片过程中，就需要通过虚基表中的第二个数据找到公共虚基类A的成员，得到切片后，该B类对象在内存中仍然保持这种分布。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665931305427-e4136cd3-ae7a-44c6-bc95-c2608d9ad85f.png#averageHue=%23fdfdfd&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=218&id=u6318824f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=327&originWidth=439&originalType=binary&ratio=1&rotation=0&showTitle=false&size=17436&status=done&style=none&taskId=u29ac3bc0-c7a4-46c6-b52d-d4374cf633b&title=&width=292.6666666666667" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665931293362-77525e34-b172-4107-8d56-fcc8b432e9cb.png#averageHue=%23f3e8d8&clientId=u9a15f95a-cdec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=128&id=u93c161c3&margin=%5Bobject%20Object%5D&name=image.png&originHeight=192&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11212&status=done&style=none&taskId=u55bee722-0a8f-4764-9058-9478555dc00&title=&width=248" alt="image.png"></p><h2 id="继承的总结和反思"><a href="#继承的总结和反思" class="headerlink" title="继承的总结和反思"></a>继承的总结和反思</h2><p>所以一般不建议设计出多继承，一定不要设计出菱形继承。否则在复杂度及性能上都有问题。多继承可以认为是C++的缺陷之一，很多后来的OO语言都没有多继承，如Java。</p><h3 id="继承和组合"><a href="#继承和组合" class="headerlink" title="继承和组合"></a>继承和组合</h3><ul><li>public继承是一种is-a的关系。也就是说每个派生类对象都是一个基类对象。</li><li>组合是一种has-a的关系。假设B组合了A，每个B对象中都有一个A对象。</li></ul><p>继承允许你根据基类的实现来定义派生类的实现。这种通过生成派生类的复用通常被称<br>为白箱复用(white-box reuse)。术语“白箱”是相对可视性而言：在继承方式中，基类的<br>内部细节对子类可见 。继承一定程度破坏了基类的封装，基类的改变，对派生类有很<br>大的影响。派生类和基类间的依赖关系很强，耦合度高。</p><p>对象组合是类继承之外的另一种复用选择。新的更复杂的功能可以通过组装或组合对象<br>来获得。对象组合要求被组合的对象具有良好定义的接口。这种复用风格被称为黑箱复<br>用(black-box reuse)，因为对象的内部细节是不可见的。对象只以“黑箱”的形式出现。<br>组合类之间没有很强的依赖关系，耦合度低。优先使用对象组合有助于你保持每个类被<br>封装。</p><p>实际尽量多去用组合。组合的耦合度低，代码维护性好。不过继承也有用武之地的，有<br>些关系就适合继承那就用继承，另外要实现多态，也必须要继承。类之间的关系可以用<br>继承，可以用组合，就用组合</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/29247941/1665932203320-44346fb6-7516-4f7c-98c6-c400b8a66dff.png#averageHue=%23fcfcfc&clientId=uf24a1cd6-4779-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=368&id=ub1ac8a38&margin=%5Bobject%20Object%5D&name=image.png&originHeight=552&originWidth=1114&originalType=binary&ratio=1&rotation=0&showTitle=false&size=47650&status=done&style=none&taskId=ua8df4665-72a3-45e4-a680-44f1d967f22&title=&width=742.6666666666666" alt="image.png"></p>]]></content:encoded>
      
      
      <category domain="http://example.com/categories/CPP/">CPP</category>
      
      
      
      <comments>http://example.com/2023/01/14/CPP/%E7%BB%A7%E6%89%BF/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
